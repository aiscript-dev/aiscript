(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function _i(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const be={},xr=[],Ct=()=>{},Co=()=>!1,En=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ci=e=>e.startsWith("onUpdate:"),$e=Object.assign,Ei=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Eo=Object.prototype.hasOwnProperty,pe=(e,t)=>Eo.call(e,t),Z=Array.isArray,_r=e=>zr(e)==="[object Map]",sa=e=>zr(e)==="[object Set]",es=e=>zr(e)==="[object Date]",re=e=>typeof e=="function",Fe=e=>typeof e=="string",Pt=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",aa=e=>(Ce(e)||re(e))&&re(e.then)&&re(e.catch),oa=Object.prototype.toString,zr=e=>oa.call(e),Po=e=>zr(e).slice(8,-1),la=e=>zr(e)==="[object Object]",Pi=e=>Fe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tr=_i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pn=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},So=/-(\w)/g,Kt=Pn(e=>e.replace(So,(t,r)=>r?r.toUpperCase():"")),Ao=/\B([A-Z])/g,ur=Pn(e=>e.replace(Ao,"-$1").toLowerCase()),ua=Pn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Nn=Pn(e=>e?`on${ua(e)}`:""),jt=(e,t)=>!Object.is(e,t),ln=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},ca=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},ri=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ts;const Sn=()=>ts||(ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Si(e){if(Z(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=Fe(n)?ko(n):Si(n);if(i)for(const s in i)t[s]=i[s]}return t}else if(Fe(e)||Ce(e))return e}const Fo=/;(?![^(]*\))/g,Mo=/:([^]+)/,Oo=/\/\*[^]*?\*\//g;function ko(e){const t={};return e.replace(Oo,"").split(Fo).forEach(r=>{if(r){const n=r.split(Mo);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function An(e){let t="";if(Fe(e))t=e;else if(Z(e))for(let r=0;r<e.length;r++){const n=An(e[r]);n&&(t+=n+" ")}else if(Ce(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const $o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bo=_i($o);function fa(e){return!!e||e===""}function To(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=gn(e[n],t[n]);return r}function gn(e,t){if(e===t)return!0;let r=es(e),n=es(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Pt(e),n=Pt(t),r||n)return e===t;if(r=Z(e),n=Z(t),r||n)return r&&n?To(e,t):!1;if(r=Ce(e),n=Ce(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!gn(e[a],t[a]))return!1}}return String(e)===String(t)}const ha=e=>!!(e&&e.__v_isRef===!0),yr=e=>Fe(e)?e:e==null?"":Z(e)||Ce(e)&&(e.toString===oa||!re(e.toString))?ha(e)?yr(e.value):JSON.stringify(e,pa,2):String(e),pa=(e,t)=>ha(t)?pa(e,t.value):_r(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],s)=>(r[Dn(n,s)+" =>"]=i,r),{})}:sa(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Dn(r))}:Pt(t)?Dn(t):Ce(t)&&!Z(t)&&!la(t)?String(t):t,Dn=(e,t="")=>{var r;return Pt(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rt;class Io{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=rt,!t&&rt&&(this.index=(rt.scopes||(rt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=rt;try{return rt=this,t()}finally{rt=r}}}on(){rt=this}off(){rt=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Ro(){return rt}let _e;const Ln=new WeakSet;class da{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,rt&&rt.active&&rt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ln.has(this)&&(Ln.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ma(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rs(this),ya(this);const t=_e,r=gt;_e=this,gt=!0;try{return this.fn()}finally{va(this),_e=t,gt=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Mi(t);this.deps=this.depsTail=void 0,rs(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ln.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ni(this)&&this.run()}get dirty(){return ni(this)}}let ga=0,Ir,Rr;function ma(e,t=!1){if(e.flags|=8,t){e.next=Rr,Rr=e;return}e.next=Ir,Ir=e}function Ai(){ga++}function Fi(){if(--ga>0)return;if(Rr){let t=Rr;for(Rr=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;Ir;){let t=Ir;for(Ir=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function ya(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function va(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),Mi(n),No(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function ni(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(wa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function wa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ur))return;e.globalVersion=Ur;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!ni(e)){e.flags&=-3;return}const r=_e,n=gt;_e=e,gt=!0;try{ya(e);const i=e.fn(e._value);(t.version===0||jt(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{_e=r,gt=n,va(e),e.flags&=-3}}function Mi(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)Mi(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function No(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let gt=!0;const ba=[];function qt(){ba.push(gt),gt=!1}function Vt(){const e=ba.pop();gt=e===void 0?!0:e}function rs(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=_e;_e=void 0;try{t()}finally{_e=r}}}let Ur=0;class Do{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Oi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!_e||!gt||_e===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==_e)r=this.activeLink=new Do(_e,this),_e.deps?(r.prevDep=_e.depsTail,_e.depsTail.nextDep=r,_e.depsTail=r):_e.deps=_e.depsTail=r,xa(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=_e.depsTail,r.nextDep=void 0,_e.depsTail.nextDep=r,_e.depsTail=r,_e.deps===r&&(_e.deps=n)}return r}trigger(t){this.version++,Ur++,this.notify(t)}notify(t){Ai();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Fi()}}}function xa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)xa(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const ii=new WeakMap,nr=Symbol(""),si=Symbol(""),jr=Symbol("");function Ne(e,t,r){if(gt&&_e){let n=ii.get(e);n||ii.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new Oi),i.map=n,i.key=r),i.track()}}function Bt(e,t,r,n,i,s){const a=ii.get(e);if(!a){Ur++;return}const o=l=>{l&&l.trigger()};if(Ai(),t==="clear")a.forEach(o);else{const l=Z(e),c=l&&Pi(r);if(l&&r==="length"){const f=Number(n);a.forEach((h,y)=>{(y==="length"||y===jr||!Pt(y)&&y>=f)&&o(h)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(jr)),t){case"add":l?c&&o(a.get("length")):(o(a.get(nr)),_r(e)&&o(a.get(si)));break;case"delete":l||(o(a.get(nr)),_r(e)&&o(a.get(si)));break;case"set":_r(e)&&o(a.get(nr));break}}Fi()}function dr(e){const t=he(e);return t===e?t:(Ne(t,"iterate",jr),ft(e)?t:t.map(De))}function Fn(e){return Ne(e=he(e),"iterate",jr),e}const Lo={__proto__:null,[Symbol.iterator](){return Hn(this,Symbol.iterator,De)},concat(...e){return dr(this).concat(...e.map(t=>Z(t)?dr(t):t))},entries(){return Hn(this,"entries",e=>(e[1]=De(e[1]),e))},every(e,t){return Mt(this,"every",e,t,void 0,arguments)},filter(e,t){return Mt(this,"filter",e,t,r=>r.map(De),arguments)},find(e,t){return Mt(this,"find",e,t,De,arguments)},findIndex(e,t){return Mt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Mt(this,"findLast",e,t,De,arguments)},findLastIndex(e,t){return Mt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Mt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Un(this,"includes",e)},indexOf(...e){return Un(this,"indexOf",e)},join(e){return dr(this).join(e)},lastIndexOf(...e){return Un(this,"lastIndexOf",e)},map(e,t){return Mt(this,"map",e,t,void 0,arguments)},pop(){return Mr(this,"pop")},push(...e){return Mr(this,"push",e)},reduce(e,...t){return ns(this,"reduce",e,t)},reduceRight(e,...t){return ns(this,"reduceRight",e,t)},shift(){return Mr(this,"shift")},some(e,t){return Mt(this,"some",e,t,void 0,arguments)},splice(...e){return Mr(this,"splice",e)},toReversed(){return dr(this).toReversed()},toSorted(e){return dr(this).toSorted(e)},toSpliced(...e){return dr(this).toSpliced(...e)},unshift(...e){return Mr(this,"unshift",e)},values(){return Hn(this,"values",De)}};function Hn(e,t,r){const n=Fn(e),i=n[t]();return n!==e&&!ft(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=r(s.value)),s}),i}const Ho=Array.prototype;function Mt(e,t,r,n,i,s){const a=Fn(e),o=a!==e&&!ft(e),l=a[t];if(l!==Ho[t]){const h=l.apply(e,s);return o?De(h):h}let c=r;a!==e&&(o?c=function(h,y){return r.call(this,De(h),y,e)}:r.length>2&&(c=function(h,y){return r.call(this,h,y,e)}));const f=l.call(a,c,n);return o&&i?i(f):f}function ns(e,t,r,n){const i=Fn(e);let s=r;return i!==e&&(ft(e)?r.length>3&&(s=function(a,o,l){return r.call(this,a,o,l,e)}):s=function(a,o,l){return r.call(this,a,De(o),l,e)}),i[t](s,...n)}function Un(e,t,r){const n=he(e);Ne(n,"iterate",jr);const i=n[t](...r);return(i===-1||i===!1)&&Ti(r[0])?(r[0]=he(r[0]),n[t](...r)):i}function Mr(e,t,r=[]){qt(),Ai();const n=he(e)[t].apply(e,r);return Fi(),Vt(),n}const Uo=_i("__proto__,__v_isRef,__isVue"),_a=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pt));function jo(e){Pt(e)||(e=String(e));const t=he(this);return Ne(t,"has",e),t.hasOwnProperty(e)}class Ca{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?Xo:Aa:s?Sa:Pa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=Z(t);if(!i){let l;if(a&&(l=Lo[r]))return l;if(r==="hasOwnProperty")return jo}const o=Reflect.get(t,r,Le(t)?t:n);return(Pt(r)?_a.has(r):Uo(r))||(i||Ne(t,"get",r),s)?o:Le(o)?a&&Pi(r)?o:o.value:Ce(o)?i?Fa(o):$i(o):o}}class Ea extends Ca{constructor(t=!1){super(!1,t)}set(t,r,n,i){let s=t[r];if(!this._isShallow){const l=ar(s);if(!ft(n)&&!ar(n)&&(s=he(s),n=he(n)),!Z(t)&&Le(s)&&!Le(n))return l?!1:(s.value=n,!0)}const a=Z(t)&&Pi(r)?Number(r)<t.length:pe(t,r),o=Reflect.set(t,r,n,Le(t)?t:i);return t===he(i)&&(a?jt(n,s)&&Bt(t,"set",r,n):Bt(t,"add",r,n)),o}deleteProperty(t,r){const n=pe(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&Bt(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!Pt(r)||!_a.has(r))&&Ne(t,"has",r),n}ownKeys(t){return Ne(t,"iterate",Z(t)?"length":nr),Reflect.ownKeys(t)}}class Ko extends Ca{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const qo=new Ea,Vo=new Ko,Wo=new Ea(!0);const ai=e=>e,Xr=e=>Reflect.getPrototypeOf(e);function zo(e,t,r){return function(...n){const i=this.__v_raw,s=he(i),a=_r(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,c=i[e](...n),f=r?ai:t?oi:De;return!t&&Ne(s,"iterate",l?si:nr),{next(){const{value:h,done:y}=c.next();return y?{value:h,done:y}:{value:o?[f(h[0]),f(h[1])]:f(h),done:y}},[Symbol.iterator](){return this}}}}function Qr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Go(e,t){const r={get(i){const s=this.__v_raw,a=he(s),o=he(i);e||(jt(i,o)&&Ne(a,"get",i),Ne(a,"get",o));const{has:l}=Xr(a),c=t?ai:e?oi:De;if(l.call(a,i))return c(s.get(i));if(l.call(a,o))return c(s.get(o));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Ne(he(i),"iterate",nr),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=he(s),o=he(i);return e||(jt(i,o)&&Ne(a,"has",i),Ne(a,"has",o)),i===o?s.has(i):s.has(i)||s.has(o)},forEach(i,s){const a=this,o=a.__v_raw,l=he(o),c=t?ai:e?oi:De;return!e&&Ne(l,"iterate",nr),o.forEach((f,h)=>i.call(s,c(f),c(h),a))}};return $e(r,e?{add:Qr("add"),set:Qr("set"),delete:Qr("delete"),clear:Qr("clear")}:{add(i){!t&&!ft(i)&&!ar(i)&&(i=he(i));const s=he(this);return Xr(s).has.call(s,i)||(s.add(i),Bt(s,"add",i,i)),this},set(i,s){!t&&!ft(s)&&!ar(s)&&(s=he(s));const a=he(this),{has:o,get:l}=Xr(a);let c=o.call(a,i);c||(i=he(i),c=o.call(a,i));const f=l.call(a,i);return a.set(i,s),c?jt(s,f)&&Bt(a,"set",i,s):Bt(a,"add",i,s),this},delete(i){const s=he(this),{has:a,get:o}=Xr(s);let l=a.call(s,i);l||(i=he(i),l=a.call(s,i)),o&&o.call(s,i);const c=s.delete(i);return l&&Bt(s,"delete",i,void 0),c},clear(){const i=he(this),s=i.size!==0,a=i.clear();return s&&Bt(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=zo(i,e,t)}),r}function ki(e,t){const r=Go(e,t);return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(pe(r,i)&&i in n?r:n,i,s)}const Yo={get:ki(!1,!1)},Jo={get:ki(!1,!0)},Zo={get:ki(!0,!1)};const Pa=new WeakMap,Sa=new WeakMap,Aa=new WeakMap,Xo=new WeakMap;function Qo(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function el(e){return e.__v_skip||!Object.isExtensible(e)?0:Qo(Po(e))}function $i(e){return ar(e)?e:Bi(e,!1,qo,Yo,Pa)}function tl(e){return Bi(e,!1,Wo,Jo,Sa)}function Fa(e){return Bi(e,!0,Vo,Zo,Aa)}function Bi(e,t,r,n,i){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=el(e);if(a===0)return e;const o=new Proxy(e,a===2?n:r);return i.set(e,o),o}function Cr(e){return ar(e)?Cr(e.__v_raw):!!(e&&e.__v_isReactive)}function ar(e){return!!(e&&e.__v_isReadonly)}function ft(e){return!!(e&&e.__v_isShallow)}function Ti(e){return e?!!e.__v_raw:!1}function he(e){const t=e&&e.__v_raw;return t?he(t):e}function rl(e){return!pe(e,"__v_skip")&&Object.isExtensible(e)&&ca(e,"__v_skip",!0),e}const De=e=>Ce(e)?$i(e):e,oi=e=>Ce(e)?Fa(e):e;function Le(e){return e?e.__v_isRef===!0:!1}function wt(e){return nl(e,!1)}function nl(e,t){return Le(e)?e:new il(e,t)}class il{constructor(t,r){this.dep=new Oi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:he(t),this._value=r?t:De(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||ft(t)||ar(t);t=n?t:he(t),jt(t,r)&&(this._rawValue=t,this._value=n?t:De(t),this.dep.trigger())}}function kr(e){return Le(e)?e.value:e}const sl={get:(e,t,r)=>t==="__v_raw"?e:kr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Le(i)&&!Le(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function Ma(e){return Cr(e)?e:new Proxy(e,sl)}class al{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new Oi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ur-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&_e!==this)return ma(this,!0),!0}get value(){const t=this.dep.track();return wa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ol(e,t,r=!1){let n,i;return re(e)?n=e:(n=e.get,i=e.set),new al(n,i,r)}const en={},mn=new WeakMap;let Jt;function ll(e,t=!1,r=Jt){if(r){let n=mn.get(r);n||mn.set(r,n=[]),n.push(e)}}function ul(e,t,r=be){const{immediate:n,deep:i,once:s,scheduler:a,augmentJob:o,call:l}=r,c=d=>i?d:ft(d)||i===!1||i===0?Tt(d,1):Tt(d);let f,h,y,x,M=!1,T=!1;if(Le(e)?(h=()=>e.value,M=ft(e)):Cr(e)?(h=()=>c(e),M=!0):Z(e)?(T=!0,M=e.some(d=>Cr(d)||ft(d)),h=()=>e.map(d=>{if(Le(d))return d.value;if(Cr(d))return c(d);if(re(d))return l?l(d,2):d()})):re(e)?t?h=l?()=>l(e,2):e:h=()=>{if(y){qt();try{y()}finally{Vt()}}const d=Jt;Jt=f;try{return l?l(e,3,[x]):e(x)}finally{Jt=d}}:h=Ct,t&&i){const d=h,v=i===!0?1/0:i;h=()=>Tt(d(),v)}const q=Ro(),K=()=>{f.stop(),q&&Ei(q.effects,f)};if(s&&t){const d=t;t=(...v)=>{d(...v),K()}}let m=T?new Array(e.length).fill(en):en;const p=d=>{if(!(!(f.flags&1)||!f.dirty&&!d))if(t){const v=f.run();if(i||M||(T?v.some((b,C)=>jt(b,m[C])):jt(v,m))){y&&y();const b=Jt;Jt=f;try{const C=[v,m===en?void 0:T&&m[0]===en?[]:m,x];l?l(t,3,C):t(...C),m=v}finally{Jt=b}}}else f.run()};return o&&o(p),f=new da(h),f.scheduler=a?()=>a(p,!1):p,x=d=>ll(d,!1,f),y=f.onStop=()=>{const d=mn.get(f);if(d){if(l)l(d,4);else for(const v of d)v();mn.delete(f)}},t?n?p(!0):m=f.run():a?a(p.bind(null,!0),!0):f.run(),K.pause=f.pause.bind(f),K.resume=f.resume.bind(f),K.stop=K,K}function Tt(e,t=1/0,r){if(t<=0||!Ce(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,Le(e))Tt(e.value,t,r);else if(Z(e))for(let n=0;n<e.length;n++)Tt(e[n],t,r);else if(sa(e)||_r(e))e.forEach(n=>{Tt(n,t,r)});else if(la(e)){for(const n in e)Tt(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Tt(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gr(e,t,r,n){try{return n?e(...n):e()}catch(i){Mn(i,t,r)}}function St(e,t,r,n){if(re(e)){const i=Gr(e,t,r,n);return i&&aa(i)&&i.catch(s=>{Mn(s,t,r)}),i}if(Z(e)){const i=[];for(let s=0;s<e.length;s++)i.push(St(e[s],t,r,n));return i}}function Mn(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||be;if(t){let o=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const f=o.ec;if(f){for(let h=0;h<f.length;h++)if(f[h](e,l,c)===!1)return}o=o.parent}if(s){qt(),Gr(s,null,10,[e,l,c]),Vt();return}}cl(e,r,i,n,a)}function cl(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}const qe=[];let vt=-1;const Er=[];let Lt=null,vr=0;const Oa=Promise.resolve();let yn=null;function fl(e){const t=yn||Oa;return e?t.then(this?e.bind(this):e):t}function hl(e){let t=vt+1,r=qe.length;for(;t<r;){const n=t+r>>>1,i=qe[n],s=Kr(i);s<e||s===e&&i.flags&2?t=n+1:r=n}return t}function Ii(e){if(!(e.flags&1)){const t=Kr(e),r=qe[qe.length-1];!r||!(e.flags&2)&&t>=Kr(r)?qe.push(e):qe.splice(hl(t),0,e),e.flags|=1,ka()}}function ka(){yn||(yn=Oa.then(Ba))}function pl(e){Z(e)?Er.push(...e):Lt&&e.id===-1?Lt.splice(vr+1,0,e):e.flags&1||(Er.push(e),e.flags|=1),ka()}function is(e,t,r=vt+1){for(;r<qe.length;r++){const n=qe[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;qe.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function $a(e){if(Er.length){const t=[...new Set(Er)].sort((r,n)=>Kr(r)-Kr(n));if(Er.length=0,Lt){Lt.push(...t);return}for(Lt=t,vr=0;vr<Lt.length;vr++){const r=Lt[vr];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Lt=null,vr=0}}const Kr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ba(e){try{for(vt=0;vt<qe.length;vt++){const t=qe[vt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Gr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;vt<qe.length;vt++){const t=qe[vt];t&&(t.flags&=-2)}vt=-1,qe.length=0,$a(),yn=null,(qe.length||Er.length)&&Ba()}}let ct=null,Ta=null;function vn(e){const t=ct;return ct=e,Ta=e&&e.type.__scopeId||null,t}function dl(e,t=ct,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&hs(-1);const s=vn(t);let a;try{a=e(...i)}finally{vn(s),n._d&&hs(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function tn(e,t){if(ct===null)return e;const r=Bn(ct),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,a,o,l=be]=t[i];s&&(re(s)&&(s={mounted:s,updated:s}),s.deep&&Tt(a),n.push({dir:s,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function Wt(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[n];l&&(qt(),St(l,r,8,[e.el,o,e,t]),Vt())}}const gl=Symbol("_vte"),ml=e=>e.__isTeleport;function Ri(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ri(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function yl(e,t){return re(e)?$e({name:e.name},t,{setup:e}):e}function Ia(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function li(e,t,r,n,i=!1){if(Z(e)){e.forEach((M,T)=>li(M,t&&(Z(t)?t[T]:t),r,n,i));return}if(Nr(n)&&!i)return;const s=n.shapeFlag&4?Bn(n.component):n.el,a=i?null:s,{i:o,r:l}=e,c=t&&t.r,f=o.refs===be?o.refs={}:o.refs,h=o.setupState,y=he(h),x=h===be?()=>!1:M=>pe(y,M);if(c!=null&&c!==l&&(Fe(c)?(f[c]=null,x(c)&&(h[c]=null)):Le(c)&&(c.value=null)),re(l))Gr(l,o,12,[a,f]);else{const M=Fe(l),T=Le(l);if(M||T){const q=()=>{if(e.f){const K=M?x(l)?h[l]:f[l]:l.value;i?Z(K)&&Ei(K,s):Z(K)?K.includes(s)||K.push(s):M?(f[l]=[s],x(l)&&(h[l]=f[l])):(l.value=[s],e.k&&(f[e.k]=l.value))}else M?(f[l]=a,x(l)&&(h[l]=a)):T&&(l.value=a,e.k&&(f[e.k]=a))};a?(q.id=-1,tt(q,r)):q()}}}Sn().requestIdleCallback;Sn().cancelIdleCallback;const Nr=e=>!!e.type.__asyncLoader,Ra=e=>e.type.__isKeepAlive;function vl(e,t){Na(e,"a",t)}function wl(e,t){Na(e,"da",t)}function Na(e,t,r=Ve){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(On(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Ra(i.parent.vnode)&&bl(n,t,r,i),i=i.parent}}function bl(e,t,r,n){const i=On(t,e,n,!0);Da(()=>{Ei(n[t],i)},r)}function On(e,t,r=Ve,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{qt();const o=Yr(r),l=St(t,r,e,a);return o(),Vt(),l});return n?i.unshift(s):i.push(s),s}}const Rt=e=>(t,r=Ve)=>{(!Vr||e==="sp")&&On(e,(...n)=>t(...n),r)},xl=Rt("bm"),_l=Rt("m"),Cl=Rt("bu"),El=Rt("u"),Pl=Rt("bum"),Da=Rt("um"),Sl=Rt("sp"),Al=Rt("rtg"),Fl=Rt("rtc");function Ml(e,t=Ve){On("ec",e,t)}const Ol=Symbol.for("v-ndc");function kl(e,t,r,n){let i;const s=r,a=Z(e);if(a||Fe(e)){const o=a&&Cr(e);let l=!1;o&&(l=!ft(e),e=Fn(e)),i=new Array(e.length);for(let c=0,f=e.length;c<f;c++)i[c]=t(l?De(e[c]):e[c],c,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s)}else if(Ce(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,s));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const f=o[l];i[l]=t(e[f],f,l,s)}}else i=[];return i}const ui=e=>e?so(e)?Bn(e):ui(e.parent):null,Dr=$e(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ui(e.parent),$root:e=>ui(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ni(e),$forceUpdate:e=>e.f||(e.f=()=>{Ii(e.update)}),$nextTick:e=>e.n||(e.n=fl.bind(e.proxy)),$watch:e=>Ql.bind(e)}),jn=(e,t)=>e!==be&&!e.__isScriptSetup&&pe(e,t),$l={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let c;if(t[0]!=="$"){const x=a[t];if(x!==void 0)switch(x){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(jn(n,t))return a[t]=1,n[t];if(i!==be&&pe(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&pe(c,t))return a[t]=3,s[t];if(r!==be&&pe(r,t))return a[t]=4,r[t];ci&&(a[t]=0)}}const f=Dr[t];let h,y;if(f)return t==="$attrs"&&Ne(e.attrs,"get",""),f(e);if((h=o.__cssModules)&&(h=h[t]))return h;if(r!==be&&pe(r,t))return a[t]=4,r[t];if(y=l.config.globalProperties,pe(y,t))return y[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;return jn(i,t)?(i[t]=r,!0):n!==be&&pe(n,t)?(n[t]=r,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:s}},a){let o;return!!r[a]||e!==be&&pe(e,a)||jn(t,a)||(o=s[0])&&pe(o,a)||pe(n,a)||pe(Dr,a)||pe(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:pe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function ss(e){return Z(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let ci=!0;function Bl(e){const t=Ni(e),r=e.proxy,n=e.ctx;ci=!1,t.beforeCreate&&as(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:c,created:f,beforeMount:h,mounted:y,beforeUpdate:x,updated:M,activated:T,deactivated:q,beforeDestroy:K,beforeUnmount:m,destroyed:p,unmounted:d,render:v,renderTracked:b,renderTriggered:C,errorCaptured:O,serverPrefetch:S,expose:V,inheritAttrs:W,components:se,directives:we,filters:Oe}=t;if(c&&Tl(c,n,null),a)for(const de in a){const z=a[de];re(z)&&(n[de]=z.bind(r))}if(i){const de=i.call(r,r);Ce(de)&&(e.data=$i(de))}if(ci=!0,s)for(const de in s){const z=s[de],ge=re(z)?z.bind(r,r):re(z.get)?z.get.bind(r,r):Ct,ke=!re(z)&&re(z.set)?z.set.bind(r):Ct,Be=oo({get:ge,set:ke});Object.defineProperty(n,de,{enumerable:!0,configurable:!0,get:()=>Be.value,set:le=>Be.value=le})}if(o)for(const de in o)La(o[de],n,r,de);if(l){const de=re(l)?l.call(r):l;Reflect.ownKeys(de).forEach(z=>{Hl(z,de[z])})}f&&as(f,e,"c");function Ee(de,z){Z(z)?z.forEach(ge=>de(ge.bind(r))):z&&de(z.bind(r))}if(Ee(xl,h),Ee(_l,y),Ee(Cl,x),Ee(El,M),Ee(vl,T),Ee(wl,q),Ee(Ml,O),Ee(Fl,b),Ee(Al,C),Ee(Pl,m),Ee(Da,d),Ee(Sl,S),Z(V))if(V.length){const de=e.exposed||(e.exposed={});V.forEach(z=>{Object.defineProperty(de,z,{get:()=>r[z],set:ge=>r[z]=ge})})}else e.exposed||(e.exposed={});v&&e.render===Ct&&(e.render=v),W!=null&&(e.inheritAttrs=W),se&&(e.components=se),we&&(e.directives=we),S&&Ia(e)}function Tl(e,t,r=Ct){Z(e)&&(e=fi(e));for(const n in e){const i=e[n];let s;Ce(i)?"default"in i?s=un(i.from||n,i.default,!0):s=un(i.from||n):s=un(i),Le(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[n]=s}}function as(e,t,r){St(Z(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function La(e,t,r,n){let i=n.includes(".")?Qa(r,n):()=>r[n];if(Fe(e)){const s=t[e];re(s)&&cn(i,s)}else if(re(e))cn(i,e.bind(r));else if(Ce(e))if(Z(e))e.forEach(s=>La(s,t,r,n));else{const s=re(e.handler)?e.handler.bind(r):t[e.handler];re(s)&&cn(i,s,e)}}function Ni(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(c=>wn(l,c,a,!0)),wn(l,t,a)),Ce(t)&&s.set(t,l),l}function wn(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&wn(e,s,r,!0),i&&i.forEach(a=>wn(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const o=Il[a]||r&&r[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const Il={data:os,props:ls,emits:ls,methods:$r,computed:$r,beforeCreate:Ue,created:Ue,beforeMount:Ue,mounted:Ue,beforeUpdate:Ue,updated:Ue,beforeDestroy:Ue,beforeUnmount:Ue,destroyed:Ue,unmounted:Ue,activated:Ue,deactivated:Ue,errorCaptured:Ue,serverPrefetch:Ue,components:$r,directives:$r,watch:Nl,provide:os,inject:Rl};function os(e,t){return t?e?function(){return $e(re(e)?e.call(this,this):e,re(t)?t.call(this,this):t)}:t:e}function Rl(e,t){return $r(fi(e),fi(t))}function fi(e){if(Z(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Ue(e,t){return e?[...new Set([].concat(e,t))]:t}function $r(e,t){return e?$e(Object.create(null),e,t):t}function ls(e,t){return e?Z(e)&&Z(t)?[...new Set([...e,...t])]:$e(Object.create(null),ss(e),ss(t??{})):t}function Nl(e,t){if(!e)return t;if(!t)return e;const r=$e(Object.create(null),e);for(const n in t)r[n]=Ue(e[n],t[n]);return r}function Ha(){return{app:null,config:{isNativeTag:Co,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dl=0;function Ll(e,t){return function(n,i=null){re(n)||(n=$e({},n)),i!=null&&!Ce(i)&&(i=null);const s=Ha(),a=new WeakSet,o=[];let l=!1;const c=s.app={_uid:Dl++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:wu,get config(){return s.config},set config(f){},use(f,...h){return a.has(f)||(f&&re(f.install)?(a.add(f),f.install(c,...h)):re(f)&&(a.add(f),f(c,...h))),c},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),c},component(f,h){return h?(s.components[f]=h,c):s.components[f]},directive(f,h){return h?(s.directives[f]=h,c):s.directives[f]},mount(f,h,y){if(!l){const x=c._ceVNode||Ge(n,i);return x.appContext=s,y===!0?y="svg":y===!1&&(y=void 0),h&&t?t(x,f):e(x,f,y),l=!0,c._container=f,f.__vue_app__=c,Bn(x.component)}},onUnmount(f){o.push(f)},unmount(){l&&(St(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,h){return s.provides[f]=h,c},runWithContext(f){const h=Pr;Pr=c;try{return f()}finally{Pr=h}}};return c}}let Pr=null;function Hl(e,t){if(Ve){let r=Ve.provides;const n=Ve.parent&&Ve.parent.provides;n===r&&(r=Ve.provides=Object.create(n)),r[e]=t}}function un(e,t,r=!1){const n=Ve||ct;if(n||Pr){const i=Pr?Pr._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&re(t)?t.call(n&&n.proxy):t}}const Ua={},ja=()=>Object.create(Ua),Ka=e=>Object.getPrototypeOf(e)===Ua;function Ul(e,t,r,n=!1){const i={},s=ja();e.propsDefaults=Object.create(null),qa(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:tl(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function jl(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=he(i),[l]=e.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let h=0;h<f.length;h++){let y=f[h];if(kn(e.emitsOptions,y))continue;const x=t[y];if(l)if(pe(s,y))x!==s[y]&&(s[y]=x,c=!0);else{const M=Kt(y);i[M]=hi(l,o,M,x,e,!1)}else x!==s[y]&&(s[y]=x,c=!0)}}}else{qa(e,t,i,s)&&(c=!0);let f;for(const h in o)(!t||!pe(t,h)&&((f=ur(h))===h||!pe(t,f)))&&(l?r&&(r[h]!==void 0||r[f]!==void 0)&&(i[h]=hi(l,o,h,void 0,e,!0)):delete i[h]);if(s!==o)for(const h in s)(!t||!pe(t,h))&&(delete s[h],c=!0)}c&&Bt(e.attrs,"set","")}function qa(e,t,r,n){const[i,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Tr(l))continue;const c=t[l];let f;i&&pe(i,f=Kt(l))?!s||!s.includes(f)?r[f]=c:(o||(o={}))[f]=c:kn(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(s){const l=he(r),c=o||be;for(let f=0;f<s.length;f++){const h=s[f];r[h]=hi(i,l,h,c[h],e,!pe(c,h))}}return a}function hi(e,t,r,n,i,s){const a=e[r];if(a!=null){const o=pe(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&re(l)){const{propsDefaults:c}=i;if(r in c)n=c[r];else{const f=Yr(i);n=c[r]=l.call(null,t),f()}}else n=l;i.ce&&i.ce._setProp(r,n)}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===ur(r))&&(n=!0))}return n}const Kl=new WeakMap;function Va(e,t,r=!1){const n=r?Kl:t.propsCache,i=n.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!re(e)){const f=h=>{l=!0;const[y,x]=Va(h,t,!0);$e(a,y),x&&o.push(...x)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!s&&!l)return Ce(e)&&n.set(e,xr),xr;if(Z(s))for(let f=0;f<s.length;f++){const h=Kt(s[f]);us(h)&&(a[h]=be)}else if(s)for(const f in s){const h=Kt(f);if(us(h)){const y=s[f],x=a[h]=Z(y)||re(y)?{type:y}:$e({},y),M=x.type;let T=!1,q=!0;if(Z(M))for(let K=0;K<M.length;++K){const m=M[K],p=re(m)&&m.name;if(p==="Boolean"){T=!0;break}else p==="String"&&(q=!1)}else T=re(M)&&M.name==="Boolean";x[0]=T,x[1]=q,(T||pe(x,"default"))&&o.push(h)}}const c=[a,o];return Ce(e)&&n.set(e,c),c}function us(e){return e[0]!=="$"&&!Tr(e)}const Wa=e=>e[0]==="_"||e==="$stable",Di=e=>Z(e)?e.map(xt):[xt(e)],ql=(e,t,r)=>{if(t._n)return t;const n=dl((...i)=>Di(t(...i)),r);return n._c=!1,n},za=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Wa(i))continue;const s=e[i];if(re(s))t[i]=ql(i,s,n);else if(s!=null){const a=Di(s);t[i]=()=>a}}},Ga=(e,t)=>{const r=Di(t);e.slots.default=()=>r},Ya=(e,t,r)=>{for(const n in t)(r||n!=="_")&&(e[n]=t[n])},Vl=(e,t,r)=>{const n=e.slots=ja();if(e.vnode.shapeFlag&32){const i=t._;i?(Ya(n,t,r),r&&ca(n,"_",i,!0)):za(t,n)}else t&&Ga(e,t)},Wl=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,a=be;if(n.shapeFlag&32){const o=t._;o?r&&o===1?s=!1:Ya(i,t,r):(s=!t.$stable,za(t,i)),a=t}else t&&(Ga(e,t),a={default:1});if(s)for(const o in i)!Wa(o)&&a[o]==null&&delete i[o]},tt=au;function zl(e){return Gl(e)}function Gl(e,t){const r=Sn();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:f,parentNode:h,nextSibling:y,setScopeId:x=Ct,insertStaticContent:M}=e,T=(g,w,E,$=null,F=null,k=null,D=void 0,N=null,I=!!w.dynamicChildren)=>{if(g===w)return;g&&!Or(g,w)&&($=We(g),le(g,F,k,!0),g=null),w.patchFlag===-2&&(I=!1,w.dynamicChildren=null);const{type:B,ref:Y,shapeFlag:j}=w;switch(B){case $n:q(g,w,E,$);break;case or:K(g,w,E,$);break;case Vn:g==null&&m(w,E,$,D);break;case bt:se(g,w,E,$,F,k,D,N,I);break;default:j&1?v(g,w,E,$,F,k,D,N,I):j&6?we(g,w,E,$,F,k,D,N,I):(j&64||j&128)&&B.process(g,w,E,$,F,k,D,N,I,Ze)}Y!=null&&F&&li(Y,g&&g.ref,k,w||g,!w)},q=(g,w,E,$)=>{if(g==null)n(w.el=o(w.children),E,$);else{const F=w.el=g.el;w.children!==g.children&&c(F,w.children)}},K=(g,w,E,$)=>{g==null?n(w.el=l(w.children||""),E,$):w.el=g.el},m=(g,w,E,$)=>{[g.el,g.anchor]=M(g.children,w,E,$,g.el,g.anchor)},p=({el:g,anchor:w},E,$)=>{let F;for(;g&&g!==w;)F=y(g),n(g,E,$),g=F;n(w,E,$)},d=({el:g,anchor:w})=>{let E;for(;g&&g!==w;)E=y(g),i(g),g=E;i(w)},v=(g,w,E,$,F,k,D,N,I)=>{w.type==="svg"?D="svg":w.type==="math"&&(D="mathml"),g==null?b(w,E,$,F,k,D,N,I):S(g,w,F,k,D,N,I)},b=(g,w,E,$,F,k,D,N)=>{let I,B;const{props:Y,shapeFlag:j,transition:G,dirs:Q}=g;if(I=g.el=a(g.type,k,Y&&Y.is,Y),j&8?f(I,g.children):j&16&&O(g.children,I,null,$,F,Kn(g,k),D,N),Q&&Wt(g,null,$,"created"),C(I,g,g.scopeId,D,$),Y){for(const xe in Y)xe!=="value"&&!Tr(xe)&&s(I,xe,null,Y[xe],k,$);"value"in Y&&s(I,"value",null,Y.value,k),(B=Y.onVnodeBeforeMount)&&yt(B,$,g)}Q&&Wt(g,null,$,"beforeMount");const ue=Yl(F,G);ue&&G.beforeEnter(I),n(I,w,E),((B=Y&&Y.onVnodeMounted)||ue||Q)&&tt(()=>{B&&yt(B,$,g),ue&&G.enter(I),Q&&Wt(g,null,$,"mounted")},F)},C=(g,w,E,$,F)=>{if(E&&x(g,E),$)for(let k=0;k<$.length;k++)x(g,$[k]);if(F){let k=F.subTree;if(w===k||to(k.type)&&(k.ssContent===w||k.ssFallback===w)){const D=F.vnode;C(g,D,D.scopeId,D.slotScopeIds,F.parent)}}},O=(g,w,E,$,F,k,D,N,I=0)=>{for(let B=I;B<g.length;B++){const Y=g[B]=N?Ht(g[B]):xt(g[B]);T(null,Y,w,E,$,F,k,D,N)}},S=(g,w,E,$,F,k,D)=>{const N=w.el=g.el;let{patchFlag:I,dynamicChildren:B,dirs:Y}=w;I|=g.patchFlag&16;const j=g.props||be,G=w.props||be;let Q;if(E&&zt(E,!1),(Q=G.onVnodeBeforeUpdate)&&yt(Q,E,w,g),Y&&Wt(w,g,E,"beforeUpdate"),E&&zt(E,!0),(j.innerHTML&&G.innerHTML==null||j.textContent&&G.textContent==null)&&f(N,""),B?V(g.dynamicChildren,B,N,E,$,Kn(w,F),k):D||z(g,w,N,null,E,$,Kn(w,F),k,!1),I>0){if(I&16)W(N,j,G,E,F);else if(I&2&&j.class!==G.class&&s(N,"class",null,G.class,F),I&4&&s(N,"style",j.style,G.style,F),I&8){const ue=w.dynamicProps;for(let xe=0;xe<ue.length;xe++){const me=ue[xe],Xe=j[me],Re=G[me];(Re!==Xe||me==="value")&&s(N,me,Xe,Re,F,E)}}I&1&&g.children!==w.children&&f(N,w.children)}else!D&&B==null&&W(N,j,G,E,F);((Q=G.onVnodeUpdated)||Y)&&tt(()=>{Q&&yt(Q,E,w,g),Y&&Wt(w,g,E,"updated")},$)},V=(g,w,E,$,F,k,D)=>{for(let N=0;N<w.length;N++){const I=g[N],B=w[N],Y=I.el&&(I.type===bt||!Or(I,B)||I.shapeFlag&70)?h(I.el):E;T(I,B,Y,null,$,F,k,D,!0)}},W=(g,w,E,$,F)=>{if(w!==E){if(w!==be)for(const k in w)!Tr(k)&&!(k in E)&&s(g,k,w[k],null,F,$);for(const k in E){if(Tr(k))continue;const D=E[k],N=w[k];D!==N&&k!=="value"&&s(g,k,N,D,F,$)}"value"in E&&s(g,"value",w.value,E.value,F)}},se=(g,w,E,$,F,k,D,N,I)=>{const B=w.el=g?g.el:o(""),Y=w.anchor=g?g.anchor:o("");let{patchFlag:j,dynamicChildren:G,slotScopeIds:Q}=w;Q&&(N=N?N.concat(Q):Q),g==null?(n(B,E,$),n(Y,E,$),O(w.children||[],E,Y,F,k,D,N,I)):j>0&&j&64&&G&&g.dynamicChildren?(V(g.dynamicChildren,G,E,F,k,D,N),(w.key!=null||F&&w===F.subTree)&&Ja(g,w,!0)):z(g,w,E,Y,F,k,D,N,I)},we=(g,w,E,$,F,k,D,N,I)=>{w.slotScopeIds=N,g==null?w.shapeFlag&512?F.ctx.activate(w,E,$,D,I):Oe(w,E,$,F,k,D,I):ht(g,w,I)},Oe=(g,w,E,$,F,k,D)=>{const N=g.component=pu(g,$,F);if(Ra(g)&&(N.ctx.renderer=Ze),du(N,!1,D),N.asyncDep){if(F&&F.registerDep(N,Ee,D),!g.el){const I=N.subTree=Ge(or);K(null,I,w,E)}}else Ee(N,g,w,E,F,k,D)},ht=(g,w,E)=>{const $=w.component=g.component;if(iu(g,w,E))if($.asyncDep&&!$.asyncResolved){de($,w,E);return}else $.next=w,$.update();else w.el=g.el,$.vnode=w},Ee=(g,w,E,$,F,k,D)=>{const N=()=>{if(g.isMounted){let{next:j,bu:G,u:Q,parent:ue,vnode:xe}=g;{const Qe=Za(g);if(Qe){j&&(j.el=xe.el,de(g,j,D)),Qe.asyncDep.then(()=>{g.isUnmounted||N()});return}}let me=j,Xe;zt(g,!1),j?(j.el=xe.el,de(g,j,D)):j=xe,G&&ln(G),(Xe=j.props&&j.props.onVnodeBeforeUpdate)&&yt(Xe,ue,j,xe),zt(g,!0);const Re=qn(g),dt=g.subTree;g.subTree=Re,T(dt,Re,h(dt.el),We(dt),g,F,k),j.el=Re.el,me===null&&su(g,Re.el),Q&&tt(Q,F),(Xe=j.props&&j.props.onVnodeUpdated)&&tt(()=>yt(Xe,ue,j,xe),F)}else{let j;const{el:G,props:Q}=w,{bm:ue,m:xe,parent:me,root:Xe,type:Re}=g,dt=Nr(w);if(zt(g,!1),ue&&ln(ue),!dt&&(j=Q&&Q.onVnodeBeforeMount)&&yt(j,me,w),zt(g,!0),G&&pr){const Qe=()=>{g.subTree=qn(g),pr(G,g.subTree,g,F,null)};dt&&Re.__asyncHydrate?Re.__asyncHydrate(G,g,Qe):Qe()}else{Xe.ce&&Xe.ce._injectChildStyle(Re);const Qe=g.subTree=qn(g);T(null,Qe,E,$,g,F,k),w.el=Qe.el}if(xe&&tt(xe,F),!dt&&(j=Q&&Q.onVnodeMounted)){const Qe=w;tt(()=>yt(j,me,Qe),F)}(w.shapeFlag&256||me&&Nr(me.vnode)&&me.vnode.shapeFlag&256)&&g.a&&tt(g.a,F),g.isMounted=!0,w=E=$=null}};g.scope.on();const I=g.effect=new da(N);g.scope.off();const B=g.update=I.run.bind(I),Y=g.job=I.runIfDirty.bind(I);Y.i=g,Y.id=g.uid,I.scheduler=()=>Ii(Y),zt(g,!0),B()},de=(g,w,E)=>{w.component=g;const $=g.vnode.props;g.vnode=w,g.next=null,jl(g,w.props,$,E),Wl(g,w.children,E),qt(),is(g),Vt()},z=(g,w,E,$,F,k,D,N,I=!1)=>{const B=g&&g.children,Y=g?g.shapeFlag:0,j=w.children,{patchFlag:G,shapeFlag:Q}=w;if(G>0){if(G&128){ke(B,j,E,$,F,k,D,N,I);return}else if(G&256){ge(B,j,E,$,F,k,D,N,I);return}}Q&8?(Y&16&&He(B,F,k),j!==B&&f(E,j)):Y&16?Q&16?ke(B,j,E,$,F,k,D,N,I):He(B,F,k,!0):(Y&8&&f(E,""),Q&16&&O(j,E,$,F,k,D,N,I))},ge=(g,w,E,$,F,k,D,N,I)=>{g=g||xr,w=w||xr;const B=g.length,Y=w.length,j=Math.min(B,Y);let G;for(G=0;G<j;G++){const Q=w[G]=I?Ht(w[G]):xt(w[G]);T(g[G],Q,E,null,F,k,D,N,I)}B>Y?He(g,F,k,!0,!1,j):O(w,E,$,F,k,D,N,I,j)},ke=(g,w,E,$,F,k,D,N,I)=>{let B=0;const Y=w.length;let j=g.length-1,G=Y-1;for(;B<=j&&B<=G;){const Q=g[B],ue=w[B]=I?Ht(w[B]):xt(w[B]);if(Or(Q,ue))T(Q,ue,E,null,F,k,D,N,I);else break;B++}for(;B<=j&&B<=G;){const Q=g[j],ue=w[G]=I?Ht(w[G]):xt(w[G]);if(Or(Q,ue))T(Q,ue,E,null,F,k,D,N,I);else break;j--,G--}if(B>j){if(B<=G){const Q=G+1,ue=Q<Y?w[Q].el:$;for(;B<=G;)T(null,w[B]=I?Ht(w[B]):xt(w[B]),E,ue,F,k,D,N,I),B++}}else if(B>G)for(;B<=j;)le(g[B],F,k,!0),B++;else{const Q=B,ue=B,xe=new Map;for(B=ue;B<=G;B++){const et=w[B]=I?Ht(w[B]):xt(w[B]);et.key!=null&&xe.set(et.key,B)}let me,Xe=0;const Re=G-ue+1;let dt=!1,Qe=0;const Fr=new Array(Re);for(B=0;B<Re;B++)Fr[B]=0;for(B=Q;B<=j;B++){const et=g[B];if(Xe>=Re){le(et,F,k,!0);continue}let mt;if(et.key!=null)mt=xe.get(et.key);else for(me=ue;me<=G;me++)if(Fr[me-ue]===0&&Or(et,w[me])){mt=me;break}mt===void 0?le(et,F,k,!0):(Fr[mt-ue]=B+1,mt>=Qe?Qe=mt:dt=!0,T(et,w[mt],E,null,F,k,D,N,I),Xe++)}const Xi=dt?Jl(Fr):xr;for(me=Xi.length-1,B=Re-1;B>=0;B--){const et=ue+B,mt=w[et],Qi=et+1<Y?w[et+1].el:$;Fr[B]===0?T(null,mt,E,Qi,F,k,D,N,I):dt&&(me<0||B!==Xi[me]?Be(mt,E,Qi,2):me--)}}},Be=(g,w,E,$,F=null)=>{const{el:k,type:D,transition:N,children:I,shapeFlag:B}=g;if(B&6){Be(g.component.subTree,w,E,$);return}if(B&128){g.suspense.move(w,E,$);return}if(B&64){D.move(g,w,E,Ze);return}if(D===bt){n(k,w,E);for(let j=0;j<I.length;j++)Be(I[j],w,E,$);n(g.anchor,w,E);return}if(D===Vn){p(g,w,E);return}if($!==2&&B&1&&N)if($===0)N.beforeEnter(k),n(k,w,E),tt(()=>N.enter(k),F);else{const{leave:j,delayLeave:G,afterLeave:Q}=N,ue=()=>n(k,w,E),xe=()=>{j(k,()=>{ue(),Q&&Q()})};G?G(k,ue,xe):xe()}else n(k,w,E)},le=(g,w,E,$=!1,F=!1)=>{const{type:k,props:D,ref:N,children:I,dynamicChildren:B,shapeFlag:Y,patchFlag:j,dirs:G,cacheIndex:Q}=g;if(j===-2&&(F=!1),N!=null&&li(N,null,E,g,!0),Q!=null&&(w.renderCache[Q]=void 0),Y&256){w.ctx.deactivate(g);return}const ue=Y&1&&G,xe=!Nr(g);let me;if(xe&&(me=D&&D.onVnodeBeforeUnmount)&&yt(me,w,g),Y&6)Je(g.component,E,$);else{if(Y&128){g.suspense.unmount(E,$);return}ue&&Wt(g,null,w,"beforeUnmount"),Y&64?g.type.remove(g,w,E,Ze,$):B&&!B.hasOnce&&(k!==bt||j>0&&j&64)?He(B,w,E,!1,!0):(k===bt&&j&384||!F&&Y&16)&&He(I,w,E),$&&hr(g)}(xe&&(me=D&&D.onVnodeUnmounted)||ue)&&tt(()=>{me&&yt(me,w,g),ue&&Wt(g,null,w,"unmounted")},E)},hr=g=>{const{type:w,el:E,anchor:$,transition:F}=g;if(w===bt){Me(E,$);return}if(w===Vn){d(g);return}const k=()=>{i(E),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(g.shapeFlag&1&&F&&!F.persisted){const{leave:D,delayLeave:N}=F,I=()=>D(E,k);N?N(g.el,k,I):I()}else k()},Me=(g,w)=>{let E;for(;g!==w;)E=y(g),i(g),g=E;i(w)},Je=(g,w,E)=>{const{bum:$,scope:F,job:k,subTree:D,um:N,m:I,a:B}=g;cs(I),cs(B),$&&ln($),F.stop(),k&&(k.flags|=8,le(D,g,w,E)),N&&tt(N,w),tt(()=>{g.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},He=(g,w,E,$=!1,F=!1,k=0)=>{for(let D=k;D<g.length;D++)le(g[D],w,E,$,F)},We=g=>{if(g.shapeFlag&6)return We(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const w=y(g.anchor||g.el),E=w&&w[gl];return E?y(E):w};let pt=!1;const Nt=(g,w,E)=>{g==null?w._vnode&&le(w._vnode,null,null,!0):T(w._vnode||null,g,w,null,null,null,E),w._vnode=g,pt||(pt=!0,is(),$a(),pt=!1)},Ze={p:T,um:le,m:Be,r:hr,mt:Oe,mc:O,pc:z,pbc:V,n:We,o:e};let at,pr;return{render:Nt,hydrate:at,createApp:Ll(Nt,at)}}function Kn({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function zt({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Yl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ja(e,t,r=!1){const n=e.children,i=t.children;if(Z(n)&&Z(i))for(let s=0;s<n.length;s++){const a=n[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=Ht(i[s]),o.el=a.el),!r&&o.patchFlag!==-2&&Ja(a,o)),o.type===$n&&(o.el=a.el)}}function Jl(e){const t=e.slice(),r=[0];let n,i,s,a,o;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=r[r.length-1],e[i]<c){t[n]=i,r.push(n);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,e[r[o]]<c?s=o+1:a=o;c<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}function Za(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Za(t)}function cs(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Zl=Symbol.for("v-scx"),Xl=()=>un(Zl);function cn(e,t,r){return Xa(e,t,r)}function Xa(e,t,r=be){const{immediate:n,deep:i,flush:s,once:a}=r,o=$e({},r),l=t&&n||!t&&s!=="post";let c;if(Vr){if(s==="sync"){const x=Xl();c=x.__watcherHandles||(x.__watcherHandles=[])}else if(!l){const x=()=>{};return x.stop=Ct,x.resume=Ct,x.pause=Ct,x}}const f=Ve;o.call=(x,M,T)=>St(x,f,M,T);let h=!1;s==="post"?o.scheduler=x=>{tt(x,f&&f.suspense)}:s!=="sync"&&(h=!0,o.scheduler=(x,M)=>{M?x():Ii(x)}),o.augmentJob=x=>{t&&(x.flags|=4),h&&(x.flags|=2,f&&(x.id=f.uid,x.i=f))};const y=ul(e,t,o);return Vr&&(c?c.push(y):l&&y()),y}function Ql(e,t,r){const n=this.proxy,i=Fe(e)?e.includes(".")?Qa(n,e):()=>n[e]:e.bind(n,n);let s;re(t)?s=t:(s=t.handler,r=t);const a=Yr(this),o=Xa(i,s.bind(n),r);return a(),o}function Qa(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const eu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Kt(t)}Modifiers`]||e[`${ur(t)}Modifiers`];function tu(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||be;let i=r;const s=t.startsWith("update:"),a=s&&eu(n,t.slice(7));a&&(a.trim&&(i=r.map(f=>Fe(f)?f.trim():f)),a.number&&(i=r.map(ri)));let o,l=n[o=Nn(t)]||n[o=Nn(Kt(t))];!l&&s&&(l=n[o=Nn(ur(t))]),l&&St(l,e,6,i);const c=n[o+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,St(c,e,6,i)}}function eo(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let a={},o=!1;if(!re(e)){const l=c=>{const f=eo(c,t,!0);f&&(o=!0,$e(a,f))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Ce(e)&&n.set(e,null),null):(Z(s)?s.forEach(l=>a[l]=null):$e(a,s),Ce(e)&&n.set(e,a),a)}function kn(e,t){return!e||!En(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,ur(t))||pe(e,t))}function qn(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:f,props:h,data:y,setupState:x,ctx:M,inheritAttrs:T}=e,q=vn(e);let K,m;try{if(r.shapeFlag&4){const d=i||n,v=d;K=xt(c.call(v,d,f,h,x,y,M)),m=o}else{const d=t;K=xt(d.length>1?d(h,{attrs:o,slots:a,emit:l}):d(h,null)),m=t.props?o:ru(o)}}catch(d){Lr.length=0,Mn(d,e,1),K=Ge(or)}let p=K;if(m&&T!==!1){const d=Object.keys(m),{shapeFlag:v}=p;d.length&&v&7&&(s&&d.some(Ci)&&(m=nu(m,s)),p=Ar(p,m,!1,!0))}return r.dirs&&(p=Ar(p,null,!1,!0),p.dirs=p.dirs?p.dirs.concat(r.dirs):r.dirs),r.transition&&Ri(p,r.transition),K=p,vn(q),K}const ru=e=>{let t;for(const r in e)(r==="class"||r==="style"||En(r))&&((t||(t={}))[r]=e[r]);return t},nu=(e,t)=>{const r={};for(const n in e)(!Ci(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function iu(e,t,r){const{props:n,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?fs(n,a,c):!!a;if(l&8){const f=t.dynamicProps;for(let h=0;h<f.length;h++){const y=f[h];if(a[y]!==n[y]&&!kn(c,y))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?fs(n,a,c):!0:!!a;return!1}function fs(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!kn(r,s))return!0}return!1}function su({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const to=e=>e.__isSuspense;function au(e,t){t&&t.pendingBranch?Z(e)?t.effects.push(...e):t.effects.push(e):pl(e)}const bt=Symbol.for("v-fgt"),$n=Symbol.for("v-txt"),or=Symbol.for("v-cmt"),Vn=Symbol.for("v-stc"),Lr=[];let nt=null;function Ot(e=!1){Lr.push(nt=e?null:[])}function ou(){Lr.pop(),nt=Lr[Lr.length-1]||null}let qr=1;function hs(e){qr+=e,e<0&&nt&&(nt.hasOnce=!0)}function ro(e){return e.dynamicChildren=qr>0?nt||xr:null,ou(),qr>0&&nt&&nt.push(e),e}function Zt(e,t,r,n,i,s){return ro(ne(e,t,r,n,i,s,!0))}function no(e,t,r,n,i){return ro(Ge(e,t,r,n,i,!0))}function bn(e){return e?e.__v_isVNode===!0:!1}function Or(e,t){return e.type===t.type&&e.key===t.key}const io=({key:e})=>e??null,fn=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Fe(e)||Le(e)||re(e)?{i:ct,r:e,k:t,f:!!r}:e:null);function ne(e,t=null,r=null,n=0,i=null,s=e===bt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&io(t),ref:t&&fn(t),scopeId:Ta,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ct};return o?(Li(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Fe(r)?8:16),qr>0&&!a&&nt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&nt.push(l),l}const Ge=lu;function lu(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===Ol)&&(e=or),bn(e)){const o=Ar(e,t,!0);return r&&Li(o,r),qr>0&&!s&&nt&&(o.shapeFlag&6?nt[nt.indexOf(e)]=o:nt.push(o)),o.patchFlag=-2,o}if(vu(e)&&(e=e.__vccOpts),t){t=uu(t);let{class:o,style:l}=t;o&&!Fe(o)&&(t.class=An(o)),Ce(l)&&(Ti(l)&&!Z(l)&&(l=$e({},l)),t.style=Si(l))}const a=Fe(e)?1:to(e)?128:ml(e)?64:Ce(e)?4:re(e)?2:0;return ne(e,t,r,n,i,a,s,!0)}function uu(e){return e?Ti(e)||Ka(e)?$e({},e):e:null}function Ar(e,t,r=!1,n=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:l}=e,c=t?cu(i||{},t):i,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&io(c),ref:t&&t.ref?r&&s?Z(s)?s.concat(fn(t)):[s,fn(t)]:fn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==bt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ar(e.ssContent),ssFallback:e.ssFallback&&Ar(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Ri(f,l.clone(f)),f}function tr(e=" ",t=0){return Ge($n,null,e,t)}function ps(e="",t=!1){return t?(Ot(),no(or,null,e)):Ge(or,null,e)}function xt(e){return e==null||typeof e=="boolean"?Ge(or):Z(e)?Ge(bt,null,e.slice()):bn(e)?Ht(e):Ge($n,null,String(e))}function Ht(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ar(e)}function Li(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Z(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Li(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!Ka(t)?t._ctx=ct:i===3&&ct&&(ct.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else re(t)?(t={default:t,_ctx:ct},r=32):(t=String(t),n&64?(r=16,t=[tr(t)]):r=8);e.children=t,e.shapeFlag|=r}function cu(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=An([t.class,n.class]));else if(i==="style")t.style=Si([t.style,n.style]);else if(En(i)){const s=t[i],a=n[i];a&&s!==a&&!(Z(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=n[i])}return t}function yt(e,t,r,n=null){St(e,t,7,[r,n])}const fu=Ha();let hu=0;function pu(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||fu,s={uid:hu++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Io(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Va(n,i),emitsOptions:eo(n,i),emit:null,emitted:null,propsDefaults:be,inheritAttrs:n.inheritAttrs,ctx:be,data:be,props:be,attrs:be,slots:be,refs:be,setupState:be,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=tu.bind(null,s),e.ce&&e.ce(s),s}let Ve=null,xn,pi;{const e=Sn(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};xn=t("__VUE_INSTANCE_SETTERS__",r=>Ve=r),pi=t("__VUE_SSR_SETTERS__",r=>Vr=r)}const Yr=e=>{const t=Ve;return xn(e),e.scope.on(),()=>{e.scope.off(),xn(t)}},ds=()=>{Ve&&Ve.scope.off(),xn(null)};function so(e){return e.vnode.shapeFlag&4}let Vr=!1;function du(e,t=!1,r=!1){t&&pi(t);const{props:n,children:i}=e.vnode,s=so(e);Ul(e,n,s,t),Vl(e,i,r);const a=s?gu(e,t):void 0;return t&&pi(!1),a}function gu(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,$l);const{setup:n}=r;if(n){qt();const i=e.setupContext=n.length>1?yu(e):null,s=Yr(e),a=Gr(n,e,0,[e.props,i]),o=aa(a);if(Vt(),s(),(o||e.sp)&&!Nr(e)&&Ia(e),o){if(a.then(ds,ds),t)return a.then(l=>{gs(e,l,t)}).catch(l=>{Mn(l,e,0)});e.asyncDep=a}else gs(e,a,t)}else ao(e,t)}function gs(e,t,r){re(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=Ma(t)),ao(e,r)}let ms;function ao(e,t,r){const n=e.type;if(!e.render){if(!t&&ms&&!n.render){const i=n.template||Ni(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=n,c=$e($e({isCustomElement:s,delimiters:o},a),l);n.render=ms(i,c)}}e.render=n.render||Ct}{const i=Yr(e);qt();try{Bl(e)}finally{Vt(),i()}}}const mu={get(e,t){return Ne(e,"get",""),e[t]}};function yu(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,mu),slots:e.slots,emit:e.emit,expose:t}}function Bn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ma(rl(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Dr)return Dr[r](e)},has(t,r){return r in t||r in Dr}})):e.proxy}function vu(e){return re(e)&&"__vccOpts"in e}const oo=(e,t)=>ol(e,t,Vr);function Gt(e,t,r){const n=arguments.length;return n===2?Ce(t)&&!Z(t)?bn(t)?Ge(e,null,[t]):Ge(e,t):Ge(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&bn(r)&&(r=[r]),Ge(e,t,r))}const wu="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let di;const ys=typeof window<"u"&&window.trustedTypes;if(ys)try{di=ys.createPolicy("vue",{createHTML:e=>e})}catch{}const lo=di?e=>di.createHTML(e):e=>e,bu="http://www.w3.org/2000/svg",xu="http://www.w3.org/1998/Math/MathML",kt=typeof document<"u"?document:null,vs=kt&&kt.createElement("template"),_u={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?kt.createElementNS(bu,e):t==="mathml"?kt.createElementNS(xu,e):r?kt.createElement(e,{is:r}):kt.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>kt.createTextNode(e),createComment:e=>kt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>kt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,s){const a=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{vs.innerHTML=lo(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const o=vs.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Cu=Symbol("_vtc");function Eu(e,t,r){const n=e[Cu];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const ws=Symbol("_vod"),Pu=Symbol("_vsh"),Su=Symbol(""),Au=/(^|;)\s*display\s*:/;function Fu(e,t,r){const n=e.style,i=Fe(r);let s=!1;if(r&&!i){if(t)if(Fe(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&hn(n,o,"")}else for(const a in t)r[a]==null&&hn(n,a,"");for(const a in r)a==="display"&&(s=!0),hn(n,a,r[a])}else if(i){if(t!==r){const a=n[Su];a&&(r+=";"+a),n.cssText=r,s=Au.test(r)}}else t&&e.removeAttribute("style");ws in e&&(e[ws]=s?n.display:"",e[Pu]&&(n.display="none"))}const bs=/\s*!important$/;function hn(e,t,r){if(Z(r))r.forEach(n=>hn(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Mu(e,t);bs.test(r)?e.setProperty(ur(n),r.replace(bs,""),"important"):e[n]=r}}const xs=["Webkit","Moz","ms"],Wn={};function Mu(e,t){const r=Wn[t];if(r)return r;let n=Kt(t);if(n!=="filter"&&n in e)return Wn[t]=n;n=ua(n);for(let i=0;i<xs.length;i++){const s=xs[i]+n;if(s in e)return Wn[t]=s}return t}const _s="http://www.w3.org/1999/xlink";function Cs(e,t,r,n,i,s=Bo(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(_s,t.slice(6,t.length)):e.setAttributeNS(_s,t,r):r==null||s&&!fa(r)?e.removeAttribute(t):e.setAttribute(t,s?"":Pt(r)?String(r):r)}function Es(e,t,r,n,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?lo(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let a=!1;if(r===""||r==null){const o=typeof e[t];o==="boolean"?r=fa(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(i||t)}function Qt(e,t,r,n){e.addEventListener(t,r,n)}function Ou(e,t,r,n){e.removeEventListener(t,r,n)}const Ps=Symbol("_vei");function ku(e,t,r,n,i=null){const s=e[Ps]||(e[Ps]={}),a=s[t];if(n&&a)a.value=n;else{const[o,l]=$u(t);if(n){const c=s[t]=Iu(n,i);Qt(e,o,c,l)}else a&&(Ou(e,o,a,l),s[t]=void 0)}}const Ss=/(?:Once|Passive|Capture)$/;function $u(e){let t;if(Ss.test(e)){t={};let n;for(;n=e.match(Ss);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ur(e.slice(2)),t]}let zn=0;const Bu=Promise.resolve(),Tu=()=>zn||(Bu.then(()=>zn=0),zn=Date.now());function Iu(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;St(Ru(n,r.value),t,5,[n])};return r.value=e,r.attached=Tu(),r}function Ru(e,t){if(Z(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const As=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Nu=(e,t,r,n,i,s)=>{const a=i==="svg";t==="class"?Eu(e,n,a):t==="style"?Fu(e,r,n):En(t)?Ci(t)||ku(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Du(e,t,n,a))?(Es(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Cs(e,t,n,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Fe(n))?Es(e,Kt(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Cs(e,t,n,a))};function Du(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&As(t)&&re(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return As(t)&&Fe(r)?!1:t in e}const _n=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Z(t)?r=>ln(t,r):t};function Lu(e){e.target.composing=!0}function Fs(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Sr=Symbol("_assign"),Ms={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Sr]=_n(i);const s=n||i.props&&i.props.type==="number";Qt(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;r&&(o=o.trim()),s&&(o=ri(o)),e[Sr](o)}),r&&Qt(e,"change",()=>{e.value=e.value.trim()}),t||(Qt(e,"compositionstart",Lu),Qt(e,"compositionend",Fs),Qt(e,"change",Fs))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:i,number:s}},a){if(e[Sr]=_n(a),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?ri(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||i&&e.value.trim()===l)||(e.value=l))}},Os={created(e,{value:t},r){e.checked=gn(t,r.props.value),e[Sr]=_n(r),Qt(e,"change",()=>{e[Sr](Hu(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e[Sr]=_n(n),t!==r&&(e.checked=gn(t,n.props.value))}};function Hu(e){return"_value"in e?e._value:e.value}const Uu=$e({patchProp:Nu},_u);let ks;function ju(){return ks||(ks=zl(Uu))}const Ku=(...e)=>{const t=ju().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=Vu(n);if(!i)return;const s=t._component;!re(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=r(i,!1,qu(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function qu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Vu(e){return Fe(e)?document.querySelector(e):e}function X(e,t,r){let n=r.value;return{configurable:!0,get(){const i=n.bind(this);return Object.defineProperty(this,t,{configurable:!0,writable:!0,value:i}),i},set(i){n=i}}}class It extends Error{name="AiScript";info;pos;constructor(t,r){super(t),this.info=r,Error.captureStackTrace&&Error.captureStackTrace(this,It)}}class $s extends It{name="Internal";constructor(t){const r=String(t?.message??t);super(r,t)}}class te extends It{pos;name="Syntax";constructor(t,r,n){super(`${t} (Line ${r.line}, Column ${r.column})`,n),this.pos=r}}class Ke extends te{constructor(t,r){super("unexpected EOF",t,r)}}class gr extends It{pos;name="Namespace";constructor(t,r,n){super(`${t} (Line ${r.line}, Column ${r.column})`,n),this.pos=r}}class J extends It{name="Runtime";constructor(t,r){super(t,r)}}class gi extends J{constructor(t,r){super(t,r)}}class Wu extends J{name="";constructor(t,r){super(t,r)}}class Gn extends It{name="Host";constructor(t,r){super(t,r)}}const zu=["def","return","each","for","loop","break","continue","assign","addAssign","subAssign"];function Bs(e){return zu.includes(e.type)}function mi(e){switch(e.type){case"arr":return e.value.map(t=>mi(t));case"bool":return e.value;case"null":return null;case"num":return e.value;case"obj":{const t={};for(const[r,n]of e.value.entries())t[r]=mi(n);return t}case"str":return e.value;default:return}}var Ft=function(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};class Ye{parent;layerdStates;name;opts={};nsName;constructor(t=[],r,n,i){this.layerdStates=t,this.parent=r,this.name=n||(t.length===1?"<root>":"<anonymous>"),this.nsName=i}log(t,r){this.parent?this.parent.log(t,r):this.opts.log&&this.opts.log(t,r)}onUpdated(t,r){this.parent?this.parent.onUpdated(t,r):this.opts.onUpdated&&this.opts.onUpdated(t,r)}createChildScope(t=new Map,r){const n=[t,...this.layerdStates];return new Ye(n,this,r)}createChildNamespaceScope(t,r=new Map,n){const i=[r,...this.layerdStates];return new Ye(i,this,n,t)}get(t){for(const r of this.layerdStates)if(r.has(t)){const n=r.get(t).value;return this.log("read",{var:t,val:n}),n}throw new J(`No such variable '${t}' in scope '${this.name}'`,{scope:this.layerdStates})}getNsPrefix(){return this.parent==null||this.nsName==null?"":this.parent.getNsPrefix()+this.nsName+":"}exists(t){for(const r of this.layerdStates)if(r.has(t))return this.log("exists",{var:t}),!0;return this.log("not exists",{var:t}),!1}getAll(){const t=this.layerdStates.reduce((r,n)=>[...r,...n],[]);return new Map(t)}add(t,r){this.log("add",{var:t,val:r});const n=this.layerdStates[0];if(n.has(t))throw new J(`Variable '${t}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(t,r),this.parent==null?this.onUpdated(t,r.value):this.nsName!=null&&this.parent.add(this.nsName+":"+t,r)}assign(t,r){let n=1;for(const i of this.layerdStates){if(i.has(t)){const s=i.get(t);if(!s.isMutable)throw new J(`Cannot assign to an immutable variable ${t}.`);s.value=r,this.log("assign",{var:t,val:r}),n===this.layerdStates.length&&this.onUpdated(t,r);return}n++}throw new J(`No such variable '${t}' in scope '${this.name}'`,{scope:this.layerdStates})}}Ft([X],Ye.prototype,"log",null);Ft([X],Ye.prototype,"onUpdated",null);Ft([X],Ye.prototype,"createChildScope",null);Ft([X],Ye.prototype,"createChildNamespaceScope",null);Ft([X],Ye.prototype,"get",null);Ft([X],Ye.prototype,"getNsPrefix",null);Ft([X],Ye.prototype,"exists",null);Ft([X],Ye.prototype,"getAll",null);Ft([X],Ye.prototype,"add",null);Ft([X],Ye.prototype,"assign",null);const Te=[];for(let e=0;e<256;++e)Te.push((e+256).toString(16).slice(1));function Gu(e,t=0){return(Te[e[t+0]]+Te[e[t+1]]+Te[e[t+2]]+Te[e[t+3]]+"-"+Te[e[t+4]]+Te[e[t+5]]+"-"+Te[e[t+6]]+Te[e[t+7]]+"-"+Te[e[t+8]]+Te[e[t+9]]+"-"+Te[e[t+10]]+Te[e[t+11]]+Te[e[t+12]]+Te[e[t+13]]+Te[e[t+14]]+Te[e[t+15]]).toLowerCase()}let Yn;const Yu=new Uint8Array(16);function Ju(){if(!Yn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yn=crypto.getRandomValues.bind(crypto)}return Yn(Yu)}const Zu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ts={randomUUID:Zu};function Xu(e,t,r){if(Ts.randomUUID&&!t&&!e)return Ts.randomUUID();e=e||{};const n=e.random??e.rng?.()??Ju();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Gu(n)}const H={type:"null"},Se={type:"bool",value:!0},Ae={type:"bool",value:!1},A=e=>({type:"num",value:e}),ie=e=>({type:"str",value:e}),_t=e=>({type:"bool",value:e}),ir=e=>({type:"obj",value:e}),fe=e=>({type:"arr",value:e}),Is=(e,t,r)=>({type:"fn",params:e,statements:t,scope:r}),_=(e,t)=>({type:"fn",native:e,nativeSync:t}),pn=(e,t)=>({type:"error",value:e,info:t});function Ie(e){if(e==null)throw new J("Expect anything, but got nothing.")}function ve(e){if(e==null)throw new J("Expect boolean, but got nothing.");if(e.type!=="bool")throw new J(`Expect boolean, but got ${e.type}.`)}function Pe(e){if(e==null)throw new J("Expect function, but got nothing.");if(e.type!=="fn")throw new J(`Expect function, but got ${e.type}.`)}function ce(e){if(e==null)throw new J("Expect string, but got nothing.");if(e.type!=="str")throw new J(`Expect string, but got ${e.type}.`)}function P(e){if(e==null)throw new J("Expect number, but got nothing.");if(e.type!=="num")throw new J(`Expect number, but got ${e.type}.`)}function je(e){if(e==null)throw new J("Expect object, but got nothing.");if(e.type!=="obj")throw new J(`Expect object, but got ${e.type}.`)}function it(e){if(e==null)throw new J("Expect array, but got nothing.");if(e.type!=="arr")throw new J(`Expect array, but got ${e.type}.`)}function rn(e){return e.type==="fn"}function mr(e){return e.type==="obj"}function rr(e){return e.type==="arr"}function sr(e,t){return e.type==="fn"&&t.type==="fn"?e.native&&t.native?e.native===t.native:e===t:e.type==="fn"||t.type==="fn"?!1:e.type==="null"&&t.type==="null"?!0:e.type==="null"||t.type==="null"?!1:e.value===t.value}function yi(e,t=!1){if(t){if(e.type==="num")return e.value.toString();if(e.type==="bool")return e.value?"true":"false";if(e.type==="str")return`"${e.value}"`;if(e.type==="arr")return`[${e.value.map(n=>yi(n,!0)).join(", ")}]`;if(e.type==="null")return"(null)"}const r=e.type==="num"||e.type==="bool"?e.value:e.type==="str"?`"${e.value}"`:e.type==="fn"||e.type==="obj"?"...":e.type==="null"?"":null;return`${e.type}<${r}>`}function vi(e){switch(e.type){case"fn":return"<function>";case"arr":return e.value.map(t=>vi(t));case"bool":return e.value;case"null":return null;case"num":return e.value;case"obj":{const t={};for(const[r,n]of e.value.entries())t[r]=vi(n);return t}case"str":return e.value;default:throw new Error(`Unrecognized value type: ${e.type}`)}}function wi(e){if(e===null)return H;if(typeof e=="boolean")return _t(e);if(typeof e=="string")return ie(e);if(typeof e=="number")return A(e);if(Array.isArray(e))return fe(e.map(t=>wi(t)));if(typeof e=="object"){const t=new Map;for(const[r,n]of Object.entries(e))t.set(r,wi(n));return ir(t)}return H}function $t(e,t=!1,r=new Set){if((e.type==="arr"||e.type==="obj")&&r.has(e.value))return"...";if(t&&e.type==="str")return'"'+e.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(e.type==="str")return e.value;if(e.type==="num")return e.value.toString();if(e.type==="arr"){r.add(e.value);const n=[];for(const i of e.value)n.push($t(i,!0,r));return"[ "+n.join(", ")+" ]"}if(e.type==="obj"){r.add(e.value);const n=[];for(const[i,s]of e.value)n.push(`${i}: ${$t(s,!0,r)}`);return"{ "+n.join(", ")+" }"}return e.type==="bool"?e.value.toString():e.type==="null"?"null":e.type==="fn"?e.native?"@( ?? ) { native code }":`@( ${e.params.map(n=>n.dest.type==="identifier"?n.dest.name:"?").join(", ")} ) { ... }`:"?"}const Qu={version:"1.2.0"},uo=Qu.version,co=new TextEncoder,ec=new TextDecoder,er=Math.ceil(Math.log2(Number.MAX_SAFE_INTEGER));BigInt(er);const tc=er-1;BigInt(tc);class Hi{generateNumber0To1(){let t=this.generateBigUintByBits(er),r=1022,n=er-Rs(t);for(;n>0&&r>=er;)r-=n,t<<=BigInt(n),t|=this.generateBigUintByBits(n),n=er-Rs(t);if(n>0){const i=Math.min(r-1,n);t<<=BigInt(i),t|=this.generateBigUintByBits(i),r=Math.max(r-i,0)}return Number(t)*.5**er*.5**(1022-r)}generateUniform(t){if(t<1)return 0n;const r=t.toString(2).length,n=Math.ceil(r/8),i=BigInt(n*8-r);let s;do s=this.generateBigUintByBytes(n)>>i;while(s>t);return s}generateRandomIntegerInRange(t,r){const n=Math.ceil(t),i=Math.floor(r),s=i-n;if(s===0)return n;const a=Math.abs(s),o=Math.sign(s);if(!Number.isSafeInteger(a)||!Number.isSafeInteger(n)||!Number.isSafeInteger(i))return null;const l=BigInt(a);return Number(this.generateUniform(l))*o+n}}function Rs(e){return e===0n?0:e.toString(2).length}function rc(e){if(e.byteLength===0)return null;if(e.byteLength<8){const t=new Uint8Array(8);return t.set(new Uint8Array(e)),new DataView(t.buffer).getBigUint64(0,!0)}return new DataView(e).getBigUint64(0,!0)}function Ui(e){if(e.byteLength===0)return null;if(e.byteLength<=8)return rc(e);const t=new DataView(e);let r=0n,n=0n,i=0;for(;i<t.byteLength-7;i+=8,r+=64n){const s=t.getBigUint64(i,!0);n|=s<<r}if(i<t.byteLength){const s=new Uint8Array(8);s.set(new Uint8Array(e,i)),n|=new DataView(s.buffer).getBigUint64(0,!0)<<r}return n}class Wr extends Hi{static _instance=new Wr;static get instance(){return Wr._instance}constructor(){super()}generateBigUintByBytes(t){let r=new Uint8Array(Math.ceil(t/8)*8);return r.length<1||!Number.isSafeInteger(t)?0n:(r=this.generateBytes(r.subarray(0,t)),Ui(r.buffer)??0n)}generateBigUintByBits(t){if(t<1||!Number.isSafeInteger(t))return 0n;const r=Math.ceil(t/8),n=BigInt(r*8-t);return this.generateBigUintByBytes(r)>>n}generateBytes(t){return crypto.getRandomValues(t)}}var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ic(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var ji={exports:{}};ji.exports;(function(e){(function(t,r,n){function i(l){var c=this,f=o();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(l),c.s0<0&&(c.s0+=1),c.s1-=f(l),c.s1<0&&(c.s1+=1),c.s2-=f(l),c.s2<0&&(c.s2+=1),f=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var f=new i(l),h=c&&c.state,y=f.next;return y.int32=function(){return f.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,h&&(typeof h=="object"&&s(h,f),y.state=function(){return s(f,{})}),y}function o(){var l=4022871197,c=function(f){f=String(f);for(var h=0;h<f.length;h++){l+=f.charCodeAt(h);var y=.02519603282416938*l;l=y>>>0,y-=l,y*=l,l=y>>>0,y-=l,l+=y*4294967296}return(l>>>0)*23283064365386963e-26};return c}r&&r.exports?r.exports=a:this.alea=a})(st,e)})(ji);var sc=ji.exports,Ki={exports:{}};Ki.exports;(function(e){(function(t,r,n){function i(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var y=c.next()>>>11,x=(c.next()>>>0)/4294967296,M=(y+x)/(1<<21);while(M===0);return M},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&s(f,c),h.state=function(){return s(c,{})}),h}r&&r.exports?r.exports=a:this.xor128=a})(st,e)})(Ki);var ac=Ki.exports,qi={exports:{}};qi.exports;(function(e){(function(t,r,n){function i(o){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,f==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var y=c.next()>>>11,x=(c.next()>>>0)/4294967296,M=(y+x)/(1<<21);while(M===0);return M},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&s(f,c),h.state=function(){return s(c,{})}),h}r&&r.exports?r.exports=a:this.xorwow=a})(st,e)})(qi);var oc=qi.exports,Vi={exports:{}};Vi.exports;(function(e){(function(t,r,n){function i(o){var l=this;l.next=function(){var f=l.x,h=l.i,y,x;return y=f[h],y^=y>>>7,x=y^y<<24,y=f[h+1&7],x^=y^y>>>10,y=f[h+3&7],x^=y^y>>>3,y=f[h+4&7],x^=y^y<<7,y=f[h+7&7],y=y^y<<13,x^=y^y<<9,f[h]=x,l.i=h+1&7,x};function c(f,h){var y,x=[];if(h===(h|0))x[0]=h;else for(h=""+h,y=0;y<h.length;++y)x[y&7]=x[y&7]<<15^h.charCodeAt(y)+x[y+1&7]<<13;for(;x.length<8;)x.push(0);for(y=0;y<8&&x[y]===0;++y);for(y==8?x[7]=-1:x[y],f.x=x,f.i=0,y=256;y>0;--y)f.next()}c(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var y=c.next()>>>11,x=(c.next()>>>0)/4294967296,M=(y+x)/(1<<21);while(M===0);return M},h.int32=c.next,h.quick=h,f&&(f.x&&s(f,c),h.state=function(){return s(c,{})}),h}r&&r.exports?r.exports=a:this.xorshift7=a})(st,e)})(Vi);var lc=Vi.exports,Wi={exports:{}};Wi.exports;(function(e){(function(t,r,n){function i(o){var l=this;l.next=function(){var f=l.w,h=l.X,y=l.i,x,M;return l.w=f=f+1640531527|0,M=h[y+34&127],x=h[y=y+1&127],M^=M<<13,x^=x<<17,M^=M>>>15,x^=x>>>12,M=h[y]=M^x,l.i=y,M+(f^f>>>16)|0};function c(f,h){var y,x,M,T,q,K=[],m=128;for(h===(h|0)?(x=h,h=null):(h=h+"\0",x=0,m=Math.max(m,h.length)),M=0,T=-32;T<m;++T)h&&(x^=h.charCodeAt((T+32)%h.length)),T===0&&(q=x),x^=x<<10,x^=x>>>15,x^=x<<4,x^=x>>>13,T>=0&&(q=q+1640531527|0,y=K[T&127]^=x+q,M=y==0?M+1:0);for(M>=128&&(K[(h&&h.length||0)&127]=-1),M=127,T=4*128;T>0;--T)x=K[M+34&127],y=K[M=M+1&127],x^=x<<13,y^=y<<17,x^=x>>>15,y^=y>>>12,K[M]=x^y;f.w=q,f.X=K,f.i=M}c(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var y=c.next()>>>11,x=(c.next()>>>0)/4294967296,M=(y+x)/(1<<21);while(M===0);return M},h.int32=c.next,h.quick=h,f&&(f.X&&s(f,c),h.state=function(){return s(c,{})}),h}r&&r.exports?r.exports=a:this.xor4096=a})(st,e)})(Wi);var uc=Wi.exports,zi={exports:{}};zi.exports;(function(e){(function(t,r,n){function i(o){var l=this,c="";l.next=function(){var h=l.b,y=l.c,x=l.d,M=l.a;return h=h<<25^h>>>7^y,y=y-x|0,x=x<<24^x>>>8^M,M=M-h|0,l.b=h=h<<20^h>>>12^y,l.c=y=y-x|0,l.d=x<<16^y>>>16^M,l.a=M-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var f=0;f<c.length+20;f++)l.b^=c.charCodeAt(f)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new i(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var y=c.next()>>>11,x=(c.next()>>>0)/4294967296,M=(y+x)/(1<<21);while(M===0);return M},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&s(f,c),h.state=function(){return s(c,{})}),h}r&&r.exports?r.exports=a:this.tychei=a})(st,e)})(zi);var cc=zi.exports,fo={exports:{}};const fc={},hc=Object.freeze(Object.defineProperty({__proto__:null,default:fc},Symbol.toStringTag,{value:"Module"})),pc=ic(hc);(function(e){(function(t,r,n){var i=256,s=6,a=52,o="random",l=n.pow(i,s),c=n.pow(2,a),f=c*2,h=i-1,y;function x(d,v,b){var C=[];v=v==!0?{entropy:!0}:v||{};var O=K(q(v.entropy?[d,p(r)]:d??m(),3),C),S=new M(C),V=function(){for(var W=S.g(s),se=l,we=0;W<c;)W=(W+we)*i,se*=i,we=S.g(1);for(;W>=f;)W/=2,se/=2,we>>>=1;return(W+we)/se};return V.int32=function(){return S.g(4)|0},V.quick=function(){return S.g(4)/4294967296},V.double=V,K(p(S.S),r),(v.pass||b||function(W,se,we,Oe){return Oe&&(Oe.S&&T(Oe,S),W.state=function(){return T(S,{})}),we?(n[o]=W,se):W})(V,O,"global"in v?v.global:this==n,v.state)}function M(d){var v,b=d.length,C=this,O=0,S=C.i=C.j=0,V=C.S=[];for(b||(d=[b++]);O<i;)V[O]=O++;for(O=0;O<i;O++)V[O]=V[S=h&S+d[O%b]+(v=V[O])],V[S]=v;(C.g=function(W){for(var se,we=0,Oe=C.i,ht=C.j,Ee=C.S;W--;)se=Ee[Oe=h&Oe+1],we=we*i+Ee[h&(Ee[Oe]=Ee[ht=h&ht+se])+(Ee[ht]=se)];return C.i=Oe,C.j=ht,we})(i)}function T(d,v){return v.i=d.i,v.j=d.j,v.S=d.S.slice(),v}function q(d,v){var b=[],C=typeof d,O;if(v&&C=="object")for(O in d)try{b.push(q(d[O],v-1))}catch{}return b.length?b:C=="string"?d:d+"\0"}function K(d,v){for(var b=d+"",C,O=0;O<b.length;)v[h&O]=h&(C^=v[h&O]*19)+b.charCodeAt(O++);return p(v)}function m(){try{var d;return y&&(d=y.randomBytes)?d=d(i):(d=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(d)),p(d)}catch{var v=t.navigator,b=v&&v.plugins;return[+new Date,t,b,t.screen,p(r)]}}function p(d){return String.fromCharCode.apply(0,d)}if(K(n.random(),r),e.exports){e.exports=x;try{y=pc}catch{}}else n["seed"+o]=x})(typeof self<"u"?self:st,[],Math)})(fo);var dc=fo.exports,gc=sc,mc=ac,yc=oc,vc=lc,wc=uc,bc=cc,cr=dc;cr.alea=gc;cr.xor128=mc;cr.xorwow=yc;cr.xorshift7=vc;cr.xor4096=wc;cr.tychei=bc;var xc=cr;const ho=nc(xc),Yt=Int32Array.BYTES_PER_ELEMENT;class _c extends Hi{rng;buffer;filledBuffer;constructor(t){super(),this.rng=ho(t.toString()),this.buffer=new Uint8Array(Yt),this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(t){if(t.length%Yt!==0)throw new Error(`SeedRandomWrapper.fillBufferDirect should always be called with the buffer with the length a multiple-of-${Yt}!`);const r=t.length/Yt,n=new DataView(t.buffer);let i=0;for(let s=0;s<r;s++,i+=Yt)n.setInt32(i,this.rng.int32(),!1);return t}generateBigUintByBytes(t){let r=new Uint8Array(Math.ceil(t/8)*8);return r.length<1||!Number.isSafeInteger(t)?0n:(r=this.generateBytes(r.subarray(0,t)),Ui(r.buffer)??0n)}generateBigUintByBits(t){if(t<1||!Number.isSafeInteger(t))return 0n;const r=Math.ceil(t/8),n=BigInt(r*8-t);return this.generateBigUintByBytes(r)>>n}generateBytes(t){if(t.length<1)return t;t.fill(0);let r=t;if(r.length<=this.filledBuffer.length)return r.set(this.filledBuffer.subarray(0,r.length)),this.filledBuffer=this.filledBuffer.subarray(r.length),t;for(;r.length>0;){if(this.filledBuffer.length===0){if(r.length>=Yt){const n=r.subarray(0,r.length-r.length%Yt);this.fillBufferDirect(n),r=r.subarray(n.length);continue}this.fillBuffer()}if(r.length<=this.filledBuffer.length)return r.set(this.filledBuffer.subarray(0,r.length)),this.filledBuffer=this.filledBuffer.subarray(r.length),t;r.set(this.filledBuffer),r=r.subarray(this.filledBuffer.length),this.fillBuffer()}return t}}const nn=64,Cc=20,sn=32,Ns=8;function an(e,t){return e<<t|e>>>32-t}function Dt(e,t,r,n,i){if(e.length<16)return;let s=e[t],a=e[r],o=e[n],l=e[i];s===void 0||a===void 0||o===void 0||l===void 0||(s=s+a|0,l=an(l^s,16),o=o+l|0,a=an(a^o,12),s=s+a|0,l=an(l^s,8),o=o+l|0,a=an(a^o,7),e[t]=s,e[r]=a,e[n]=o,e[i]=l)}function Ec(e,t){if(!(e.length<16||t.length<16)){e.set(t);for(let r=0;r<Cc;r+=2)Dt(e,0,4,8,12),Dt(e,1,5,9,13),Dt(e,2,6,10,14),Dt(e,3,7,11,15),Dt(e,0,5,10,15),Dt(e,1,6,11,12),Dt(e,2,7,8,13),Dt(e,3,4,9,14);for(let r=0;r<16;r++){let n=e[r];const i=t[r];if(n===void 0||i===void 0)throw new Error("generateChaCha20: Something went wrong!");n=n+i|0,e[r]=n}}}class Pc extends Hi{keynonce;state;buffer;filledBuffer;counter;constructor(t){const r=Ns+sn;super();let n;if(typeof t>"u")n=crypto.getRandomValues(new Uint8Array(r));else if(n=t,n.byteLength>r&&(n=t.subarray(0,r)),n.byteLength<r){const o=new Uint8Array(r);o.set(n),n=o}const i=n.subarray(0,sn),s=n.subarray(sn,sn+Ns),a=new Uint8Array(16*4);a.set([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),a.set(i,4*4),a.set(s,14*4),this.keynonce=new Uint32Array(a.buffer),this.state=new Uint32Array(16),this.buffer=new Uint8Array(nn),this.counter=0n,this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(t){if(t.length%nn!==0)throw new Error("ChaCha20.fillBufferDirect should always be called with the buffer with the length a multiple-of-64!");t.fill(0);let r=this.counter;const n=this.state,i=new BigUint64Array(n.buffer);let s=t;for(;s.length>0;){const a=s.subarray(0,n.byteLength),o=new Uint32Array(a.buffer);n.set(this.keynonce),i[6]=BigInt.asUintN(64,r),Ec(o,n),s=s.subarray(a.length),r=BigInt.asUintN(64,r+1n)}return this.counter=r,t}generateBigUintByBytes(t){let r=new Uint8Array(Math.ceil(t/8)*8);return r.length<1||!Number.isSafeInteger(t)?0n:(r=this.generateBytes(r.subarray(0,t)),Ui(r.buffer)??0n)}generateBigUintByBits(t){if(t<1||!Number.isSafeInteger(t))return 0n;const r=Math.ceil(t/8),n=BigInt(r*8-t);return this.generateBigUintByBytes(r)>>n}generateBytes(t){if(t.length<1)return t;t.fill(0);let r=t;if(r.length<=this.filledBuffer.length)return r.set(this.filledBuffer.subarray(0,r.length)),this.filledBuffer=this.filledBuffer.subarray(r.length),t;for(;r.length>0;){if(this.filledBuffer.length===0){if(r.length>=nn){const n=r.subarray(0,r.length-r.length%nn);this.fillBufferDirect(n),r=r.subarray(n.length);continue}this.fillBuffer()}if(r.length<=this.filledBuffer.length)return r.set(this.filledBuffer.subarray(0,r.length)),this.filledBuffer=this.filledBuffer.subarray(r.length),t;r.set(this.filledBuffer),r=r.subarray(this.filledBuffer.length),this.fillBuffer()}return t}}function Sc(e){if(!e||e.type!=="num"&&e.type!=="str")return H;const t=ho(e.value.toString());return _(([r,n])=>r&&r.type==="num"&&n&&n.type==="num"?A(Math.floor(t()*(Math.floor(n.value)-Math.ceil(r.value)+1)+Math.ceil(r.value))):A(t()))}function Ac(e){if(!e||e.type!=="num"&&e.type!=="str")return H;const t=new _c(e.value);return _(([r,n])=>{if(r&&r.type==="num"&&n&&n.type==="num"){const i=t.generateRandomIntegerInRange(r.value,n.value);return typeof i=="number"?A(i):H}return A(t.generateNumber0To1())})}async function Fc(e){if(!e||e.type!=="num"&&e.type!=="str"&&e.type!=="null")return H;let t;e.type==="num"?t=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(new Float64Array([e.value])))):e.type==="str"&&(t=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(co.encode(e.value)))));const r=new Pc(t);return _(([n,i])=>{if(n&&n.type==="num"&&i&&i.type==="num"){const s=r.generateRandomIntegerInRange(n.value,i.value);return typeof s=="number"?A(s):H}return A(r.generateNumber0To1())})}const Mc={"Math:Infinity":A(1/0),"Math:E":A(Math.E),"Math:LN2":A(Math.LN2),"Math:LN10":A(Math.LN10),"Math:LOG2E":A(Math.LOG2E),"Math:LOG10E":A(Math.LOG10E),"Math:PI":A(Math.PI),"Math:SQRT1_2":A(Math.SQRT1_2),"Math:SQRT2":A(Math.SQRT2),"Math:abs":_(([e])=>(P(e),A(Math.abs(e.value)))),"Math:acos":_(([e])=>(P(e),A(Math.acos(e.value)))),"Math:acosh":_(([e])=>(P(e),A(Math.acosh(e.value)))),"Math:asin":_(([e])=>(P(e),A(Math.asin(e.value)))),"Math:asinh":_(([e])=>(P(e),A(Math.asinh(e.value)))),"Math:atan":_(([e])=>(P(e),A(Math.atan(e.value)))),"Math:atanh":_(([e])=>(P(e),A(Math.atanh(e.value)))),"Math:atan2":_(([e,t])=>(P(e),P(t),A(Math.atan2(e.value,t.value)))),"Math:cbrt":_(([e])=>(P(e),A(Math.cbrt(e.value)))),"Math:ceil":_(([e])=>(P(e),A(Math.ceil(e.value)))),"Math:clz32":_(([e])=>(P(e),A(Math.clz32(e.value)))),"Math:cos":_(([e])=>(P(e),A(Math.cos(e.value)))),"Math:cosh":_(([e])=>(P(e),A(Math.cosh(e.value)))),"Math:exp":_(([e])=>(P(e),A(Math.exp(e.value)))),"Math:expm1":_(([e])=>(P(e),A(Math.expm1(e.value)))),"Math:floor":_(([e])=>(P(e),A(Math.floor(e.value)))),"Math:fround":_(([e])=>(P(e),A(Math.fround(e.value)))),"Math:hypot":_(([e])=>{it(e);const t=[];for(const r of e.value)P(r),t.push(r.value);return A(Math.hypot(...t))}),"Math:imul":_(([e,t])=>(P(e),P(t),A(Math.imul(e.value,t.value)))),"Math:log":_(([e])=>(P(e),A(Math.log(e.value)))),"Math:log1p":_(([e])=>(P(e),A(Math.log1p(e.value)))),"Math:log10":_(([e])=>(P(e),A(Math.log10(e.value)))),"Math:log2":_(([e])=>(P(e),A(Math.log2(e.value)))),"Math:max":_(([e,t])=>(P(e),P(t),A(Math.max(e.value,t.value)))),"Math:min":_(([e,t])=>(P(e),P(t),A(Math.min(e.value,t.value)))),"Math:pow":_(([e,t])=>(P(e),P(t),A(Math.pow(e.value,t.value)))),"Math:round":_(([e])=>(P(e),A(Math.round(e.value)))),"Math:sign":_(([e])=>(P(e),A(Math.sign(e.value)))),"Math:sin":_(([e])=>(P(e),A(Math.sin(e.value)))),"Math:sinh":_(([e])=>(P(e),A(Math.sinh(e.value)))),"Math:sqrt":_(([e])=>{P(e);const t=Math.sqrt(e.value);return A(t)}),"Math:tan":_(([e])=>(P(e),A(Math.tan(e.value)))),"Math:tanh":_(([e])=>(P(e),A(Math.tanh(e.value)))),"Math:trunc":_(([e])=>(P(e),A(Math.trunc(e.value)))),"Math:rnd":_(([e,t])=>{if(e&&e.type==="num"&&t&&t.type==="num"){const r=Wr.instance.generateRandomIntegerInRange(e.value,t.value);return r===null?H:A(r)}return A(Wr.instance.generateNumber0To1())}),"Math:gen_rng":_(async([e,t])=>{Ie(e);const r="subtle"in crypto;let n=r?"chacha20":"rc4_legacy";if(t?.type==="obj"){const i=t.value.get("algorithm");if(i?.type!=="str")throw new J("`options.algorithm` must be string.");n=i.value}else if(t?.type!==void 0)throw new J("`options` must be an object if specified.");if(e.type!=="num"&&e.type!=="str"&&e.type!=="null")throw new J("`seed` must be either number or string if specified.");switch(n){case"rc4_legacy":return Sc(e);case"rc4":{if(!r)throw new J(`The random algorithm ${n} cannot be used because \`crypto.subtle\` is not available. Maybe in non-secure context?`);return Ac(e)}case"chacha20":{if(!r)throw new J(`The random algorithm ${n} cannot be used because \`crypto.subtle\` is not available. Maybe in non-secure context?`);return await Fc(e)}default:throw new J("`options.algorithm` must be one of these: `chacha20`, `rc4`, or `rc4_legacy`.")}})},Oc={...Mc,help:ie("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":ie(uo),"Core:ai":ie("kawaii"),"Core:not":_(([e])=>(ve(e),e.value?Ae:Se)),"Core:eq":_(([e,t])=>(Ie(e),Ie(t),sr(e,t)?Se:Ae)),"Core:neq":_(([e,t])=>(Ie(e),Ie(t),sr(e,t)?Ae:Se)),"Core:and":_(([e,t])=>(ve(e),e.value?(ve(t),t.value?Se:Ae):Ae)),"Core:or":_(([e,t])=>(ve(e),e.value?Se:(ve(t),t.value?Se:Ae))),"Core:add":_(([e,t])=>(P(e),P(t),A(e.value+t.value))),"Core:sub":_(([e,t])=>(P(e),P(t),A(e.value-t.value))),"Core:mul":_(([e,t])=>(P(e),P(t),A(e.value*t.value))),"Core:pow":_(([e,t])=>{P(e),P(t);const r=e.value**t.value;return A(r)}),"Core:div":_(([e,t])=>{P(e),P(t);const r=e.value/t.value;return A(r)}),"Core:mod":_(([e,t])=>(P(e),P(t),A(e.value%t.value))),"Core:gt":_(([e,t])=>(P(e),P(t),e.value>t.value?Se:Ae)),"Core:lt":_(([e,t])=>(P(e),P(t),e.value<t.value?Se:Ae)),"Core:gteq":_(([e,t])=>(P(e),P(t),e.value>=t.value?Se:Ae)),"Core:lteq":_(([e,t])=>(P(e),P(t),e.value<=t.value?Se:Ae)),"Core:type":_(([e])=>(Ie(e),ie(e.type))),"Core:to_str":_(([e])=>(Ie(e),ie($t(e)))),"Core:range":_(([e,t])=>(P(e),P(t),e.value<t.value?fe(Array.from({length:t.value-e.value+1},(r,n)=>A(n+e.value))):e.value>t.value?fe(Array.from({length:e.value-t.value+1},(r,n)=>A(e.value-n))):fe([e]))),"Core:sleep":_(async([e])=>(P(e),await new Promise(t=>setTimeout(t,e.value)),H)),"Core:abort":_(async([e])=>{throw ce(e),new Wu(e.value)}),"Util:uuid":_(()=>ie(Xu())),"Json:stringify":_(([e])=>(Ie(e),ie(JSON.stringify(vi(e))))),"Json:parse":_(([e])=>{ce(e);try{return wi(JSON.parse(e.value))}catch{return pn("not_json")}}),"Json:parsable":_(([e])=>{ce(e);try{JSON.parse(e.value)}catch{return _t(!1)}return _t(!0)}),"Date:now":_(()=>A(Date.now())),"Date:year":_(([e])=>(e&&P(e),A(new Date(e?.value??Date.now()).getFullYear()))),"Date:month":_(([e])=>(e&&P(e),A(new Date(e?.value??Date.now()).getMonth()+1))),"Date:day":_(([e])=>(e&&P(e),A(new Date(e?.value??Date.now()).getDate()))),"Date:hour":_(([e])=>(e&&P(e),A(new Date(e?.value??Date.now()).getHours()))),"Date:minute":_(([e])=>(e&&P(e),A(new Date(e?.value??Date.now()).getMinutes()))),"Date:second":_(([e])=>(e&&P(e),A(new Date(e?.value??Date.now()).getSeconds()))),"Date:millisecond":_(([e])=>(e&&P(e),A(new Date(e?.value??Date.now()).getMilliseconds()))),"Date:parse":_(([e])=>{ce(e);const t=new Date(e.value).getTime();return t===t?A(t):pn("not_date")}),"Date:to_iso_str":_(([e,t])=>{e&&P(e);const r=new Date(e?.value??Date.now());t&&P(t);const n=t?.value??-r.getTimezoneOffset();let i;if(n===0)i="Z";else{const y=Math.sign(n),x=Math.floor(Math.abs(n)/60),M=Math.abs(n)%60;r.setUTCHours(r.getUTCHours()+y*x),r.setUTCMinutes(r.getUTCMinutes()+y*M);const T=n>0?"+":"-",q=x.toString().padStart(2,"0"),K=M.toString().padStart(2,"0");i=`${T}${q}:${K}`}const s=r.getUTCFullYear().toString().padStart(4,"0"),a=(r.getUTCMonth()+1).toString().padStart(2,"0"),o=r.getUTCDate().toString().padStart(2,"0"),l=r.getUTCHours().toString().padStart(2,"0"),c=r.getUTCMinutes().toString().padStart(2,"0"),f=r.getUTCSeconds().toString().padStart(2,"0"),h=r.getUTCMilliseconds().toString().padStart(3,"0");return ie(`${s}-${a}-${o}T${l}:${c}:${f}.${h}${i}`)}),"Num:from_hex":_(([e])=>(ce(e),A(parseInt(e.value,16)))),"Str:lf":ie(`
`),"Str:lt":_(([e,t])=>(ce(e),ce(t),e.value<t.value?A(-1):e.value===t.value?A(0):A(1))),"Str:gt":_(([e,t])=>(ce(e),ce(t),e.value>t.value?A(-1):e.value===t.value?A(0):A(1))),"Str:from_codepoint":_(([e])=>(P(e),ie(String.fromCodePoint(e.value)))),"Str:from_unicode_codepoints":_(([e])=>(it(e),ie(Array.from(e.value.map(t=>(P(t),String.fromCodePoint(t.value)))).join("")))),"Str:from_utf8_bytes":_(([e])=>(it(e),ie(ec.decode(Uint8Array.from(e.value.map(t=>(P(t),t.value))))))),"Uri:encode_full":_(([e])=>(ce(e),ie(encodeURI(e.value)))),"Uri:encode_component":_(([e])=>(ce(e),ie(encodeURIComponent(e.value)))),"Uri:decode_full":_(([e])=>(ce(e),ie(decodeURI(e.value)))),"Uri:decode_component":_(([e])=>(ce(e),ie(decodeURIComponent(e.value)))),"Arr:create":_(([e,t])=>{P(e);try{return fe(Array(e.value).fill(t??H))}catch(r){throw e.value<0?new J("Arr:create expected non-negative number, got negative"):Number.isInteger(e.value)?r:new J("Arr:create expected integer, got non-integer")}}),"Obj:keys":_(([e])=>(je(e),fe(Array.from(e.value.keys()).map(t=>ie(t))))),"Obj:vals":_(([e])=>(je(e),fe(Array.from(e.value.values())))),"Obj:kvs":_(([e])=>(je(e),fe(Array.from(e.value.entries()).map(([t,r])=>fe([ie(t),r]))))),"Obj:get":_(([e,t])=>(je(e),ce(t),e.value.get(t.value)??H)),"Obj:set":_(([e,t,r])=>(je(e),ce(t),Ie(r),e.value.set(t.value,r),H)),"Obj:has":_(([e,t])=>(je(e),ce(t),_t(e.value.has(t.value)))),"Obj:copy":_(([e])=>(je(e),ir(new Map(e.value)))),"Obj:merge":_(([e,t])=>(je(e),je(t),ir(new Map([...e.value,...t.value])))),"Obj:pick":_(([e,t])=>(je(e),it(t),ir(new Map(t.value.map(r=>(ce(r),[r.value,e.value.get(r.value)??H])))))),"Error:create":_(([e,t])=>(ce(e),pn(e.value,t))),"Async:interval":_(async([e,t,r],n)=>{P(e),Pe(t),r&&(ve(r),r.value&&n.call(t,[]));let i;const s=()=>{i=setInterval(()=>{n.topCall(t,[])},e.value),n.registerAbortHandler(a),n.registerPauseHandler(a),n.unregisterUnpauseHandler(s)},a=()=>{clearInterval(i),n.unregisterAbortHandler(a),n.unregisterPauseHandler(a),n.registerUnpauseHandler(s)};return s(),_(([],o)=>{a(),o.unregisterUnpauseHandler(s)})}),"Async:timeout":_(async([e,t],r)=>{P(e),Pe(t);let n;const i=()=>{n=setTimeout(()=>{r.topCall(t,[]),r.unregisterAbortHandler(s),r.unregisterPauseHandler(s)},e.value),r.registerAbortHandler(s),r.registerPauseHandler(s),r.unregisterUnpauseHandler(i)},s=()=>{clearTimeout(n),r.unregisterAbortHandler(s),r.unregisterPauseHandler(s),r.registerUnpauseHandler(i)};return i(),_(([],a)=>{s(),a.unregisterUnpauseHandler(i)})})},Ds=e=>({type:"return",value:e}),Ls=(e,t)=>({type:"break",label:e,value:t}),Hs=e=>({type:"continue",label:e,value:null});function ot(e,t){return e.type==="break"&&e.label!=null&&e.label===t?e.value??H:e}function Us(e){switch(e.type){case"return":return e.value;default:return Xt(e),e}}function Xt(e){switch(e.type){case"return":throw new J("Invalid return");case"break":throw new J("Invalid break");case"continue":throw new J("Invalid continue")}}function R(e){switch(e.type){case"null":case"bool":case"num":case"str":case"arr":case"obj":case"fn":case"error":case"reference":return!1;case"return":case"break":case"continue":return!0}throw new TypeError("expected value or control")}var fr={},kc=()=>{const e="\\ud800-\\udfff",a="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",o="\\ufe0e\\ufe0f",l="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",c=`[${e}]`,f=`[${a}]`,h="\\ud83c[\\udffb-\\udfff]",y=`(?:${f}|${h})`,x=`[^${e}]`,M="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",T="[\\ud800-\\udbff][\\udc00-\\udfff]",q="\\u200d",K="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",m=`[${l}]`,p=`${y}?`,d=`[${o}]?`,v=`(?:${q}(?:${[x,M,T].join("|")})${d+p})*`,b=d+p+v,O=`(?:${[`${x}${f}?`,f,M,T,c,m].join("|")})`;return new RegExp(`${K}|${h}(?=${h})|${O+b}`,"g")},$c=st&&st.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fr,"__esModule",{value:!0});var Tn=$c(kc);function bi(e){if(typeof e!="string")throw new Error("A string is expected as input");return e.match(Tn.default())||[]}var Jn=fr.toArray=bi;function Gi(e){if(typeof e!="string")throw new Error("Input must be a string");var t=e.match(Tn.default());return t===null?0:t.length}var Bc=fr.length=Gi;function po(e,t,r){if(t===void 0&&(t=0),typeof e!="string")throw new Error("Input must be a string");(typeof t!="number"||t<0)&&(t=0),typeof r=="number"&&r<0&&(r=0);var n=e.match(Tn.default());return n?n.slice(t,r).join(""):""}var Tc=fr.substring=po;function Ic(e,t,r){if(t===void 0&&(t=0),typeof e!="string")throw new Error("Input must be a string");var n=Gi(e);if(typeof t!="number"&&(t=parseInt(t,10)),t>=n)return"";t<0&&(t+=n);var i;typeof r>"u"?i=n:(typeof r!="number"&&(r=parseInt(r,10)),i=r>=0?r+t:t);var s=e.match(Tn.default());return s?s.slice(t,i).join(""):""}fr.substr=Ic;function Rc(e,t,r,n){if(t===void 0&&(t=16),r===void 0&&(r="#"),n===void 0&&(n="right"),typeof e!="string"||typeof t!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof r!="string"&&(r=String(r));var i=Gi(e);if(i>t)return po(e,0,t);if(i<t){var s=r.repeat(t-i);return n==="left"?s+e:e+s}return e}fr.limit=Rc;function Nc(e,t,r){if(r===void 0&&(r=0),typeof e!="string")throw new Error("Input must be a string");if(e==="")return t===""?0:-1;r=Number(r),r=isNaN(r)?0:r,t=String(t);var n=bi(e);if(r>=n.length)return t===""?n.length:-1;if(t==="")return r;var i=bi(t),s=!1,a;for(a=r;a<n.length;a+=1){for(var o=0;o<i.length&&i[o]===n[a+o];)o+=1;if(o===i.length&&i[o-1]===n[a+o-1]){s=!0;break}}return s?a:-1}var Dc=fr.indexOf=Nc;const js={num:{to_str:e=>_((t,r)=>ie(e.value.toString())),to_hex:e=>_((t,r)=>ie(e.value.toString(16)))},str:{to_num:e=>_((t,r)=>{const n=parseInt(e.value,10);return isNaN(n)?H:A(n)}),to_arr:e=>_((t,r)=>fe(Jn(e.value).map(n=>ie(n)))),to_unicode_arr:e=>_((t,r)=>fe([...e.value].map(n=>ie(n)))),to_unicode_codepoint_arr:e=>_((t,r)=>fe([...e.value].map(n=>{const i=n.codePointAt(0);return A(i??n.charCodeAt(0))}))),to_char_arr:e=>_((t,r)=>fe(e.value.split("").map(n=>ie(n)))),to_charcode_arr:e=>_((t,r)=>fe(e.value.split("").map(n=>A(n.charCodeAt(0))))),to_utf8_byte_arr:e=>_((t,r)=>fe(Array.from(co.encode(e.value)).map(n=>A(n)))),len:e=>A(Bc(e.value)),replace:e=>_(([t,r],n)=>(ce(t),ce(r),ie(e.value.split(t.value).join(r.value)))),index_of:e=>_(([t,r],n)=>{ce(t),r&&P(r);const i=r?r.value<0?e.value.length+r.value:r.value:void 0;return A(Dc(e.value,t.value,i))}),incl:e=>_(([t],r)=>(ce(t),e.value.includes(t.value)?Se:Ae)),trim:e=>_((t,r)=>ie(e.value.trim())),upper:e=>_((t,r)=>ie(e.value.toUpperCase())),lower:e=>_((t,r)=>ie(e.value.toLowerCase())),split:e=>_(([t],r)=>(t&&ce(t),fe(t?e.value.split(t?t.value:"").map(n=>ie(n)):Jn(e.value).map(n=>ie(n))))),slice:e=>_(([t,r],n)=>(P(t),P(r),ie(Tc(e.value,t.value,r.value)))),pick:e=>_(([t],r)=>{P(t);const i=Jn(e.value)[t.value];return i?ie(i):H}),charcode_at:e=>_(([t],r)=>{P(t);const n=e.value.charCodeAt(t.value);return Number.isNaN(n)?H:A(n)}),codepoint_at:e=>_(([t],r)=>{P(t);const n=e.value.codePointAt(t.value)??e.value.charCodeAt(t.value);return Number.isNaN(n)?H:A(n)}),starts_with:e=>_(([t,r],n)=>{if(ce(t),!t.value)return Se;r&&P(r);const i=r?.value??0;if(i<-e.value.length||i>e.value.length)return Ae;const s=i>=0?i:e.value.length+i;return e.value.startsWith(t.value,s)?Se:Ae}),ends_with:e=>_(([t,r],n)=>{if(ce(t),!t.value)return Se;r&&P(r);const i=r?.value??e.value.length;if(i<-e.value.length||i>e.value.length)return Ae;const s=i>=0?i:e.value.length+i;return e.value.endsWith(t.value,s)?Se:Ae}),pad_start:e=>_(([t,r],n)=>{P(t);const i=r?(ce(r),r.value):" ";return ie(e.value.padStart(t.value,i))}),pad_end:e=>_(([t,r],n)=>{P(t);const i=r?(ce(r),r.value):" ";return ie(e.value.padEnd(t.value,i))})},arr:{len:e=>A(e.value.length),push:e=>_(([t],r)=>(Ie(t),e.value.push(t),e)),unshift:e=>_(([t],r)=>(Ie(t),e.value.unshift(t),e)),pop:e=>_((t,r)=>e.value.pop()??H),shift:e=>_((t,r)=>e.value.shift()??H),concat:e=>_(([t],r)=>(it(t),fe(e.value.concat(t.value)))),slice:e=>_(([t,r],n)=>(P(t),P(r),fe(e.value.slice(t.value,r.value)))),join:e=>_(([t],r)=>(t&&ce(t),ie(e.value.map(n=>n.type==="str"?n.value:"").join(t?t.value:"")))),map:e=>_(async([t],r)=>{Pe(t);const n=e.value.map(async(i,s)=>await r.call(t,[i,A(s)]));return fe(await Promise.all(n))},([t],r)=>{Pe(t);const n=e.value.map((i,s)=>r.call(t,[i,A(s)]));return fe(n)}),filter:e=>_(async([t],r)=>{Pe(t);const n=[];for(let i=0;i<e.value.length;i++){const s=e.value[i],a=await r.call(t,[s,A(i)]);ve(a),a.value&&n.push(s)}return fe(n)},([t],r)=>{Pe(t);const n=[];for(let i=0;i<e.value.length;i++){const s=e.value[i],a=r.call(t,[s,A(i)]);ve(a),a.value&&n.push(s)}return fe(n)}),reduce:e=>_(async([t,r],n)=>{Pe(t);const i=r!=null;if(!i&&e.value.length===0)throw new J("Reduce of empty array without initial value");let s=i?r:e.value[0];for(let a=i?0:1;a<e.value.length;a++){const o=e.value[a];s=await n.call(t,[s,o,A(a)])}return s},([t,r],n)=>{Pe(t);const i=r!=null;if(!i&&e.value.length===0)throw new J("Reduce of empty array without initial value");let s=i?r:e.value[0];for(let a=i?0:1;a<e.value.length;a++){const o=e.value[a];s=n.call(t,[s,o,A(a)])}return s}),find:e=>_(async([t],r)=>{Pe(t);for(let n=0;n<e.value.length;n++){const i=e.value[n],s=await r.call(t,[i,A(n)]);if(ve(s),s.value)return i}return H},([t],r)=>{Pe(t);for(let n=0;n<e.value.length;n++){const i=e.value[n],s=r.call(t,[i,A(n)]);if(ve(s),s.value)return i}return H}),incl:e=>_(([t],r)=>(Ie(t),e.value.some(n=>sr(t,n))?Se:Ae)),index_of:e=>_(([t,r],n)=>{if(Ie(t),r){P(r);const i=e.value.slice(0,r.value).length,s=e.value.slice(r.value).findIndex(a=>sr(a,t));return A(s<0?s:s+i)}else return A(e.value.findIndex(i=>sr(i,t)))}),reverse:e=>_((t,r)=>(e.value.reverse(),H)),copy:e=>_((t,r)=>fe([...e.value])),sort:e=>_(async([t],r)=>{const n=async(s,a)=>{if(s.length<=1)return s;const o=Math.floor(s.length/2),l=n(s.slice(0,o),a),c=n(s.slice(o),a),[f,h]=await Promise.all([l,c]);return i(f,h,a)},i=async(s,a,o)=>{const l=[];let c=0,f=0;for(;c<s.length&&f<a.length;){const h=s[c],y=a[f],x=await r.call(o,[h,y]);P(x),x.value<=0?(l.push(s[c]),c++):(l.push(a[f]),f++)}return l.concat(s.slice(c)).concat(a.slice(f))};return Pe(t),it(e),e.value=await n(e.value,t),e},([t],r)=>{const n=(s,a)=>{if(s.length<=1)return s;const o=Math.floor(s.length/2),l=n(s.slice(0,o),a),c=n(s.slice(o),a);return i(l,c,a)},i=(s,a,o)=>{const l=[];let c=0,f=0;for(;c<s.length&&f<a.length;){const h=s[c],y=a[f],x=r.call(o,[h,y]);P(x),x.value<=0?(l.push(s[c]),c++):(l.push(a[f]),f++)}return l.concat(s.slice(c)).concat(a.slice(f))};return Pe(t),it(e),e.value=n(e.value,t),e}),fill:e=>_(([t,r,n],i)=>{const s=t??H,a=r&&(P(r),r.value),o=n&&(P(n),n.value);return e.value.fill(s,a,o),e}),repeat:e=>_(([t],r)=>{P(t);try{return fe(Array(t.value).fill(e.value).flat())}catch(n){throw t.value<0?new J("arr.repeat expected non-negative number, got negative"):Number.isInteger(t.value)?n:new J("arr.repeat expected integer, got non-integer")}}),splice:e=>_(([t,r,n],i)=>{P(t);const s=t.value<-e.value.length?0:t.value<0?e.value.length+t.value:t.value>=e.value.length?e.value.length:t.value,a=r!=null?(P(r),r.value):e.value.length-s,o=n!=null?(it(n),n.value):[],l=e.value.splice(s,a,...o);return fe(l)}),flat:e=>_(([t],r)=>{if(t=t??A(1),P(t),!Number.isInteger(t.value))throw new J("arr.flat expected integer, got non-integer");if(t.value<0)throw new J("arr.flat expected non-negative number, got negative");const n=(s,a,o)=>{if(a===0){o.push(...s);return}for(const l of s)rr(l)?n(l.value,a-1,o):o.push(l)},i=[];return n(e.value,t.value,i),fe(i)}),flat_map:e=>_(async([t],r)=>{Pe(t);const n=e.value.map(async(s,a)=>{const o=await r.call(t,[s,A(a)]);return rr(o)?o.value:o}),i=await Promise.all(n);return fe(i.flat())},([t],r)=>{Pe(t);const i=e.value.map((s,a)=>{const o=r.call(t,[s,A(a)]);return rr(o)?o.value:o});return fe(i.flat())}),every:e=>_(async([t],r)=>{Pe(t);for(let n=0;n<e.value.length;n++){const i=e.value[n],s=await r.call(t,[i,A(n)]);if(ve(s),!s.value)return Ae}return Se},([t],r)=>{Pe(t);for(let n=0;n<e.value.length;n++){const i=e.value[n],s=r.call(t,[i,A(n)]);if(ve(s),!s.value)return Ae}return Se}),some:e=>_(async([t],r)=>{Pe(t);for(let n=0;n<e.value.length;n++){const i=e.value[n],s=await r.call(t,[i,A(n)]);if(ve(s),s.value)return Se}return Ae},([t],r)=>{Pe(t);for(let n=0;n<e.value.length;n++){const i=e.value[n],s=r.call(t,[i,A(n)]);if(ve(s),s.value)return Se}return Ae}),insert:e=>_(([t,r],n)=>(P(t),Ie(r),e.value.splice(t.value,0,r),H)),remove:e=>_(([t],r)=>(P(t),e.value.splice(t.value,1)[0]??H)),at:e=>_(([t,r],n)=>(P(t),e.value.at(t.value)??r??H))},error:{name:e=>ie(e.value),info:e=>e.info??H}};function Ks(e,t){if(Object.hasOwn(js,e.type)){const r=js[e.type];if(Object.hasOwn(r,t))return r[t](e);throw new J(`No such prop (${t}) in ${e.type}.`)}else throw new J(`Cannot read prop of ${e.type}. (reading ${t})`)}const Lc={mut(e){return{isMutable:!0,value:e}},const(e){return{isMutable:!1,value:e}}},lt={variable(e,t){return new Hc(e,t)},index(e,t){return new Uc(e.value,t)},prop(e,t){return new jc(e.value,t)},arr(e){return new Kc(e)},obj(e){return new qc(e)}};class Hc{name;scope;constructor(t,r){this.name=t,this.scope=r,this.type="reference"}type;get(){return this.scope.get(this.name)}set(t){this.scope.assign(this.name,t)}}class Uc{target;index;constructor(t,r){this.target=t,this.index=r,this.type="reference"}type;get(){return this.assertIndexInRange(),this.target[this.index]}set(t){this.assertIndexInRange(),this.target[this.index]=t}assertIndexInRange(){const t=this.index;if(t<0||this.target.length<=t)throw new gi(`Index out of range. index: ${this.index} max: ${this.target.length-1}`)}}class jc{target;index;constructor(t,r){this.target=t,this.index=r,this.type="reference"}type;get(){return this.target.get(this.index)??H}set(t){this.target.set(this.index,t)}}class Kc{items;constructor(t){this.items=t,this.type="reference"}type;get(){return fe(this.items.map(t=>t.get()))}set(t){it(t);for(const[r,n]of this.items.entries())n.set(t.value[r]??H)}}class qc{entries;constructor(t){this.entries=t,this.type="reference"}type;get(){return ir(new Map([...this.entries].map(([t,r])=>[t,r.get()])))}set(t){je(t);for(const[r,n]of this.entries.entries())n.set(t.value.get(r)??H)}}var oe=function(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};class ae{opts;stepCount=0;stop=!1;pausing=null;scope;abortHandlers=[];pauseHandlers=[];unpauseHandlers=[];vars={};irqRate;irqSleep;constructor(t,r={}){this.opts=r;const n={print:_(([s])=>{Ie(s),this.opts.out&&this.opts.out(s)}),readline:_(async s=>{const a=s[0];if(ce(a),this.opts.in==null)return H;const o=await this.opts.in(a.value);return ie(o)})};if(this.vars=Object.fromEntries(Object.entries({...t,...Oc,...n}).map(([s,a])=>[s,Lc.const(a)])),this.scope=new Ye([new Map(Object.entries(this.vars))]),this.scope.opts.log=(s,a)=>{switch(s){case"add":this.log("var:add",a);break;case"read":this.log("var:read",a);break;case"write":this.log("var:write",a);break}},!((this.opts.irqRate??300)>=0))throw new Gn(`Invalid IRQ rate (${this.opts.irqRate}): must be non-negative number`);this.irqRate=this.opts.irqRate??300;const i=s=>()=>new Promise(a=>setTimeout(a,s));if(typeof this.opts.irqSleep=="function")this.irqSleep=this.opts.irqSleep;else if(this.opts.irqSleep===void 0)this.irqSleep=i(5);else if(this.opts.irqSleep>=0)this.irqSleep=i(this.opts.irqSleep);else throw new Gn("irqSleep must be a function or a positive number.")}async exec(t){if(!(t==null||t.length===0))try{await this.collectNs(t);const r=await this._run(t,this.scope,[]);Xt(r),this.log("end",{val:r})}catch(r){this.handleError(r)}}execSync(t){if(t==null||t.length===0)return;this.collectNsSync(t);const r=this._runSync(t,this.scope,[]);return Xt(r),r}async execFn(t,r){return await this._fn(t,r,[]).catch(n=>(this.handleError(n),pn("func_failed")))}execFnSync(t,r){return this._fnSync(t,r,[])}execFnSimple(t,r){return this._fn(t,r,[])}static collectMetadata(t){if(t==null||t.length===0)return;const r=new Map;for(const n of t)switch(n.type){case"meta":{r.set(n.name,mi(n.value));break}}return r}handleError(t){if(!this.opts.err)throw t;if(this.opts.abortOnError){if(this.stop)return;this.abort()}t instanceof It?this.opts.err(t):this.opts.err(new $s(t))}log(t,r){this.opts.log&&this.opts.log(t,r)}async collectNs(t,r=this.scope){for(const n of t)switch(n.type){case"ns":{await this.collectNsMember(n,r);break}}}collectNsSync(t,r=this.scope){for(const n of t)switch(n.type){case"ns":{this.collectNsMemberSync(n,r);break}}}async collectNsMember(t,r=this.scope){const n=r.createChildNamespaceScope(t.name);await this.collectNs(t.members,n);for(const i of t.members)switch(i.type){case"def":{if(i.dest.type!=="identifier")throw new gr("Destructuring assignment is invalid in namespace declarations.",i.loc.start);if(i.mut)throw new gr('No "var" in namespace declaration: '+i.dest.name,i.loc.start);const s=await this._eval(i.expr,n,[]);Xt(s),i.expr.type==="fn"&&rn(s)&&!s.native&&(s.name=n.getNsPrefix()+i.dest.name),await this.define(n,i.dest,s,i.mut);break}case"ns":break;default:{const a=i;throw new gr("invalid ns member type: "+a.type,a.loc.start)}}}collectNsMemberSync(t,r=this.scope){const n=r.createChildNamespaceScope(t.name);this.collectNsSync(t.members,n);for(const i of t.members)switch(i.type){case"def":{if(i.dest.type!=="identifier")throw new gr("Destructuring assignment is invalid in namespace declarations.",i.loc.start);if(i.mut)throw new gr('No "var" in namespace declaration: '+i.dest.name,i.loc.start);const s=this._evalSync(i.expr,n,[]);Xt(s),i.expr.type==="fn"&&rn(s)&&!s.native&&(s.name=n.getNsPrefix()+i.dest.name),this.defineSync(n,i.dest,s,i.mut);break}case"ns":break;default:{const a=i;throw new gr("invalid ns member type: "+a.type,a.loc.start)}}}async _fn(t,r,n,i){if(t.native){const s={name:"<native>",pos:i};return t.native(r,{call:(o,l)=>this._fn(o,l,[...n,s]),topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,registerPauseHandler:this.registerPauseHandler,registerUnpauseHandler:this.registerUnpauseHandler,unregisterAbortHandler:this.unregisterAbortHandler,unregisterPauseHandler:this.unregisterPauseHandler,unregisterUnpauseHandler:this.unregisterUnpauseHandler})??H}else{const s=t.scope.createChildScope();for(const[o,l]of t.params.entries()){const c=r[o];l.default||Ie(c),this.define(s,l.dest,c??l.default,!0)}const a={name:t.name??"<anonymous>",pos:i};return Us(await this._run(t.statements,s,[...n,a]))}}_fnSync(t,r,n,i){if(t.native){const s={name:"<native>",pos:i},a=t.nativeSync?t.nativeSync(r,{call:(o,l)=>this._fnSync(o,l,[...n,s]),topCall:this.execFnSync,registerAbortHandler:this.registerAbortHandler,registerPauseHandler:this.registerPauseHandler,registerUnpauseHandler:this.registerUnpauseHandler,unregisterAbortHandler:this.unregisterAbortHandler,unregisterPauseHandler:this.unregisterPauseHandler,unregisterUnpauseHandler:this.unregisterUnpauseHandler}):t.native(r,{call:(o,l)=>this._fn(o,l,[...n,s]),topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,registerPauseHandler:this.registerPauseHandler,registerUnpauseHandler:this.registerUnpauseHandler,unregisterAbortHandler:this.unregisterAbortHandler,unregisterPauseHandler:this.unregisterPauseHandler,unregisterUnpauseHandler:this.unregisterUnpauseHandler});if(a instanceof Promise)throw new Gn("Native function must not return a Promise in sync mode.");return a??H}else{const s=t.scope.createChildScope();for(const[o,l]of t.params.entries()){const c=r[o];l.default||Ie(c),this.define(s,l.dest,c??l.default,!0)}const a={name:t.name??"<anonymous>",pos:i};return Us(this._runSync(t.statements,s,[...n,a]))}}_evalClause(t,r,n){return this._eval(t,Bs(t)?r.createChildScope():r,n)}_evalClauseSync(t,r,n){return this._evalSync(t,Bs(t)?r.createChildScope():r,n)}async _evalBinaryOperation(t,r,n,i,s){const a=i.get(t);Pe(a);const o=await this._eval(r,i,s);if(R(o))return o;const l=await this._eval(n,i,s);return R(l)?l:this._fn(a,[o,l],s)}_evalBinaryOperationSync(t,r,n,i,s){const a=i.get(t);Pe(a);const o=this._evalSync(r,i,s);if(R(o))return o;const l=this._evalSync(n,i,s);return R(l)?l:this._fnSync(a,[o,l],s)}_eval(t,r,n){return this.__eval(t,r,n).catch(i=>{if(i.pos)throw i;{const s=i instanceof It?i:new $s(i);throw s.pos=t.loc.start,s.message=[s.message,...[...n,{pos:s.pos}].map(({pos:a},o)=>{const l=n[o-1]?.name??"<root>";return a?`  at ${l} (Line ${a.line}, Column ${a.column})`:`  at ${l}`}).reverse()].join(`
`),s}})}_evalSync(t,r,n){return this.__evalSync(t,r,n)}async __eval(t,r,n){if(this.stop)return H;if(this.pausing&&await this.pausing.promise,this.irqRate!==0&&this.stepCount%this.irqRate>=this.irqRate-1&&await this.irqSleep(),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new J("max step exceeded");switch(t.type){case"call":{const i=await this._eval(t.target,r,n);if(R(i))return i;Pe(i);const s=[];for(const a of t.args){const o=await this._eval(a,r,n);if(R(o))return o;s.push(o)}return this._fn(i,s,n,t.loc.start)}case"if":{const i=await this._eval(t.cond,r,n);if(R(i))return i;if(ve(i),i.value)return ot(await this._evalClause(t.then,r,n),t.label);for(const s of t.elseif){const a=await this._eval(s.cond,r,n);if(R(a))return a;if(ve(a),a.value)return ot(await this._evalClause(s.then,r,n),t.label)}return t.else?ot(await this._evalClause(t.else,r,n),t.label):H}case"match":{const i=await this._eval(t.about,r,n);if(R(i))return i;for(const s of t.qs){const a=await this._eval(s.q,r,n);if(R(a))return a;if(sr(i,a))return ot(await this._evalClause(s.a,r,n),t.label)}return t.default?ot(await this._evalClause(t.default,r,n),t.label):H}case"loop":{for(;;){const i=await this._run(t.statements,r.createChildScope(),n);if(i.type==="break"){if(i.label!=null&&i.label!==t.label)return i;break}else if(i.type==="continue"){if(i.label!=null&&i.label!==t.label)return i}else if(i.type==="return")return i}return H}case"for":{if(t.times){const i=await this._eval(t.times,r,n);if(R(i))return i;P(i);for(let s=0;s<i.value;s++){const a=await this._evalClause(t.for,r,n);if(a.type==="break"){if(a.label!=null&&a.label!==t.label)return a;break}else if(a.type==="continue"){if(a.label!=null&&a.label!==t.label)return a}else if(a.type==="return")return a}}else{const i=await this._eval(t.from,r,n);if(R(i))return i;const s=await this._eval(t.to,r,n);if(R(s))return s;P(i),P(s);for(let a=i.value;a<i.value+s.value;a++){const o=await this._eval(t.for,r.createChildScope(new Map([[t.var,{isMutable:!1,value:A(a)}]])),n);if(o.type==="break"){if(o.label!=null&&o.label!==t.label)return o;break}else if(o.type==="continue"){if(o.label!=null&&o.label!==t.label)return o}else if(o.type==="return")return o}}return H}case"each":{const i=await this._eval(t.items,r,n);if(R(i))return i;it(i);for(const s of i.value){const a=r.createChildScope();this.define(a,t.var,s,!1);const o=await this._eval(t.for,a,n);if(o.type==="break"){if(o.label!=null&&o.label!==t.label)return o;break}else if(o.type==="continue"){if(o.label!=null&&o.label!==t.label)return o}else if(o.type==="return")return o}return H}case"def":{const i=await this._eval(t.expr,r,n);if(R(i))return i;if(t.attr.length>0){const s=[];for(const a of t.attr){const o=await this._eval(a.value,r,n);Xt(o),s.push({name:a.name,value:o})}i.attr=s}return t.expr.type==="fn"&&t.dest.type==="identifier"&&rn(i)&&!i.native&&(i.name=t.dest.name),await this.define(r,t.dest,i,t.mut),H}case"identifier":return r.get(t.name);case"assign":{const i=await this.getReference(t.dest,r,n);if(R(i))return i;const s=await this._eval(t.expr,r,n);return R(s)?s:(i.set(s),H)}case"addAssign":{const i=await this.getReference(t.dest,r,n);if(R(i))return i;const s=await this._eval(t.expr,r,n);if(R(s))return s;P(s);const a=i.get();return P(a),i.set(A(a.value+s.value)),H}case"subAssign":{const i=await this.getReference(t.dest,r,n);if(R(i))return i;const s=await this._eval(t.expr,r,n);if(R(s))return s;P(s);const a=i.get();return P(a),i.set(A(a.value-s.value)),H}case"null":return H;case"bool":return _t(t.value);case"num":return A(t.value);case"str":return ie(t.value);case"arr":{const i=[];for(const s of t.value){const a=await this._eval(s,r,n);if(R(a))return a;i.push(a)}return fe(i)}case"obj":{const i=new Map;for(const[s,a]of t.value){const o=await this._eval(a,r,n);if(R(o))return o;i.set(s,o)}return ir(i)}case"prop":{const i=await this._eval(t.target,r,n);return R(i)?i:mr(i)?i.value.has(t.name)?i.value.get(t.name):H:Ks(i,t.name)}case"index":{const i=await this._eval(t.target,r,n);if(R(i))return i;const s=await this._eval(t.index,r,n);if(R(s))return s;if(rr(i)){P(s);const a=i.value[s.value];if(a===void 0)throw new gi(`Index out of range. index: ${s.value} max: ${i.value.length-1}`);return a}else{if(mr(i))return ce(s),i.value.has(s.value)?i.value.get(s.value):H;throw new J(`Cannot read prop (${$t(s)}) of ${i.type}.`)}}case"plus":{const i=await this._eval(t.expr,r,n);return R(i)||P(i),i}case"minus":{const i=await this._eval(t.expr,r,n);return R(i)?i:(P(i),A(-i.value))}case"not":{const i=await this._eval(t.expr,r,n);return R(i)?i:(ve(i),_t(!i.value))}case"fn":{const i=await Promise.all(t.params.map(async a=>({dest:a.dest,default:a.default?await this._eval(a.default,r,n):a.optional?H:void 0}))),s=i.map(a=>a.default).filter(a=>a!=null).find(R);return s??Is(i,t.children,r)}case"block":return ot(await this._run(t.statements,r.createChildScope(),n),t.label);case"exists":return _t(r.exists(t.identifier.name));case"tmpl":{let i="";for(const s of t.tmpl)if(typeof s=="string")i+=s;else{const a=await this._eval(s,r,n);if(R(a))return a;i+=$t(a)}return ie(i)}case"return":{const i=await this._eval(t.expr,r,n);return R(i)?i:(this.log("block:return",{scope:r.name,val:i}),Ds(i))}case"break":{let i;if(t.expr!=null){const s=await this._eval(t.expr,r,n);if(R(s))return s;i=s}return this.log("block:break",{scope:r.name}),Ls(t.label,i)}case"continue":return this.log("block:continue",{scope:r.name}),Hs(t.label);case"ns":return H;case"meta":return H;case"pow":return this._evalBinaryOperation("Core:pow",t.left,t.right,r,n);case"mul":return this._evalBinaryOperation("Core:mul",t.left,t.right,r,n);case"div":return this._evalBinaryOperation("Core:div",t.left,t.right,r,n);case"rem":return this._evalBinaryOperation("Core:mod",t.left,t.right,r,n);case"add":return this._evalBinaryOperation("Core:add",t.left,t.right,r,n);case"sub":return this._evalBinaryOperation("Core:sub",t.left,t.right,r,n);case"lt":return this._evalBinaryOperation("Core:lt",t.left,t.right,r,n);case"lteq":return this._evalBinaryOperation("Core:lteq",t.left,t.right,r,n);case"gt":return this._evalBinaryOperation("Core:gt",t.left,t.right,r,n);case"gteq":return this._evalBinaryOperation("Core:gteq",t.left,t.right,r,n);case"eq":return this._evalBinaryOperation("Core:eq",t.left,t.right,r,n);case"neq":return this._evalBinaryOperation("Core:neq",t.left,t.right,r,n);case"and":{const i=await this._eval(t.left,r,n);if(R(i))return i;if(ve(i),i.value){const s=await this._eval(t.right,r,n);return R(s)||ve(s),s}else return i}case"or":{const i=await this._eval(t.left,r,n);if(R(i)||(ve(i),i.value))return i;{const s=await this._eval(t.right,r,n);return R(s)||ve(s),s}}case"namedTypeSource":case"fnTypeSource":case"unionTypeSource":case"attr":throw new Error("invalid node type");default:throw new Error("invalid node type")}}__evalSync(t,r,n){if(this.stop)return H;if(this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new J("max step exceeded");switch(t.type){case"call":{const i=this._evalSync(t.target,r,n);if(R(i))return i;Pe(i);const s=[];for(const a of t.args){const o=this._evalSync(a,r,n);if(R(o))return o;s.push(o)}return this._fnSync(i,s,n,t.loc.start)}case"if":{const i=this._evalSync(t.cond,r,n);if(R(i))return i;if(ve(i),i.value)return ot(this._evalClauseSync(t.then,r,n),t.label);for(const s of t.elseif){const a=this._evalSync(s.cond,r,n);if(R(a))return a;if(ve(a),a.value)return ot(this._evalClauseSync(s.then,r,n),t.label)}return t.else?ot(this._evalClauseSync(t.else,r,n),t.label):H}case"match":{const i=this._evalSync(t.about,r,n);if(R(i))return i;for(const s of t.qs){const a=this._evalSync(s.q,r,n);if(R(a))return a;if(sr(i,a))return ot(this._evalClauseSync(s.a,r,n),t.label)}return t.default?ot(this._evalClauseSync(t.default,r,n),t.label):H}case"loop":{for(;;){const i=this._runSync(t.statements,r.createChildScope(),n);if(i.type==="break"){if(i.label!=null&&i.label!==t.label)return i;break}else if(i.type==="continue"){if(i.label!=null&&i.label!==t.label)return i}else if(i.type==="return")return i}return H}case"for":{if(t.times){const i=this._evalSync(t.times,r,n);if(R(i))return i;P(i);for(let s=0;s<i.value;s++){const a=this._evalClauseSync(t.for,r,n);if(a.type==="break"){if(a.label!=null&&a.label!==t.label)return a;break}else if(a.type==="continue"){if(a.label!=null&&a.label!==t.label)return a}else if(a.type==="return")return a}}else{const i=this._evalSync(t.from,r,n);if(R(i))return i;const s=this._evalSync(t.to,r,n);if(R(s))return s;P(i),P(s);for(let a=i.value;a<i.value+s.value;a++){const o=this._evalSync(t.for,r.createChildScope(new Map([[t.var,{isMutable:!1,value:A(a)}]])),n);if(o.type==="break"){if(o.label!=null&&o.label!==t.label)return o;break}else if(o.type==="continue"){if(o.label!=null&&o.label!==t.label)return o}else if(o.type==="return")return o}}return H}case"each":{const i=this._evalSync(t.items,r,n);if(R(i))return i;it(i);for(const s of i.value){const a=r.createChildScope();this.define(a,t.var,s,!1);const o=this._evalSync(t.for,a,n);if(o.type==="break"){if(o.label!=null&&o.label!==t.label)return o;break}else if(o.type==="continue"){if(o.label!=null&&o.label!==t.label)return o}else if(o.type==="return")return o}return H}case"def":{const i=this._evalSync(t.expr,r,n);if(R(i))return i;if(t.attr.length>0){const s=[];for(const a of t.attr){const o=this._evalSync(a.value,r,n);Xt(o),s.push({name:a.name,value:o})}i.attr=s}return t.expr.type==="fn"&&t.dest.type==="identifier"&&rn(i)&&!i.native&&(i.name=t.dest.name),this.defineSync(r,t.dest,i,t.mut),H}case"identifier":return r.get(t.name);case"assign":{const i=this.getReferenceSync(t.dest,r,n);if(R(i))return i;const s=this._evalSync(t.expr,r,n);return R(s)?s:(i.set(s),H)}case"addAssign":{const i=this.getReferenceSync(t.dest,r,n);if(R(i))return i;const s=this._evalSync(t.expr,r,n);if(R(s))return s;P(s);const a=i.get();return P(a),i.set(A(a.value+s.value)),H}case"subAssign":{const i=this.getReferenceSync(t.dest,r,n);if(R(i))return i;const s=this._evalSync(t.expr,r,n);if(R(s))return s;P(s);const a=i.get();return P(a),i.set(A(a.value-s.value)),H}case"null":return H;case"bool":return _t(t.value);case"num":return A(t.value);case"str":return ie(t.value);case"arr":{const i=[];for(const s of t.value){const a=this._evalSync(s,r,n);if(R(a))return a;i.push(a)}return fe(i)}case"obj":{const i=new Map;for(const[s,a]of t.value){const o=this._evalSync(a,r,n);if(R(o))return o;i.set(s,o)}return ir(i)}case"prop":{const i=this._evalSync(t.target,r,n);return R(i)?i:mr(i)?i.value.has(t.name)?i.value.get(t.name):H:Ks(i,t.name)}case"index":{const i=this._evalSync(t.target,r,n);if(R(i))return i;const s=this._evalSync(t.index,r,n);if(R(s))return s;if(rr(i)){P(s);const a=i.value[s.value];if(a===void 0)throw new gi(`Index out of range. index: ${s.value} max: ${i.value.length-1}`);return a}else{if(mr(i))return ce(s),i.value.has(s.value)?i.value.get(s.value):H;throw new J(`Cannot read prop (${$t(s)}) of ${i.type}.`)}}case"plus":{const i=this._evalSync(t.expr,r,n);return R(i)||P(i),i}case"minus":{const i=this._evalSync(t.expr,r,n);return R(i)?i:(P(i),A(-i.value))}case"not":{const i=this._evalSync(t.expr,r,n);return R(i)?i:(ve(i),_t(!i.value))}case"fn":{const i=t.params.map(a=>({dest:a.dest,default:a.default?this._evalSync(a.default,r,n):a.optional?H:void 0})),s=i.map(a=>a.default).filter(a=>a!=null).find(R);return s??Is(i,t.children,r)}case"block":return ot(this._runSync(t.statements,r.createChildScope(),n),t.label);case"exists":return _t(r.exists(t.identifier.name));case"tmpl":{let i="";for(const s of t.tmpl)if(typeof s=="string")i+=s;else{const a=this._evalSync(s,r,n);if(R(a))return a;i+=$t(a)}return ie(i)}case"return":{const i=this._evalSync(t.expr,r,n);return R(i)?i:(this.log("block:return",{scope:r.name,val:i}),Ds(i))}case"break":{let i;if(t.expr!=null){const s=this._evalSync(t.expr,r,n);if(R(s))return s;i=s}return this.log("block:break",{scope:r.name}),Ls(t.label,i)}case"continue":return this.log("block:continue",{scope:r.name}),Hs(t.label);case"ns":return H;case"meta":return H;case"pow":return this._evalBinaryOperationSync("Core:pow",t.left,t.right,r,n);case"mul":return this._evalBinaryOperationSync("Core:mul",t.left,t.right,r,n);case"div":return this._evalBinaryOperationSync("Core:div",t.left,t.right,r,n);case"rem":return this._evalBinaryOperationSync("Core:mod",t.left,t.right,r,n);case"add":return this._evalBinaryOperationSync("Core:add",t.left,t.right,r,n);case"sub":return this._evalBinaryOperationSync("Core:sub",t.left,t.right,r,n);case"lt":return this._evalBinaryOperationSync("Core:lt",t.left,t.right,r,n);case"lteq":return this._evalBinaryOperationSync("Core:lteq",t.left,t.right,r,n);case"gt":return this._evalBinaryOperationSync("Core:gt",t.left,t.right,r,n);case"gteq":return this._evalBinaryOperationSync("Core:gteq",t.left,t.right,r,n);case"eq":return this._evalBinaryOperationSync("Core:eq",t.left,t.right,r,n);case"neq":return this._evalBinaryOperationSync("Core:neq",t.left,t.right,r,n);case"and":{const i=this._evalSync(t.left,r,n);if(R(i))return i;if(ve(i),i.value){const s=this._evalSync(t.right,r,n);return R(s)||ve(s),s}else return i}case"or":{const i=this._evalSync(t.left,r,n);if(R(i)||(ve(i),i.value))return i;{const s=this._evalSync(t.right,r,n);return R(s)||ve(s),s}}case"namedTypeSource":case"fnTypeSource":case"unionTypeSource":case"attr":throw new Error("invalid node type");default:throw new Error("invalid node type")}}async _run(t,r,n){this.log("block:enter",{scope:r.name});let i=H;for(let s=0;s<t.length;s++){const a=t[s];if(i=await this._eval(a,r,n),i.type==="return")return this.log("block:return",{scope:r.name,val:i.value}),i;if(i.type==="break")return this.log("block:break",{scope:r.name}),i;if(i.type==="continue")return this.log("block:continue",{scope:r.name}),i}return this.log("block:leave",{scope:r.name,val:i}),i}_runSync(t,r,n){this.log("block:enter",{scope:r.name});let i=H;for(let s=0;s<t.length;s++){const a=t[s];if(i=this._evalSync(a,r,n),i.type==="return")return this.log("block:return",{scope:r.name,val:i.value}),i;if(i.type==="break")return this.log("block:break",{scope:r.name}),i;if(i.type==="continue")return this.log("block:continue",{scope:r.name}),i}return this.log("block:leave",{scope:r.name,val:i}),i}registerAbortHandler(t){this.abortHandlers.push(t)}registerPauseHandler(t){this.pauseHandlers.push(t)}registerUnpauseHandler(t){this.unpauseHandlers.push(t)}unregisterAbortHandler(t){this.abortHandlers=this.abortHandlers.filter(r=>r!==t)}unregisterPauseHandler(t){this.pauseHandlers=this.pauseHandlers.filter(r=>r!==t)}unregisterUnpauseHandler(t){this.unpauseHandlers=this.unpauseHandlers.filter(r=>r!==t)}abort(){this.stop=!0;for(const t of this.abortHandlers)t();this.abortHandlers=[]}pause(){if(this.pausing)return;let t;const r=new Promise(n=>{t=()=>n()});this.pausing={promise:r,resolve:t};for(const n of this.pauseHandlers)n();this.pauseHandlers=[]}unpause(){if(this.pausing){this.pausing.resolve(),this.pausing=null;for(const t of this.unpauseHandlers)t();this.unpauseHandlers=[]}}async define(t,r,n,i){switch(r.type){case"identifier":{t.add(r.name,{isMutable:i,value:n});break}case"arr":{it(n),await Promise.all(r.value.map((s,a)=>this.define(t,s,n.value[a]??H,i)));break}case"obj":{je(n),await Promise.all([...r.value].map(([s,a])=>this.define(t,a,n.value.get(s)??H,i)));break}default:throw new J("The left-hand side of an definition expression must be a variable.")}}defineSync(t,r,n,i){switch(r.type){case"identifier":{t.add(r.name,{isMutable:i,value:n});break}case"arr":{it(n),r.value.map((s,a)=>this.defineSync(t,s,n.value[a]??H,i));break}case"obj":{je(n),[...r.value].map(([s,a])=>this.defineSync(t,a,n.value.get(s)??H,i));break}default:throw new J("The left-hand side of an definition expression must be a variable.")}}async getReference(t,r,n){switch(t.type){case"identifier":return lt.variable(t.name,r);case"index":{const i=await this._eval(t.target,r,n);if(R(i))return i;const s=await this._eval(t.index,r,n);if(R(s))return s;if(rr(i))return P(s),lt.index(i,s.value);if(mr(i))return ce(s),lt.prop(i,s.value);throw new J(`Cannot read prop (${$t(s)}) of ${i.type}.`)}case"prop":{const i=await this._eval(t.target,r,n);return R(i)?i:(je(i),lt.prop(i,t.name))}case"arr":{const i=[];for(const s of t.value){const a=await this.getReference(s,r,n);if(R(a))return a;i.push(a)}return lt.arr(i)}case"obj":{const i=new Map;for(const[s,a]of t.value.entries()){const o=await this.getReference(a,r,n);if(R(o))return o;i.set(s,o)}return lt.obj(i)}default:throw new J("The left-hand side of an assignment expression must be a variable or a property/index access.")}}getReferenceSync(t,r,n){switch(t.type){case"identifier":return lt.variable(t.name,r);case"index":{const i=this._evalSync(t.target,r,n);if(R(i))return i;const s=this._evalSync(t.index,r,n);if(R(s))return s;if(rr(i))return P(s),lt.index(i,s.value);if(mr(i))return ce(s),lt.prop(i,s.value);throw new J(`Cannot read prop (${$t(s)}) of ${i.type}.`)}case"prop":{const i=this._evalSync(t.target,r,n);return R(i)?i:(je(i),lt.prop(i,t.name))}case"arr":{const i=[];for(const s of t.value){const a=this.getReferenceSync(s,r,n);if(R(a))return a;i.push(a)}return lt.arr(i)}case"obj":{const i=new Map;for(const[s,a]of t.value.entries()){const o=this.getReferenceSync(a,r,n);if(R(o))return o;i.set(s,o)}return lt.obj(i)}default:throw new J("The left-hand side of an assignment expression must be a variable or a property/index access.")}}}oe([X],ae.prototype,"exec",null);oe([X],ae.prototype,"execSync",null);oe([X],ae.prototype,"execFn",null);oe([X],ae.prototype,"execFnSync",null);oe([X],ae.prototype,"execFnSimple",null);oe([X],ae.prototype,"handleError",null);oe([X],ae.prototype,"log",null);oe([X],ae.prototype,"collectNs",null);oe([X],ae.prototype,"collectNsSync",null);oe([X],ae.prototype,"collectNsMember",null);oe([X],ae.prototype,"collectNsMemberSync",null);oe([X],ae.prototype,"_fn",null);oe([X],ae.prototype,"_fnSync",null);oe([X],ae.prototype,"_evalClause",null);oe([X],ae.prototype,"_evalClauseSync",null);oe([X],ae.prototype,"_evalBinaryOperation",null);oe([X],ae.prototype,"_evalBinaryOperationSync",null);oe([X],ae.prototype,"_eval",null);oe([X],ae.prototype,"_evalSync",null);oe([X],ae.prototype,"__eval",null);oe([X],ae.prototype,"__evalSync",null);oe([X],ae.prototype,"_run",null);oe([X],ae.prototype,"_runSync",null);oe([X],ae.prototype,"registerAbortHandler",null);oe([X],ae.prototype,"registerPauseHandler",null);oe([X],ae.prototype,"registerUnpauseHandler",null);oe([X],ae.prototype,"unregisterAbortHandler",null);oe([X],ae.prototype,"unregisterPauseHandler",null);oe([X],ae.prototype,"unregisterUnpauseHandler",null);oe([X],ae.prototype,"abort",null);oe([X],ae.prototype,"pause",null);oe([X],ae.prototype,"unpause",null);oe([X],ae.prototype,"define",null);oe([X],ae.prototype,"defineSync",null);oe([X],ae.prototype,"getReference",null);oe([X],ae.prototype,"getReferenceSync",null);oe([X],ae,"collectMetadata",null);class Vc{pages;firstPageIndex;lastPageIndex;pageIndex;address;_char;line;column;constructor(t,r){this.pages=new Map,this.pages.set(0,t),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=r?.line??0,this.column=r?.column??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const t=this.pages.get(this.pageIndex);return this.address>=t.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var u;(function(e){e[e.EOF=0]="EOF",e[e.NewLine=1]="NewLine",e[e.Identifier=2]="Identifier",e[e.NumberLiteral=3]="NumberLiteral",e[e.StringLiteral=4]="StringLiteral",e[e.Template=5]="Template",e[e.TemplateStringElement=6]="TemplateStringElement",e[e.TemplateExprElement=7]="TemplateExprElement",e[e.NullKeyword=8]="NullKeyword",e[e.TrueKeyword=9]="TrueKeyword",e[e.FalseKeyword=10]="FalseKeyword",e[e.EachKeyword=11]="EachKeyword",e[e.ForKeyword=12]="ForKeyword",e[e.LoopKeyword=13]="LoopKeyword",e[e.DoKeyword=14]="DoKeyword",e[e.WhileKeyword=15]="WhileKeyword",e[e.BreakKeyword=16]="BreakKeyword",e[e.ContinueKeyword=17]="ContinueKeyword",e[e.MatchKeyword=18]="MatchKeyword",e[e.CaseKeyword=19]="CaseKeyword",e[e.DefaultKeyword=20]="DefaultKeyword",e[e.IfKeyword=21]="IfKeyword",e[e.ElifKeyword=22]="ElifKeyword",e[e.ElseKeyword=23]="ElseKeyword",e[e.ReturnKeyword=24]="ReturnKeyword",e[e.EvalKeyword=25]="EvalKeyword",e[e.VarKeyword=26]="VarKeyword",e[e.LetKeyword=27]="LetKeyword",e[e.ExistsKeyword=28]="ExistsKeyword",e[e.Not=29]="Not",e[e.NotEq=30]="NotEq",e[e.Sharp=31]="Sharp",e[e.OpenSharpBracket=32]="OpenSharpBracket",e[e.Sharp3=33]="Sharp3",e[e.Percent=34]="Percent",e[e.And2=35]="And2",e[e.OpenParen=36]="OpenParen",e[e.CloseParen=37]="CloseParen",e[e.Asterisk=38]="Asterisk",e[e.Plus=39]="Plus",e[e.PlusEq=40]="PlusEq",e[e.Comma=41]="Comma",e[e.Minus=42]="Minus",e[e.MinusEq=43]="MinusEq",e[e.Dot=44]="Dot",e[e.Slash=45]="Slash",e[e.Colon=46]="Colon",e[e.Colon2=47]="Colon2",e[e.SemiColon=48]="SemiColon",e[e.Lt=49]="Lt",e[e.LtEq=50]="LtEq",e[e.Out=51]="Out",e[e.Eq=52]="Eq",e[e.Eq2=53]="Eq2",e[e.Arrow=54]="Arrow",e[e.Gt=55]="Gt",e[e.GtEq=56]="GtEq",e[e.Question=57]="Question",e[e.At=58]="At",e[e.OpenBracket=59]="OpenBracket",e[e.BackSlash=60]="BackSlash",e[e.CloseBracket=61]="CloseBracket",e[e.Hat=62]="Hat",e[e.OpenBrace=63]="OpenBrace",e[e.Or=64]="Or",e[e.Or2=65]="Or2",e[e.CloseBrace=66]="CloseBrace"})(u||(u={}));class Wc{kind;pos;hasLeftSpacing;value;children;constructor(t,r,n=!1,i,s){this.kind=t,this.pos=r,this.hasLeftSpacing=n,this.value=i,this.children=s}}function L(e,t,r){return new Wc(e,t,r?.hasLeftSpacing,r?.value,r?.children)}const zc=[u.NullKeyword,u.TrueKeyword,u.FalseKeyword,u.EachKeyword,u.ForKeyword,u.LoopKeyword,u.DoKeyword,u.WhileKeyword,u.BreakKeyword,u.ContinueKeyword,u.MatchKeyword,u.CaseKeyword,u.DefaultKeyword,u.IfKeyword,u.ElifKeyword,u.ElseKeyword,u.ReturnKeyword,u.EvalKeyword,u.VarKeyword,u.LetKeyword,u.ExistsKeyword];function Gc(e){return zc.includes(e)}function Yc(e){switch(e){case u.NullKeyword:return"null";case u.TrueKeyword:return"true";case u.FalseKeyword:return"false";case u.EachKeyword:return"each";case u.ForKeyword:return"for";case u.LoopKeyword:return"loop";case u.DoKeyword:return"do";case u.WhileKeyword:return"while";case u.BreakKeyword:return"break";case u.ContinueKeyword:return"continue";case u.MatchKeyword:return"match";case u.CaseKeyword:return"case";case u.DefaultKeyword:return"default";case u.IfKeyword:return"if";case u.ElifKeyword:return"elif";case u.ElseKeyword:return"else";case u.ReturnKeyword:return"return";case u.EvalKeyword:return"eval";case u.VarKeyword:return"var";case u.LetKeyword:return"let";case u.ExistsKeyword:return"exists";default:{const t=e;throw new TypeError(`Unknown keyword token kind ${t}`)}}}function U(e,t,r,n){const i={type:e};for(const s of Object.keys(t))t[s]!==void 0&&(i[s]=t[s]);return i.loc={start:r,end:n},i}function Jc(e,t,r,n){return U("call",{target:U("identifier",{name:e},r,r),args:t},r,n)}function At(e,t,r){return e===u.EOF?new Ke(t,r):new te(`unexpected token: ${u[e]}`,t,r)}const Zn=[" ","	"],qs=["\r",`
`],Vs=/^[0-9]$/,Zc=/^[A-Za-z0-9_]$/;class Xc{stream;_tokens=[];constructor(t){typeof t=="string"?this.stream=new Vc(t):this.stream=t,this._tokens.push(this.readToken())}getToken(){return this._tokens[0]}is(t){return this.getTokenKind()===t}getTokenKind(){return this.getToken().kind}getTokenValue(){return this.getToken().value}getPos(){return this.getToken().pos}next(){this._tokens[0].kind!==u.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(t){for(;this._tokens.length<=t;)this._tokens.push(this.readToken());return this._tokens[t]}expect(t){if(!this.is(t))throw At(this.getTokenKind(),this.getPos())}readToken(){let t=!1;for(;;){if(this.stream.eof)return L(u.EOF,this.stream.getPos(),{hasLeftSpacing:t});if(Zn.includes(this.stream.char)){this.stream.next(),t=!0;continue}const r=this.stream.getPos();if(qs.includes(this.stream.char))return this.skipEmptyLines(),L(u.NewLine,r,{hasLeftSpacing:t});switch(this.stream.char){case"!":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),L(u.NotEq,r,{hasLeftSpacing:t})):L(u.Not,r,{hasLeftSpacing:t});case'"':case"'":return this.readStringLiteral(t);case"#":if(this.stream.next(),!this.stream.eof&&this.stream.char==="#"){if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")return this.stream.next(),L(u.Sharp3,r,{hasLeftSpacing:t});throw new te('invalid sequence of characters: "##"',r)}else return!this.stream.eof&&this.stream.char==="["?(this.stream.next(),L(u.OpenSharpBracket,r,{hasLeftSpacing:t})):L(u.Sharp,r,{hasLeftSpacing:t});case"%":return this.stream.next(),L(u.Percent,r,{hasLeftSpacing:t});case"&":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="&")return this.stream.next(),L(u.And2,r,{hasLeftSpacing:t});throw new te('invalid character: "&"',r)}case"(":return this.stream.next(),L(u.OpenParen,r,{hasLeftSpacing:t});case")":return this.stream.next(),L(u.CloseParen,r,{hasLeftSpacing:t});case"*":return this.stream.next(),L(u.Asterisk,r,{hasLeftSpacing:t});case"+":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),L(u.PlusEq,r,{hasLeftSpacing:t})):L(u.Plus,r,{hasLeftSpacing:t});case",":return this.stream.next(),L(u.Comma,r,{hasLeftSpacing:t});case"-":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),L(u.MinusEq,r,{hasLeftSpacing:t})):L(u.Minus,r,{hasLeftSpacing:t});case".":return this.stream.next(),L(u.Dot,r,{hasLeftSpacing:t});case"/":if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else return L(u.Slash,r,{hasLeftSpacing:t});case":":return this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),L(u.Colon2,r,{hasLeftSpacing:t})):L(u.Colon,r,{hasLeftSpacing:t});case";":return this.stream.next(),L(u.SemiColon,r,{hasLeftSpacing:t});case"<":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),L(u.LtEq,r,{hasLeftSpacing:t})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),L(u.Out,r,{hasLeftSpacing:t})):L(u.Lt,r,{hasLeftSpacing:t});case"=":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),L(u.Eq2,r,{hasLeftSpacing:t})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),L(u.Arrow,r,{hasLeftSpacing:t})):L(u.Eq,r,{hasLeftSpacing:t});case">":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),L(u.GtEq,r,{hasLeftSpacing:t})):L(u.Gt,r,{hasLeftSpacing:t});case"?":return this.stream.next(),L(u.Question,r,{hasLeftSpacing:t});case"@":return this.stream.next(),L(u.At,r,{hasLeftSpacing:t});case"[":return this.stream.next(),L(u.OpenBracket,r,{hasLeftSpacing:t});case"\\":return this.stream.next(),L(u.BackSlash,r,{hasLeftSpacing:t});case"]":return this.stream.next(),L(u.CloseBracket,r,{hasLeftSpacing:t});case"^":return this.stream.next(),L(u.Hat,r,{hasLeftSpacing:t});case"`":return this.readTemplate(t);case"{":return this.stream.next(),L(u.OpenBrace,r,{hasLeftSpacing:t});case"|":return this.stream.next(),!this.stream.eof&&this.stream.char==="|"?(this.stream.next(),L(u.Or2,r,{hasLeftSpacing:t})):L(u.Or,r,{hasLeftSpacing:t});case"}":return this.stream.next(),L(u.CloseBrace,r,{hasLeftSpacing:t});default:{const n=this.tryReadDigits(t);if(n)return n;const i=this.tryReadWord(t);if(i)return i;throw new te(`invalid character: "${this.stream.char}"`,r)}}break}}tryReadWord(t){let r="";const n=this.stream.getPos();for(;!this.stream.eof&&Zc.test(this.stream.char);)r+=this.stream.char,this.stream.next();if(r.length!==0)switch(r){case"null":return L(u.NullKeyword,n,{hasLeftSpacing:t});case"true":return L(u.TrueKeyword,n,{hasLeftSpacing:t});case"false":return L(u.FalseKeyword,n,{hasLeftSpacing:t});case"each":return L(u.EachKeyword,n,{hasLeftSpacing:t});case"for":return L(u.ForKeyword,n,{hasLeftSpacing:t});case"loop":return L(u.LoopKeyword,n,{hasLeftSpacing:t});case"do":return L(u.DoKeyword,n,{hasLeftSpacing:t});case"while":return L(u.WhileKeyword,n,{hasLeftSpacing:t});case"break":return L(u.BreakKeyword,n,{hasLeftSpacing:t});case"continue":return L(u.ContinueKeyword,n,{hasLeftSpacing:t});case"match":return L(u.MatchKeyword,n,{hasLeftSpacing:t});case"case":return L(u.CaseKeyword,n,{hasLeftSpacing:t});case"default":return L(u.DefaultKeyword,n,{hasLeftSpacing:t});case"if":return L(u.IfKeyword,n,{hasLeftSpacing:t});case"elif":return L(u.ElifKeyword,n,{hasLeftSpacing:t});case"else":return L(u.ElseKeyword,n,{hasLeftSpacing:t});case"return":return L(u.ReturnKeyword,n,{hasLeftSpacing:t});case"eval":return L(u.EvalKeyword,n,{hasLeftSpacing:t});case"var":return L(u.VarKeyword,n,{hasLeftSpacing:t});case"let":return L(u.LetKeyword,n,{hasLeftSpacing:t});case"exists":return L(u.ExistsKeyword,n,{hasLeftSpacing:t});default:return L(u.Identifier,n,{hasLeftSpacing:t,value:r})}}tryReadDigits(t){let r="",n="";const i=this.stream.getPos();for(;!this.stream.eof&&Vs.test(this.stream.char);)r+=this.stream.char,this.stream.next();if(r.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&Vs.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new te("digit expected",i)}let s;return n.length>0?s=r+"."+n:s=r,L(u.NumberLiteral,i,{hasLeftSpacing:t,value:s})}readStringLiteral(t){let r="";const n=this.stream.char;let i="string";const s=this.stream.getPos();for(this.stream.next();i!=="finish";)switch(i){case"string":{if(this.stream.eof)throw new Ke(s);if(this.stream.char==="\\"){this.stream.next(),i="escape";break}if(this.stream.char===n){this.stream.next(),i="finish";break}r+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Ke(s);r+=this.stream.char,this.stream.next(),i="string";break}}return L(u.StringLiteral,s,{hasLeftSpacing:t,value:r})}readTemplate(t){const r=[];let n="",i=[],s="string",a=0;const o=this.stream.getPos();let l=o;for(this.stream.next();s!=="finish";)switch(s){case"string":{if(this.stream.eof)throw new Ke(o);if(this.stream.char==="\\"){this.stream.next(),s="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&r.push(L(u.TemplateStringElement,l,{hasLeftSpacing:t,value:n})),s="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(r.push(L(u.TemplateStringElement,l,{hasLeftSpacing:t,value:n})),n=""),l=this.stream.getPos(),s="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Ke(o);n+=this.stream.char,this.stream.next(),s="string";break}case"expr":{if(this.stream.eof)throw new Ke(o);if(Zn.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="{"&&a++,this.stream.char==="}"){if(a===0){r.push(L(u.TemplateExprElement,l,{hasLeftSpacing:t,children:i})),l=this.stream.getPos(),i.push(L(u.EOF,l)),i=[],s="string",this.stream.next();break}a--}const c=this.readToken();i.push(c);break}}return L(u.Template,o,{hasLeftSpacing:t,children:r})}skipEmptyLines(){for(;!this.stream.eof;){if(Zn.includes(this.stream.char)||qs.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="/")if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else{this.stream.prev();break}break}}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;;){if(this.stream.eof)throw new Ke(this.stream.getPos());if(this.stream.char==="*"){if(this.stream.next(),this.stream.eof)throw new Ke(this.stream.getPos());if(this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}class Qc{source;index;_token;constructor(t){this.source=t,this.index=0,this.load()}get eof(){return this.index>=this.source.length}getToken(){return this.eof?L(u.EOF,{line:-1,column:-1}):this._token}is(t){return this.getTokenKind()===t}getTokenValue(){return this.getToken().value}getTokenKind(){return this.getToken().kind}getPos(){return this.getToken().pos}next(){this.eof||this.index++,this.load()}lookahead(t){return this.index+t<this.source.length?this.source[this.index+t]:L(u.EOF,{line:-1,column:-1})}expect(t){if(!this.is(t))throw At(this.getTokenKind(),this.getPos())}load(){this.eof?this._token=L(u.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function lr(e){return ef(e)}function Yi(e){e.expect(u.Lt),e.next(),e.is(u.NewLine)&&e.next();const t=[Ws(e)];for(;Br(e)&&!e.is(u.Gt);){const r=Ws(e);t.push(r)}return e.expect(u.Gt),e.next(),t}function Ws(e){e.expect(u.Identifier);const t=e.getTokenValue();return e.next(),{name:t}}function ef(e){const t=e.getPos(),r=zs(e);if(!e.is(u.Or))return r;const n=[r];do e.next(),n.push(zs(e));while(e.is(u.Or));return U("unionTypeSource",{inners:n},t,e.getPos())}function zs(e){return e.is(u.At)?tf(e):rf(e)}function tf(e){const t=e.getPos();e.expect(u.At),e.next();let r;e.is(u.Lt)?r=Yi(e):r=[],e.expect(u.OpenParen),e.next();const n=[];for(;!e.is(u.CloseParen);){if(n.length>0)switch(e.getTokenKind()){case u.Comma:{e.next();break}case u.EOF:throw new Ke(e.getPos());default:throw new te("separator expected",e.getPos())}const s=lr(e);n.push(s)}e.expect(u.CloseParen),e.next(),e.expect(u.Arrow),e.next();const i=lr(e);return U("fnTypeSource",{typeParams:r,params:n,result:i},t,e.getPos())}function rf(e){const t=e.getPos();let r;e.is(u.Identifier)?(r=e.getTokenValue(),e.next()):(e.expect(u.NullKeyword),e.next(),r="null");let n;return e.is(u.Lt)&&(e.next(),n=lr(e),e.expect(u.Gt),e.next()),U("namedTypeSource",{name:r,inner:n},t,e.getPos())}function ye(e,t){return t?go(e,!0):Ji(e,0)}const Xn=[{opKind:"postfix",kind:u.OpenParen,bp:20},{opKind:"postfix",kind:u.OpenBracket,bp:20},{opKind:"infix",kind:u.Dot,lbp:18,rbp:19},{opKind:"infix",kind:u.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:u.Plus,bp:14},{opKind:"prefix",kind:u.Minus,bp:14},{opKind:"prefix",kind:u.Not,bp:14},{opKind:"infix",kind:u.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:u.Slash,lbp:12,rbp:13},{opKind:"infix",kind:u.Percent,lbp:12,rbp:13},{opKind:"infix",kind:u.Plus,lbp:10,rbp:11},{opKind:"infix",kind:u.Minus,lbp:10,rbp:11},{opKind:"infix",kind:u.Lt,lbp:8,rbp:9},{opKind:"infix",kind:u.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:u.Gt,lbp:8,rbp:9},{opKind:"infix",kind:u.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:u.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:u.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:u.And2,lbp:4,rbp:5},{opKind:"infix",kind:u.Or2,lbp:2,rbp:3}];function nf(e,t){const r=e.getPos(),n=e.getTokenKind();e.next(),e.is(u.BackSlash)&&(e.next(),e.expect(u.NewLine),e.next());const i=Ji(e,t),s=i.loc.end;switch(n){case u.Plus:return i.type==="num"?U("num",{value:i.value},r,s):U("plus",{expr:i},r,s);case u.Minus:return i.type==="num"?U("num",{value:-1*i.value},r,s):U("minus",{expr:i},r,s);case u.Not:return U("not",{expr:i},r,s);default:throw At(n,r)}}function sf(e,t,r){const n=e.getPos(),i=e.getTokenKind();if(e.next(),e.is(u.BackSlash)&&(e.next(),e.expect(u.NewLine),e.next()),i===u.Dot){e.expect(u.Identifier);const s=e.getTokenValue();return e.next(),U("prop",{target:t,name:s},n,e.getPos())}else{const s=Ji(e,r),a=e.getPos();switch(i){case u.Hat:return U("pow",{left:t,right:s},n,a);case u.Asterisk:return U("mul",{left:t,right:s},n,a);case u.Slash:return U("div",{left:t,right:s},n,a);case u.Percent:return U("rem",{left:t,right:s},n,a);case u.Plus:return U("add",{left:t,right:s},n,a);case u.Minus:return U("sub",{left:t,right:s},n,a);case u.Lt:return U("lt",{left:t,right:s},n,a);case u.LtEq:return U("lteq",{left:t,right:s},n,a);case u.Gt:return U("gt",{left:t,right:s},n,a);case u.GtEq:return U("gteq",{left:t,right:s},n,a);case u.Eq2:return U("eq",{left:t,right:s},n,a);case u.NotEq:return U("neq",{left:t,right:s},n,a);case u.And2:return U("and",{left:t,right:s},n,a);case u.Or2:return U("or",{left:t,right:s},n,a);default:throw At(i,n)}}}function af(e,t){const r=e.getPos(),n=e.getTokenKind();switch(n){case u.OpenParen:return of(e,t);case u.OpenBracket:{e.next();const i=ye(e,!1);return e.expect(u.CloseBracket),e.next(),U("index",{target:t,index:i},r,e.getPos())}default:throw At(n,r)}}function go(e,t){const r=e.getPos();switch(e.getTokenKind()){case u.IfKeyword:{if(t)break;return uf(e)}case u.At:{if(t)break;return cf(e)}case u.MatchKeyword:{if(t)break;return ff(e)}case u.EvalKeyword:{if(t)break;return hf(e)}case u.ExistsKeyword:{if(t)break;return pf(e)}case u.Template:{const n=[];if(t)break;for(const[i,s]of e.getToken().children.entries())switch(s.kind){case u.TemplateStringElement:{const a=e.getToken().children[i+1]??e.lookahead(1);n.push(U("str",{value:s.value},s.pos,a.pos));break}case u.TemplateExprElement:{const a=new Qc(s.children);a.is(u.NewLine)&&a.next();const o=ye(a,!1);a.is(u.NewLine)&&a.next(),a.expect(u.EOF),n.push(o);break}default:throw At(s.kind,s.pos)}return e.next(),U("tmpl",{tmpl:n},r,e.getPos())}case u.StringLiteral:{const n=e.getTokenValue();return e.next(),U("str",{value:n},r,e.getPos())}case u.NumberLiteral:{const n=Number(e.getTokenValue());return e.next(),U("num",{value:n},r,e.getPos())}case u.TrueKeyword:case u.FalseKeyword:{const n=e.is(u.TrueKeyword);return e.next(),U("bool",{value:n},r,e.getPos())}case u.NullKeyword:return e.next(),U("null",{},r,e.getPos());case u.OpenBrace:return df(e,t);case u.OpenBracket:return mf(e,t);case u.Identifier:{if(t)break;return mo(e)}case u.OpenParen:{e.next();const n=ye(e,t);return e.expect(u.CloseParen),e.next(),n}case u.Sharp:return lf(e)}throw At(e.getTokenKind(),r)}function of(e,t){const r=e.getPos(),n=[];for(e.expect(u.OpenParen),e.next(),e.is(u.NewLine)&&e.next();!e.is(u.CloseParen);)switch(n.push(ye(e,!1)),e.getTokenKind()){case u.NewLine:{e.next();break}case u.Comma:{e.next(),e.is(u.NewLine)&&e.next();break}case u.CloseParen:break;case u.EOF:throw new Ke(e.getPos());default:throw new te("separator expected",e.getPos())}return e.expect(u.CloseParen),e.next(),U("call",{target:t,args:n},r,e.getPos())}function lf(e){const t=In(e);e.expect(u.Colon),e.next();const r=ye(e,!1);switch(r.type){case"if":case"match":case"block":return r.label=t,r;default:throw new te("cannot use label for expression other than eval / if / match",r.loc.start)}}function uf(e){const t=e.getPos();e.expect(u.IfKeyword),e.next();const r=ye(e,!1),n=Et(e);e.is(u.NewLine)&&[u.ElifKeyword,u.ElseKeyword].includes(e.lookahead(1).kind)&&e.next();const i=[];for(;e.is(u.ElifKeyword);){e.next();const a=ye(e,!1),o=Et(e);e.is(u.NewLine)&&[u.ElifKeyword,u.ElseKeyword].includes(e.lookahead(1).kind)&&e.next(),i.push({cond:a,then:o})}let s;return e.is(u.ElseKeyword)&&(e.next(),s=Et(e)),U("if",{cond:r,then:n,elseif:i,else:s},t,e.getPos())}function cf(e){const t=e.getPos();e.expect(u.At),e.next();let r;e.is(u.Lt)?r=Yi(e):r=[];const n=yo(e);let i;e.is(u.Colon)&&(e.next(),i=lr(e));const s=Jr(e);return U("fn",{typeParams:r,params:n,retType:i,children:s},t,e.getPos())}function ff(e){const t=e.getPos();e.expect(u.MatchKeyword),e.next();const r=ye(e,!1);e.expect(u.OpenBrace),e.next(),e.is(u.NewLine)&&e.next();const n=[];let i;if(e.is(u.CaseKeyword)){n.push(Gs(e));let s=Br(e);for(;e.is(u.CaseKeyword);){if(!s)throw new te("separator expected",e.getPos());n.push(Gs(e)),s=Br(e)}if(e.is(u.DefaultKeyword)){if(!s)throw new te("separator expected",e.getPos());i=Ys(e),Br(e)}}else e.is(u.DefaultKeyword)&&(i=Ys(e),Br(e));return e.expect(u.CloseBrace),e.next(),U("match",{about:r,qs:n,default:i},t,e.getPos())}function Gs(e){e.expect(u.CaseKeyword),e.next();const t=ye(e,!1);e.expect(u.Arrow),e.next();const r=Et(e);return{q:t,a:r}}function Ys(e){return e.expect(u.DefaultKeyword),e.next(),e.expect(u.Arrow),e.next(),Et(e)}function hf(e){const t=e.getPos();e.expect(u.EvalKeyword),e.next();const r=Jr(e);return U("block",{statements:r},t,e.getPos())}function pf(e){const t=e.getPos();e.expect(u.ExistsKeyword),e.next();const r=mo(e);return U("exists",{identifier:r},t,e.getPos())}function mo(e){const t=e.getPos(),r=[];for(;;){if(r.length>0)if(e.is(u.Colon)){if(e.getToken().hasLeftSpacing)throw new te("Cannot use spaces in a reference.",e.getPos());if(e.next(),e.getToken().hasLeftSpacing)throw new te("Cannot use spaces in a reference.",e.getPos())}else break;e.expect(u.Identifier),r.push(e.getTokenValue()),e.next()}return U("identifier",{name:r.join(":")},t,e.getPos())}function df(e,t){const r=e.getPos();for(e.expect(u.OpenBrace),e.next();e.is(u.NewLine);)e.next();const n=new Map;for(;!e.is(u.CloseBrace);){const i=gf(e);e.next(),e.expect(u.Colon),e.next();const s=ye(e,t);switch(n.set(i,s),e.getTokenKind()){case u.NewLine:case u.Comma:{for(e.next();e.is(u.NewLine);)e.next();break}case u.CloseBrace:break;case u.EOF:throw new Ke(e.getPos());default:throw new te("separator expected",e.getPos())}}return e.expect(u.CloseBrace),e.next(),U("obj",{value:n},r,e.getPos())}function gf(e){const t=e.getTokenKind();if(t===u.Identifier||t===u.StringLiteral)return e.getTokenValue();if(Gc(t))return Yc(t);throw At(t,e.getPos())}function mf(e,t){const r=e.getPos();for(e.expect(u.OpenBracket),e.next();e.is(u.NewLine);)e.next();const n=[];for(;!e.is(u.CloseBracket);)switch(n.push(ye(e,t)),e.getTokenKind()){case u.NewLine:case u.Comma:{for(e.next();e.is(u.NewLine);)e.next();break}case u.CloseBracket:break;case u.EOF:throw new Ke(e.getPos());default:throw new te("separator expected",e.getPos())}return e.expect(u.CloseBracket),e.next(),U("arr",{value:n},r,e.getPos())}function Ji(e,t){let r;const n=e.getTokenKind(),i=Xn.find(s=>s.opKind==="prefix"&&s.kind===n);for(i!=null?r=nf(e,i.bp):r=go(e,!1);;){e.is(u.BackSlash)&&(e.next(),e.expect(u.NewLine),e.next());const s=e.getTokenKind(),a=Xn.find(l=>l.opKind==="postfix"&&l.kind===s);if(a!=null){if(a.bp<t)break;if(!([u.OpenBracket,u.OpenParen].includes(s)&&e.getToken().hasLeftSpacing)){r=af(e,r);continue}}const o=Xn.find(l=>l.opKind==="infix"&&l.kind===s);if(o!=null){if(o.lbp<t)break;r=sf(e,r,o.rbp);continue}break}return r}function Zi(e){if(e.is(u.Identifier)){const t=e.getPos(),r=e.getTokenValue();return e.next(),U("identifier",{name:r},t,e.getPos())}else return ye(e,!1)}function yo(e){const t=[];for(e.expect(u.OpenParen),e.next(),e.is(u.NewLine)&&e.next();!e.is(u.CloseParen);){const r=Zi(e);let n=!1,i;e.is(u.Question)?(e.next(),n=!0):e.is(u.Eq)&&(e.next(),i=ye(e,!1));let s;switch(e.is(u.Colon)&&(e.next(),s=lr(e)),t.push({dest:r,optional:n,default:i,argType:s}),e.getTokenKind()){case u.NewLine:{e.next();break}case u.Comma:{e.next(),e.is(u.NewLine)&&e.next();break}case u.CloseParen:break;case u.EOF:throw new Ke(e.getPos());default:throw new te("separator expected",e.getPos())}}return e.expect(u.CloseParen),e.next(),t}function Jr(e){for(e.expect(u.OpenBrace),e.next();e.is(u.NewLine);)e.next();const t=[];for(;!e.is(u.CloseBrace);)switch(t.push(Zr(e)),e.getTokenKind()){case u.NewLine:case u.SemiColon:{for(;e.is(u.NewLine)||e.is(u.SemiColon);)e.next();break}case u.CloseBrace:break;case u.EOF:throw new Ke(e.getPos());default:throw new te("Multiple statements cannot be placed on a single line.",e.getPos())}return e.expect(u.CloseBrace),e.next(),t}function In(e){if(e.expect(u.Sharp),e.next(),e.getToken().hasLeftSpacing)throw new te("cannot use spaces in a label",e.getPos());e.expect(u.Identifier);const t=e.getTokenValue();return e.next(),t}function Br(e){switch(e.getTokenKind()){case u.NewLine:return e.next(),!0;case u.Comma:return e.next(),e.is(u.NewLine)&&e.next(),!0;default:return!1}}function Zr(e){switch(e.getPos(),e.getTokenKind()){case u.VarKeyword:case u.LetKeyword:return vo(e);case u.At:{if(e.lookahead(1).kind===u.Identifier)return wo(e);break}case u.Out:return vf(e);case u.ReturnKeyword:return _f(e);case u.OpenSharpBracket:return bo(e);case u.Sharp:return wf(e);case u.EachKeyword:return bf(e);case u.ForKeyword:return xf(e);case u.LoopKeyword:return Ef(e);case u.DoKeyword:return Pf(e);case u.WhileKeyword:return Sf(e);case u.BreakKeyword:return Af(e);case u.ContinueKeyword:return Ff(e)}const t=ye(e,!1),r=Mf(e,t);return r||t}function yf(e){switch(e.getTokenKind()){case u.VarKeyword:case u.LetKeyword:return vo(e);case u.At:return wo(e);default:throw At(e.getTokenKind(),e.getPos())}}function Et(e){if(e.is(u.OpenBrace)){const t=e.getPos(),r=Jr(e);return U("block",{statements:r},t,e.getPos())}else return Zr(e)}function vo(e){const t=e.getPos();let r;switch(e.getTokenKind()){case u.LetKeyword:{r=!1;break}case u.VarKeyword:{r=!0;break}default:throw At(e.getTokenKind(),e.getPos())}e.next();const n=Zi(e);let i;e.is(u.Colon)&&(e.next(),i=lr(e)),e.expect(u.Eq),e.next(),e.is(u.NewLine)&&e.next();const s=ye(e,!1);return U("def",{dest:n,varType:i,expr:s,mut:r,attr:[]},t,e.getPos())}function wo(e){const t=e.getPos();e.expect(u.At),e.next(),e.expect(u.Identifier);const r=e.getPos(),n=e.getTokenValue();e.next();const i=U("identifier",{name:n},r,e.getPos());let s;e.is(u.Lt)?s=Yi(e):s=[];const a=yo(e);let o;e.is(u.Colon)&&(e.next(),o=lr(e));const l=Jr(e),c=e.getPos();return U("def",{dest:i,expr:U("fn",{typeParams:s,params:a,retType:o,children:l},t,c),mut:!1,attr:[]},t,c)}function vf(e){const t=e.getPos();e.expect(u.Out),e.next();const r=ye(e,!1);return Jc("print",[r],t,e.getPos())}function wf(e){const t=In(e);e.expect(u.Colon),e.next();const r=Zr(e);switch(r.type){case"if":case"match":case"block":case"each":case"for":case"loop":return r.label=t,r;default:throw new te("cannot use label for statement other than eval / if / match / for / each / while / do-while / loop",r.loc.start)}}function bf(e){const t=e.getPos();let r=!1;e.expect(u.EachKeyword),e.next(),e.is(u.OpenParen)&&(r=!0,e.next()),e.expect(u.LetKeyword),e.next();const n=Zi(e);if(e.is(u.Comma))e.next();else throw new te("separator expected",e.getPos());const i=ye(e,!1);r&&(e.expect(u.CloseParen),e.next());const s=Et(e);return U("each",{var:n,items:i,for:s},t,e.getPos())}function xf(e){const t=e.getPos();let r=!1;if(e.expect(u.ForKeyword),e.next(),e.is(u.OpenParen)&&(r=!0,e.next()),e.is(u.LetKeyword)){e.next();const n=e.getPos();e.expect(u.Identifier);const i=e.getTokenValue();e.next();let s;if(e.is(u.Eq)?(e.next(),s=ye(e,!1)):s=U("num",{value:0},n,n),e.is(u.Comma))e.next();else throw new te("separator expected",e.getPos());const a=ye(e,!1);r&&(e.expect(u.CloseParen),e.next());const o=Et(e);return U("for",{var:i,from:s,to:a,for:o},t,e.getPos())}else{const n=ye(e,!1);r&&(e.expect(u.CloseParen),e.next());const i=Et(e);return U("for",{times:n,for:i},t,e.getPos())}}function _f(e){const t=e.getPos();e.expect(u.ReturnKeyword),e.next();const r=ye(e,!1);return U("return",{expr:r},t,e.getPos())}function bo(e){const t=[];for(;e.is(u.OpenSharpBracket);)t.push(Cf(e)),e.expect(u.NewLine),e.next();const r=Zr(e);if(r.type!=="def")throw new te("invalid attribute.",r.loc.start);return r.attr!=null?r.attr.push(...t):r.attr=t,r}function Cf(e){const t=e.getPos();e.expect(u.OpenSharpBracket),e.next(),e.expect(u.Identifier);const r=e.getTokenValue();e.next();let n;if(!e.is(u.CloseBracket))n=ye(e,!0);else{const i=e.getPos();n=U("bool",{value:!0},i,i)}return e.expect(u.CloseBracket),e.next(),U("attr",{name:r,value:n},t,e.getPos())}function Ef(e){const t=e.getPos();e.expect(u.LoopKeyword),e.next();const r=Jr(e);return U("loop",{statements:r},t,e.getPos())}function Pf(e){const t=e.getPos();e.expect(u.DoKeyword),e.next();const r=Et(e),n=e.getPos();e.expect(u.WhileKeyword),e.next();const i=ye(e,!1),s=e.getPos();return U("loop",{statements:[r,U("if",{cond:U("not",{expr:i},n,s),then:U("break",{},s,s),elseif:[]},n,s)]},t,s)}function Sf(e){const t=e.getPos();e.expect(u.WhileKeyword),e.next();const r=ye(e,!1),n=e.getPos(),i=Et(e);return U("loop",{statements:[U("if",{cond:U("not",{expr:r},t,n),then:U("break",{},n,n),elseif:[]},t,n),i]},t,e.getPos())}function Af(e){const t=e.getPos();e.expect(u.BreakKeyword),e.next();let r,n;if(e.is(u.Sharp)){if(r=In(e),e.is(u.Colon))throw new te("cannot omit label from break if expression is given",t);Of(e)||(n=ye(e,!1))}return U("break",{label:r,expr:n},t,e.getPos())}function Ff(e){const t=e.getPos();e.expect(u.ContinueKeyword),e.next();let r;return e.is(u.Sharp)&&(r=In(e)),U("continue",{label:r},t,e.getPos())}function Mf(e,t){const r=e.getPos();switch(e.getTokenKind()){case u.Eq:{e.next();const n=ye(e,!1);return U("assign",{dest:t,expr:n},r,e.getPos())}case u.PlusEq:{e.next();const n=ye(e,!1);return U("addAssign",{dest:t,expr:n},r,e.getPos())}case u.MinusEq:{e.next();const n=ye(e,!1);return U("subAssign",{dest:t,expr:n},r,e.getPos())}default:return}}function Of(e){switch(e.getTokenKind()){case u.EOF:case u.NewLine:case u.WhileKeyword:case u.ElifKeyword:case u.ElseKeyword:case u.Comma:case u.SemiColon:case u.CloseBrace:return!0;default:return!1}}function kf(e){const t=[];for(;e.is(u.NewLine);)e.next();for(;!e.is(u.EOF);){switch(e.getTokenKind()){case u.Colon2:{t.push(xo(e));break}case u.Sharp3:{t.push($f(e));break}default:{t.push(Zr(e));break}}switch(e.getTokenKind()){case u.NewLine:case u.SemiColon:{for(;e.is(u.NewLine)||e.is(u.SemiColon);)e.next();break}case u.EOF:break;default:throw new te("Multiple statements cannot be placed on a single line.",e.getPos())}}return t}function xo(e){const t=e.getPos();e.expect(u.Colon2),e.next(),e.expect(u.Identifier);const r=e.getTokenValue();e.next();const n=[];for(e.expect(u.OpenBrace),e.next();e.is(u.NewLine);)e.next();for(;!e.is(u.CloseBrace);){switch(e.getTokenKind()){case u.VarKeyword:case u.LetKeyword:case u.At:{n.push(yf(e));break}case u.Colon2:{n.push(xo(e));break}case u.OpenSharpBracket:{n.push(bo(e));break}}switch(e.getTokenKind()){case u.NewLine:case u.SemiColon:{for(;e.is(u.NewLine)||e.is(u.SemiColon);)e.next();break}case u.CloseBrace:break;case u.EOF:throw new Ke(e.getPos());default:throw new te("Multiple statements cannot be placed on a single line.",e.getPos())}}return e.expect(u.CloseBrace),e.next(),U("ns",{name:r,members:n},t,e.getPos())}function $f(e){const t=e.getPos();e.expect(u.Sharp3),e.next();let r=null;e.is(u.Identifier)&&(r=e.getTokenValue(),e.next());const n=ye(e,!0);return U("meta",{name:r,value:n},t,n.loc.end)}function Rn(e,t){return ee(e,t,[])}function ee(e,t,r){const n=t(e,r);switch(r.push(e),n.type){case"def":{n.varType!=null&&(n.varType=ee(n.varType,t,r)),n.attr=n.attr.map(i=>ee(i,t,r)),n.expr=ee(n.expr,t,r);break}case"return":{n.expr=ee(n.expr,t,r);break}case"each":{n.items=ee(n.items,t,r),n.for=ee(n.for,t,r);break}case"for":{n.from!=null&&(n.from=ee(n.from,t,r)),n.to!=null&&(n.to=ee(n.to,t,r)),n.times!=null&&(n.times=ee(n.times,t,r)),n.for=ee(n.for,t,r);break}case"loop":{for(let i=0;i<n.statements.length;i++)n.statements[i]=ee(n.statements[i],t,r);break}case"addAssign":case"subAssign":case"assign":{n.expr=ee(n.expr,t,r),n.dest=ee(n.dest,t,r);break}case"plus":{n.expr=ee(n.expr,t,r);break}case"minus":{n.expr=ee(n.expr,t,r);break}case"not":{n.expr=ee(n.expr,t,r);break}case"if":{n.cond=ee(n.cond,t,r),n.then=ee(n.then,t,r);for(const i of n.elseif)i.cond=ee(i.cond,t,r),i.then=ee(i.then,t,r);n.else!=null&&(n.else=ee(n.else,t,r));break}case"fn":{for(const i of n.params)i.default&&(i.default=ee(i.default,t,r)),i.argType!=null&&(i.argType=ee(i.argType,t,r));n.retType!=null&&(n.retType=ee(n.retType,t,r));for(let i=0;i<n.children.length;i++)n.children[i]=ee(n.children[i],t,r);break}case"match":{n.about=ee(n.about,t,r);for(const i of n.qs)i.q=ee(i.q,t,r),i.a=ee(i.a,t,r);n.default!=null&&(n.default=ee(n.default,t,r));break}case"block":{for(let i=0;i<n.statements.length;i++)n.statements[i]=ee(n.statements[i],t,r);break}case"exists":{n.identifier=ee(n.identifier,t,r);break}case"tmpl":{for(let i=0;i<n.tmpl.length;i++){const s=n.tmpl[i];typeof s!="string"&&(n.tmpl[i]=ee(s,t,r))}break}case"obj":{for(const i of n.value)n.value.set(i[0],ee(i[1],t,r));break}case"arr":{for(let i=0;i<n.value.length;i++)n.value[i]=ee(n.value[i],t,r);break}case"call":{n.target=ee(n.target,t,r);for(let i=0;i<n.args.length;i++)n.args[i]=ee(n.args[i],t,r);break}case"index":{n.target=ee(n.target,t,r),n.index=ee(n.index,t,r);break}case"prop":{n.target=ee(n.target,t,r);break}case"ns":{for(let i=0;i<n.members.length;i++)n.members[i]=ee(n.members[i],t,r);break}case"pow":case"mul":case"div":case"rem":case"add":case"sub":case"lt":case"lteq":case"gt":case"gteq":case"eq":case"neq":case"and":case"or":{n.left=ee(n.left,t,r),n.right=ee(n.right,t,r);break}case"fnTypeSource":{for(let i=0;i<n.params.length;i++)n.params[i]=ee(n.params[i],t,r);break}case"unionTypeSource":{for(let i=0;i<n.inners.length;i++)n.inners[i]=ee(n.inners[i],t,r);break}}return r.pop(),n}function Js(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];switch(n.type){case"loop":case"for":case"each":{if(t!=null&&t!==n.label)continue;return n}case"if":case"match":case"block":{if(t==null||t!==n.label)continue;return n}case"fn":return}}}function Bf(e,t){switch(e.type){case"return":{if(!t.some(({type:r})=>r==="fn"))throw new te("return must be inside function",e.loc.start);break}case"break":{const r=Js(t,e.label);if(r==null)throw e.label!=null?new te(`label "${e.label}" is not defined`,e.loc.start):new te("unlabeled break must be inside for / each / while / do-while / loop",e.loc.start);switch(r.type){case"each":{if(t.includes(r.items))throw new te("break corresponding to each is not allowed in the target",e.loc.start);break}case"for":{if(r.times!=null&&t.includes(r.times))throw new te("break corresponding to for is not allowed in the count",e.loc.start);if(t.some(n=>n===r.from||n===r.to))throw new te("break corresponding to for is not allowed in the range",e.loc.start);break}case"if":{if(t.includes(r.cond)||r.elseif.some(({cond:n})=>t.includes(n)))throw new te("break corresponding to if is not allowed in the condition",e.loc.start);break}case"match":{if(t.includes(r.about))throw new te("break corresponding to match is not allowed in the target",e.loc.start);if(r.qs.some(({q:n})=>t.includes(n)))throw new te("break corresponding to match is not allowed in the pattern",e.loc.start);break}}if(e.expr!=null)switch(r.type){case"if":case"match":case"block":break;default:throw new te("break corresponding to statement cannot include value",e.loc.start)}break}case"continue":{const r=Js(t,e.label);if(r==null)throw e.label!=null?new te(`label "${e.label}" is not defined`,e.loc.start):new te("continue must be inside for / each / while / do-while / loop",e.loc.start);switch(r.type){case"each":{if(t.includes(r.items))throw new te("continue corresponding to each is not allowed in the target",e.loc.start);break}case"for":{if(r.times!=null&&t.includes(r.times))throw new te("continue corresponding to for is not allowed in the count",e.loc.start);if(t.some(n=>n===r.from||n===r.to))throw new te("continue corresponding to for is not allowed in the range",e.loc.start);break}case"if":throw new te("cannot use continue for if",e.loc.start);case"match":throw new te("cannot use continue for match",e.loc.start);case"block":throw new te("cannot use continue for eval",e.loc.start)}break}}return e}function Tf(e){for(const t of e)Rn(t,Bf);return e}const ut=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","yield","import","is","meta","module","namespace","new"];function ze(e,t){throw new te(`Reserved word "${e}" cannot be used as variable name.`,t.start)}function Qn(e){return Rn(e,t=>{switch(t.type){case"null":{ze(t.type,t.loc);break}case"bool":{ze(`${t.value}`,t.loc);break}case"identifier":{ut.includes(t.name)&&ze(t.name,t.loc);break}}return t})}function Zs(e){for(const t of e.typeParams)ut.includes(t.name)&&ze(t.name,e.loc)}function If(e){switch(e.type){case"def":{Qn(e.dest);break}case"ns":case"attr":case"identifier":case"prop":{ut.includes(e.name)&&ze(e.name,e.loc);break}case"meta":{e.name!=null&&ut.includes(e.name)&&ze(e.name,e.loc);break}case"each":{e.label!=null&&ut.includes(e.label)&&ze(e.label,e.loc),Qn(e.var);break}case"for":{e.label!=null&&ut.includes(e.label)&&ze(e.label,e.loc),e.var!=null&&ut.includes(e.var)&&ze(e.var,e.loc);break}case"loop":{e.label!=null&&ut.includes(e.label)&&ze(e.label,e.loc);break}case"break":{e.label!=null&&ut.includes(e.label)&&ze(e.label,e.loc);break}case"continue":{e.label!=null&&ut.includes(e.label)&&ze(e.label,e.loc);break}case"fn":{Zs(e);for(const t of e.params)Qn(t.dest);break}case"obj":{for(const t of e.value.keys())ut.includes(t)&&ze(t,e.loc);break}case"namedTypeSource":{ut.includes(e.name)&&ze(e.name,e.loc);break}case"fnTypeSource":{Zs(e);break}}return e}function Rf(e){for(const t of e)Rn(t,If);return e}function Xs(e){return{type:"simple",name:e}}function Nf(e,t){return{type:"generic",name:e,inners:t}}function Df(e,t){return{type:"fn",params:e,result:t}}function Lf(e){return{type:"param",name:e}}function Hf(e){return{type:"union",inners:e}}function dn(e){switch(e.type){case"namedTypeSource":if(e.inner){const t=dn(e.inner);return`${e.name}<${t}>`}else return e.name;case"fnTypeSource":{const t=e.params.map(n=>dn(n)).join(", "),r=dn(e.result);return`@(${t}) { ${r} }`}case"unionTypeSource":return e.inners.map(t=>Ut(t)).join(" | ")}}function Ut(e,t){if(e.type==="namedTypeSource"){const r=t?.find(n=>n.name===e.name);if(r!=null)return Lf(r.name);switch(e.name){case"null":case"bool":case"num":case"str":case"error":case"never":case"any":case"void":{if(e.inner==null)return Xs(e.name);break}case"arr":case"obj":{let n;return e.inner!=null?n=Ut(e.inner,t):n=Xs("any"),Nf(e.name,[n])}}throw new te(`Unknown type: '${dn(e)}'`,e.loc.start)}else if(e.type==="fnTypeSource"){let r=e.typeParams;t!=null&&(r=r.concat(t));const n=e.params.map(i=>Ut(i,r));return Df(n,Ut(e.result,r))}else{const r=e.inners.map(n=>Ut(n,t));return Hf(r)}}function ei(e,t){const r=[];if(e.type==="fn"){const n=new Set;for(const i of e.typeParams){if(n.has(i.name))throw new Error(`type parameter name ${i.name} is duplicate`);n.add(i.name)}r.push(...e.typeParams)}for(let n=t.length-1;n>=0;n--){const i=t[n];i.type==="fn"&&r.push(...i.typeParams)}return r}function Uf(e,t){switch(e.type){case"def":{e.varType!=null&&Ut(e.varType,ei(e,t));break}case"fn":{for(const r of e.params)r.argType!=null&&Ut(r.argType,ei(e,t));e.retType!=null&&Ut(e.retType,ei(e,t));break}}return e}function jf(e){for(const t of e)Rn(t,Uf);return e}class br{static instance;plugins;constructor(){this.plugins={validate:[Rf,jf,Tf],transform:[]}}static parse(t){return br.instance==null&&(br.instance=new br),br.instance.parse(t)}addPlugin(t,r){switch(t){case"validate":this.plugins.validate.push(r);break;case"transform":this.plugins.transform.push(r);break;default:throw new Error("unknown plugin type")}}parse(t){let r;const n=new Xc(t);r=kf(n);for(const i of this.plugins.validate)r=i(r);for(const i of this.plugins.transform)r=i(r);return r}}function Hr(){return Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hr.apply(this,arguments)}var Kf=13,qf=9,Vf=8,Wf=89,on=90,zf=77,Qs=57,ea=219,ta=222,ra=192,Gf=27,na=100,Yf=3e3,Jf=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),ti=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Zf=yl({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(t){t?this.codeData=t:this.codeData=""}},content:{immediate:!0,handler:function(){var t=this;this.lineNumbers&&this.$nextTick(function(){t.setLineNumbersHeight()})}},lineNumbers:function(){var t=this;this.$nextTick(function(){t.styleLineNumbers(),t.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var t=this.highlight(this.codeData)+"<br />";return t},lineNumbersCount:function(){var t=this.codeData.split(/\r\n|\n/).length;return t}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var t=this.$refs.pre,r=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(t);this.$nextTick(function(){var i="border-top-left-radius",s="border-bottom-left-radius";if(r){r.style[i]=n[i],r.style[s]=n[s],t.style[i]="0",t.style[s]="0";var a=["background-color","margin-top","padding-top","font-family","font-size","line-height"];a.forEach(function(o){r.style[o]=n[o]}),r.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var t=this.$refs.textarea;if(t){var r=t.value,n=t.selectionStart,i=t.selectionEnd;this._recordChange({value:r,selectionStart:n,selectionEnd:i})}},_getLines:function(t,r){return t.substring(0,r).split(`
`)},_applyEdits:function(t){var r=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&r&&(this.history.stack[this.history.offset]=Hr({},n,{selectionStart:r.selectionStart,selectionEnd:r.selectionEnd})),this._recordChange(t),this._updateInput(t)},_recordChange:function(t,r){r===void 0&&(r=!1);var n=this.history,i=n.stack,s=n.offset;if(i.length&&s>-1){this.history.stack=i.slice(0,s+1);var a=this.history.stack.length;if(a>na){var o=a-na;this.history.stack=i.slice(o,a),this.history.offset=Math.max(this.history.offset-o,0)}}var l=Date.now();if(r){var c=this.history.stack[this.history.offset];if(c&&l-c.timestamp<Yf){var f,h,y=/[^a-z0-9]([a-z0-9]+)$/i,x=(f=this._getLines(c.value,c.selectionStart).pop())===null||f===void 0?void 0:f.match(y),M=(h=this._getLines(t.value,t.selectionStart).pop())===null||h===void 0?void 0:h.match(y);if(x&&M&&M[1].startsWith(x[1])){this.history.stack[this.history.offset]=Hr({},t,{timestamp:l});return}}}this.history.stack.push(Hr({},t,{timestamp:l})),this.history.offset++},_updateInput:function(t){var r=this.$refs.textarea;r&&(r.value=t.value,r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd,this.$emit("update:modelValue",t.value))},handleChange:function(t){var r=t.target,n=r.value,i=r.selectionStart,s=r.selectionEnd;this._recordChange({value:n,selectionStart:i,selectionEnd:s},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var t=this.history,r=t.stack,n=t.offset,i=r[n-1];i&&(this._updateInput(i),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var t=this.history,r=t.stack,n=t.offset,i=r[n+1];i&&(this._updateInput(i),this.history.offset=Math.min(n+1,r.length-1))},handleKeyDown:function(t){var r=this.tabSize,n=this.insertSpaces,i=this.ignoreTabKey;if(this.$emit("keydown",t),!t.defaultPrevented){t.keyCode===Gf&&(t.target.blur(),this.$emit("blur",t));var s=t.target,a=s.value,o=s.selectionStart,l=s.selectionEnd,c=(n?" ":"	").repeat(r);if(t.keyCode===qf&&!i&&this.capture)if(t.preventDefault(),t.shiftKey){var f=this._getLines(a,o),h=f.length-1,y=this._getLines(a,l).length-1,x=a.split(`
`).map(function(se,we){return we>=h&&we<=y&&se.startsWith(c)?se.substring(c.length):se}).join(`
`);if(a!==x){var M=f[h];this._applyEdits({value:x,selectionStart:M.startsWith(c)?o-c.length:o,selectionEnd:l-(a.length-x.length)})}}else if(o!==l){var T=this._getLines(a,o),q=T.length-1,K=this._getLines(a,l).length-1,m=T[q];this._applyEdits({value:a.split(`
`).map(function(se,we){return we>=q&&we<=K?c+se:se}).join(`
`),selectionStart:/\S/.test(m)?o+c.length:o,selectionEnd:l+c.length*(K-q+1)})}else{var p=o+c.length;this._applyEdits({value:a.substring(0,o)+c+a.substring(l),selectionStart:p,selectionEnd:p})}else if(t.keyCode===Vf){var d=o!==l,v=a.substring(0,o);if(v.endsWith(c)&&!d){t.preventDefault();var b=o-c.length;this._applyEdits({value:a.substring(0,o-c.length)+a.substring(l),selectionStart:b,selectionEnd:b})}}else if(t.keyCode===Kf){if(o===l){var C=this._getLines(a,o).pop(),O=C?.match(/^\s+/);if(O&&O[0]){t.preventDefault();var S=`
`+O[0],V=o+S.length;this._applyEdits({value:a.substring(0,o)+S+a.substring(l),selectionStart:V,selectionEnd:V})}}}else if(t.keyCode===Qs||t.keyCode===ea||t.keyCode===ta||t.keyCode===ra){var W;t.keyCode===Qs&&t.shiftKey?W=["(",")"]:t.keyCode===ea?t.shiftKey?W=["{","}"]:W=["[","]"]:t.keyCode===ta?t.shiftKey?W=['"','"']:W=["'","'"]:t.keyCode===ra&&!t.shiftKey&&(W=["`","`"]),o!==l&&W&&(t.preventDefault(),this._applyEdits({value:a.substring(0,o)+W[0]+a.substring(o,l)+W[1]+a.substring(l),selectionStart:o,selectionEnd:l+2}))}else(ti?t.metaKey&&t.keyCode===on:t.ctrlKey&&t.keyCode===on)&&!t.shiftKey&&!t.altKey?(t.preventDefault(),this._undoEdit()):(ti?t.metaKey&&t.keyCode===on&&t.shiftKey:Jf?t.ctrlKey&&t.keyCode===Wf:t.ctrlKey&&t.keyCode===on&&t.shiftKey)&&!t.altKey?(t.preventDefault(),this._redoEdit()):t.keyCode===zf&&t.ctrlKey&&(!ti||t.shiftKey)&&(t.preventDefault(),this.capture=!this.capture)}}},render:function(){var t=this,r=Gt("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=Gt("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[r,Array.from(Array(this.lineNumbersCount).keys()).map(function(o,l){return Gt("div",{class:"prism-editor__line-number token comment"},""+ ++l)})]),i=Gt("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(l){t.$emit("click",l)},onKeyup:function(l){t.$emit("keyup",l)},onFocus:function(l){t.$emit("focus",l)},onBlur:function(l){t.$emit("blur",l)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),s=Gt("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),a=Gt("div",{class:"prism-editor__container"},[i,s]);return Gt("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,a])}}),Xf={exports:{}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(n){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function m(p){return p instanceof l?new l(p.type,m(p.content),p.alias):Array.isArray(p)?p.map(m):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++s}),m.__id},clone:function m(p,d){d=d||{};var v,b;switch(o.util.type(p)){case"Object":if(b=o.util.objId(p),d[b])return d[b];v={},d[b]=v;for(var C in p)p.hasOwnProperty(C)&&(v[C]=m(p[C],d));return v;case"Array":return b=o.util.objId(p),d[b]?d[b]:(v=[],d[b]=v,p.forEach(function(O,S){v[S]=m(O,d)}),v);default:return p}},getLanguage:function(m){for(;m;){var p=i.exec(m.className);if(p)return p[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,p){m.className=m.className.replace(RegExp(i,"gi"),""),m.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(v){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(m){var p=document.getElementsByTagName("script");for(var d in p)if(p[d].src==m)return p[d]}return null}},isActive:function(m,p,d){for(var v="no-"+p;m;){var b=m.classList;if(b.contains(p))return!0;if(b.contains(v))return!1;m=m.parentElement}return!!d}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(m,p){var d=o.util.clone(o.languages[m]);for(var v in p)d[v]=p[v];return d},insertBefore:function(m,p,d,v){v=v||o.languages;var b=v[m],C={};for(var O in b)if(b.hasOwnProperty(O)){if(O==p)for(var S in d)d.hasOwnProperty(S)&&(C[S]=d[S]);d.hasOwnProperty(O)||(C[O]=b[O])}var V=v[m];return v[m]=C,o.languages.DFS(o.languages,function(W,se){se===V&&W!=m&&(this[W]=C)}),C},DFS:function m(p,d,v,b){b=b||{};var C=o.util.objId;for(var O in p)if(p.hasOwnProperty(O)){d.call(p,O,p[O],v||O);var S=p[O],V=o.util.type(S);V==="Object"&&!b[C(S)]?(b[C(S)]=!0,m(S,d,null,b)):V==="Array"&&!b[C(S)]&&(b[C(S)]=!0,m(S,d,O,b))}}},plugins:{},highlightAll:function(m,p){o.highlightAllUnder(document,m,p)},highlightAllUnder:function(m,p,d){var v={callback:d,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),o.hooks.run("before-all-elements-highlight",v);for(var b=0,C;C=v.elements[b++];)o.highlightElement(C,p===!0,v.callback)},highlightElement:function(m,p,d){var v=o.util.getLanguage(m),b=o.languages[v];o.util.setLanguage(m,v);var C=m.parentElement;C&&C.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(C,v);var O=m.textContent,S={element:m,language:v,grammar:b,code:O};function V(se){S.highlightedCode=se,o.hooks.run("before-insert",S),S.element.innerHTML=S.highlightedCode,o.hooks.run("after-highlight",S),o.hooks.run("complete",S),d&&d.call(S.element)}if(o.hooks.run("before-sanity-check",S),C=S.element.parentElement,C&&C.nodeName.toLowerCase()==="pre"&&!C.hasAttribute("tabindex")&&C.setAttribute("tabindex","0"),!S.code){o.hooks.run("complete",S),d&&d.call(S.element);return}if(o.hooks.run("before-highlight",S),!S.grammar){V(o.util.encode(S.code));return}if(p&&n.Worker){var W=new Worker(o.filename);W.onmessage=function(se){V(se.data)},W.postMessage(JSON.stringify({language:S.language,code:S.code,immediateClose:!0}))}else V(o.highlight(S.code,S.grammar,S.language))},highlight:function(m,p,d){var v={code:m,grammar:p,language:d};if(o.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=o.tokenize(v.code,v.grammar),o.hooks.run("after-tokenize",v),l.stringify(o.util.encode(v.tokens),v.language)},tokenize:function(m,p){var d=p.rest;if(d){for(var v in d)p[v]=d[v];delete p.rest}var b=new h;return y(b,b.head,m),f(m,b,p,b.head,0),M(b)},hooks:{all:{},add:function(m,p){var d=o.hooks.all;d[m]=d[m]||[],d[m].push(p)},run:function(m,p){var d=o.hooks.all[m];if(!(!d||!d.length))for(var v=0,b;b=d[v++];)b(p)}},Token:l};n.Prism=o;function l(m,p,d,v){this.type=m,this.content=p,this.alias=d,this.length=(v||"").length|0}l.stringify=function m(p,d){if(typeof p=="string")return p;if(Array.isArray(p)){var v="";return p.forEach(function(V){v+=m(V,d)}),v}var b={type:p.type,content:m(p.content,d),tag:"span",classes:["token",p.type],attributes:{},language:d},C=p.alias;C&&(Array.isArray(C)?Array.prototype.push.apply(b.classes,C):b.classes.push(C)),o.hooks.run("wrap",b);var O="";for(var S in b.attributes)O+=" "+S+'="'+(b.attributes[S]||"").replace(/"/g,"&quot;")+'"';return"<"+b.tag+' class="'+b.classes.join(" ")+'"'+O+">"+b.content+"</"+b.tag+">"};function c(m,p,d,v){m.lastIndex=p;var b=m.exec(d);if(b&&v&&b[1]){var C=b[1].length;b.index+=C,b[0]=b[0].slice(C)}return b}function f(m,p,d,v,b,C){for(var O in d)if(!(!d.hasOwnProperty(O)||!d[O])){var S=d[O];S=Array.isArray(S)?S:[S];for(var V=0;V<S.length;++V){if(C&&C.cause==O+","+V)return;var W=S[V],se=W.inside,we=!!W.lookbehind,Oe=!!W.greedy,ht=W.alias;if(Oe&&!W.pattern.global){var Ee=W.pattern.toString().match(/[imsuy]*$/)[0];W.pattern=RegExp(W.pattern.source,Ee+"g")}for(var de=W.pattern||W,z=v.next,ge=b;z!==p.tail&&!(C&&ge>=C.reach);ge+=z.value.length,z=z.next){var ke=z.value;if(p.length>m.length)return;if(!(ke instanceof l)){var Be=1,le;if(Oe){if(le=c(de,ge,m,we),!le||le.index>=m.length)break;var He=le.index,hr=le.index+le[0].length,Me=ge;for(Me+=z.value.length;He>=Me;)z=z.next,Me+=z.value.length;if(Me-=z.value.length,ge=Me,z.value instanceof l)continue;for(var Je=z;Je!==p.tail&&(Me<hr||typeof Je.value=="string");Je=Je.next)Be++,Me+=Je.value.length;Be--,ke=m.slice(ge,Me),le.index-=ge}else if(le=c(de,0,ke,we),!le)continue;var He=le.index,We=le[0],pt=ke.slice(0,He),Nt=ke.slice(He+We.length),Ze=ge+ke.length;C&&Ze>C.reach&&(C.reach=Ze);var at=z.prev;pt&&(at=y(p,at,pt),ge+=pt.length),x(p,at,Be);var pr=new l(O,se?o.tokenize(We,se):We,ht,We);if(z=y(p,at,pr),Nt&&y(p,z,Nt),Be>1){var g={cause:O+","+V,reach:Ze};f(m,p,d,z.prev,ge,g),C&&g.reach>C.reach&&(C.reach=g.reach)}}}}}}function h(){var m={value:null,prev:null,next:null},p={value:null,prev:m,next:null};m.next=p,this.head=m,this.tail=p,this.length=0}function y(m,p,d){var v=p.next,b={value:d,prev:p,next:v};return p.next=b,v.prev=b,m.length++,b}function x(m,p,d){for(var v=p.next,b=0;b<d&&v!==m.tail;b++)v=v.next;p.next=v,v.prev=p,m.length-=b}function M(m){for(var p=[],d=m.head.next;d!==m.tail;)p.push(d.value),d=d.next;return p}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(m){var p=JSON.parse(m.data),d=p.language,v=p.code,b=p.immediateClose;n.postMessage(o.highlight(v,o.languages[d],d)),b&&n.close()},!1)),o;var T=o.util.currentScript();T&&(o.filename=T.src,T.hasAttribute("data-manual")&&(o.manual=!0));function q(){o.manual||o.highlightAll()}if(!o.manual){var K=document.readyState;K==="loading"||K==="interactive"&&T&&T.defer?document.addEventListener("DOMContentLoaded",q):window.requestAnimationFrame?window.requestAnimationFrame(q):window.setTimeout(q,16)}return o}(t);e.exports&&(e.exports=r),typeof st<"u"&&(st.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:r.languages[s]};var l={};l[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,i){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:r.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(n){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var s=n.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading…",i=function(T,q){return"✖ Error "+T+" while fetching file: "+q},s="✖ Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",c="loaded",f="failed",h="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+l+'"])';function y(T,q,K){var m=new XMLHttpRequest;m.open("GET",T,!0),m.onreadystatechange=function(){m.readyState==4&&(m.status<400&&m.responseText?q(m.responseText):m.status>=400?K(i(m.status,m.statusText)):K(s))},m.send(null)}function x(T){var q=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(T||"");if(q){var K=Number(q[1]),m=q[2],p=q[3];return m?p?[K,Number(p)]:[K,void 0]:[K,K]}}r.hooks.add("before-highlightall",function(T){T.selector+=", "+h}),r.hooks.add("before-sanity-check",function(T){var q=T.element;if(q.matches(h)){T.code="",q.setAttribute(o,l);var K=q.appendChild(document.createElement("CODE"));K.textContent=n;var m=q.getAttribute("data-src"),p=T.language;if(p==="none"){var d=(/\.(\w+)$/.exec(m)||[,"none"])[1];p=a[d]||d}r.util.setLanguage(K,p),r.util.setLanguage(q,p);var v=r.plugins.autoloader;v&&v.loadLanguages(p),y(m,function(b){q.setAttribute(o,c);var C=x(q.getAttribute("data-range"));if(C){var O=b.split(/\r\n?|\n/g),S=C[0],V=C[1]==null?O.length:C[1];S<0&&(S+=O.length),S=Math.max(0,Math.min(S-1,O.length)),V<0&&(V+=O.length),V=Math.max(0,Math.min(V,O.length)),b=O.slice(S,V).join(`
`),q.hasAttribute("data-start")||q.setAttribute("data-start",String(S+1))}K.textContent=b,r.highlightElement(K)},function(b){q.setAttribute(o,f),K.textContent=b})}}),r.plugins.fileHighlight={highlight:function(q){for(var K=(q||document).querySelectorAll(h),m=0,p;p=K[m++];)r.highlightElement(p)}};var M=!1;r.fileHighlight=function(){M||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),M=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Xf);var _o={exports:{}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(n){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function m(p){return p instanceof l?new l(p.type,m(p.content),p.alias):Array.isArray(p)?p.map(m):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++s}),m.__id},clone:function m(p,d){d=d||{};var v,b;switch(o.util.type(p)){case"Object":if(b=o.util.objId(p),d[b])return d[b];v={},d[b]=v;for(var C in p)p.hasOwnProperty(C)&&(v[C]=m(p[C],d));return v;case"Array":return b=o.util.objId(p),d[b]?d[b]:(v=[],d[b]=v,p.forEach(function(O,S){v[S]=m(O,d)}),v);default:return p}},getLanguage:function(m){for(;m;){var p=i.exec(m.className);if(p)return p[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,p){m.className=m.className.replace(RegExp(i,"gi"),""),m.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(v){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(m){var p=document.getElementsByTagName("script");for(var d in p)if(p[d].src==m)return p[d]}return null}},isActive:function(m,p,d){for(var v="no-"+p;m;){var b=m.classList;if(b.contains(p))return!0;if(b.contains(v))return!1;m=m.parentElement}return!!d}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(m,p){var d=o.util.clone(o.languages[m]);for(var v in p)d[v]=p[v];return d},insertBefore:function(m,p,d,v){v=v||o.languages;var b=v[m],C={};for(var O in b)if(b.hasOwnProperty(O)){if(O==p)for(var S in d)d.hasOwnProperty(S)&&(C[S]=d[S]);d.hasOwnProperty(O)||(C[O]=b[O])}var V=v[m];return v[m]=C,o.languages.DFS(o.languages,function(W,se){se===V&&W!=m&&(this[W]=C)}),C},DFS:function m(p,d,v,b){b=b||{};var C=o.util.objId;for(var O in p)if(p.hasOwnProperty(O)){d.call(p,O,p[O],v||O);var S=p[O],V=o.util.type(S);V==="Object"&&!b[C(S)]?(b[C(S)]=!0,m(S,d,null,b)):V==="Array"&&!b[C(S)]&&(b[C(S)]=!0,m(S,d,O,b))}}},plugins:{},highlightAll:function(m,p){o.highlightAllUnder(document,m,p)},highlightAllUnder:function(m,p,d){var v={callback:d,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),o.hooks.run("before-all-elements-highlight",v);for(var b=0,C;C=v.elements[b++];)o.highlightElement(C,p===!0,v.callback)},highlightElement:function(m,p,d){var v=o.util.getLanguage(m),b=o.languages[v];o.util.setLanguage(m,v);var C=m.parentElement;C&&C.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(C,v);var O=m.textContent,S={element:m,language:v,grammar:b,code:O};function V(se){S.highlightedCode=se,o.hooks.run("before-insert",S),S.element.innerHTML=S.highlightedCode,o.hooks.run("after-highlight",S),o.hooks.run("complete",S),d&&d.call(S.element)}if(o.hooks.run("before-sanity-check",S),C=S.element.parentElement,C&&C.nodeName.toLowerCase()==="pre"&&!C.hasAttribute("tabindex")&&C.setAttribute("tabindex","0"),!S.code){o.hooks.run("complete",S),d&&d.call(S.element);return}if(o.hooks.run("before-highlight",S),!S.grammar){V(o.util.encode(S.code));return}if(p&&n.Worker){var W=new Worker(o.filename);W.onmessage=function(se){V(se.data)},W.postMessage(JSON.stringify({language:S.language,code:S.code,immediateClose:!0}))}else V(o.highlight(S.code,S.grammar,S.language))},highlight:function(m,p,d){var v={code:m,grammar:p,language:d};if(o.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=o.tokenize(v.code,v.grammar),o.hooks.run("after-tokenize",v),l.stringify(o.util.encode(v.tokens),v.language)},tokenize:function(m,p){var d=p.rest;if(d){for(var v in d)p[v]=d[v];delete p.rest}var b=new h;return y(b,b.head,m),f(m,b,p,b.head,0),M(b)},hooks:{all:{},add:function(m,p){var d=o.hooks.all;d[m]=d[m]||[],d[m].push(p)},run:function(m,p){var d=o.hooks.all[m];if(!(!d||!d.length))for(var v=0,b;b=d[v++];)b(p)}},Token:l};n.Prism=o;function l(m,p,d,v){this.type=m,this.content=p,this.alias=d,this.length=(v||"").length|0}l.stringify=function m(p,d){if(typeof p=="string")return p;if(Array.isArray(p)){var v="";return p.forEach(function(V){v+=m(V,d)}),v}var b={type:p.type,content:m(p.content,d),tag:"span",classes:["token",p.type],attributes:{},language:d},C=p.alias;C&&(Array.isArray(C)?Array.prototype.push.apply(b.classes,C):b.classes.push(C)),o.hooks.run("wrap",b);var O="";for(var S in b.attributes)O+=" "+S+'="'+(b.attributes[S]||"").replace(/"/g,"&quot;")+'"';return"<"+b.tag+' class="'+b.classes.join(" ")+'"'+O+">"+b.content+"</"+b.tag+">"};function c(m,p,d,v){m.lastIndex=p;var b=m.exec(d);if(b&&v&&b[1]){var C=b[1].length;b.index+=C,b[0]=b[0].slice(C)}return b}function f(m,p,d,v,b,C){for(var O in d)if(!(!d.hasOwnProperty(O)||!d[O])){var S=d[O];S=Array.isArray(S)?S:[S];for(var V=0;V<S.length;++V){if(C&&C.cause==O+","+V)return;var W=S[V],se=W.inside,we=!!W.lookbehind,Oe=!!W.greedy,ht=W.alias;if(Oe&&!W.pattern.global){var Ee=W.pattern.toString().match(/[imsuy]*$/)[0];W.pattern=RegExp(W.pattern.source,Ee+"g")}for(var de=W.pattern||W,z=v.next,ge=b;z!==p.tail&&!(C&&ge>=C.reach);ge+=z.value.length,z=z.next){var ke=z.value;if(p.length>m.length)return;if(!(ke instanceof l)){var Be=1,le;if(Oe){if(le=c(de,ge,m,we),!le||le.index>=m.length)break;var He=le.index,hr=le.index+le[0].length,Me=ge;for(Me+=z.value.length;He>=Me;)z=z.next,Me+=z.value.length;if(Me-=z.value.length,ge=Me,z.value instanceof l)continue;for(var Je=z;Je!==p.tail&&(Me<hr||typeof Je.value=="string");Je=Je.next)Be++,Me+=Je.value.length;Be--,ke=m.slice(ge,Me),le.index-=ge}else if(le=c(de,0,ke,we),!le)continue;var He=le.index,We=le[0],pt=ke.slice(0,He),Nt=ke.slice(He+We.length),Ze=ge+ke.length;C&&Ze>C.reach&&(C.reach=Ze);var at=z.prev;pt&&(at=y(p,at,pt),ge+=pt.length),x(p,at,Be);var pr=new l(O,se?o.tokenize(We,se):We,ht,We);if(z=y(p,at,pr),Nt&&y(p,z,Nt),Be>1){var g={cause:O+","+V,reach:Ze};f(m,p,d,z.prev,ge,g),C&&g.reach>C.reach&&(C.reach=g.reach)}}}}}}function h(){var m={value:null,prev:null,next:null},p={value:null,prev:m,next:null};m.next=p,this.head=m,this.tail=p,this.length=0}function y(m,p,d){var v=p.next,b={value:d,prev:p,next:v};return p.next=b,v.prev=b,m.length++,b}function x(m,p,d){for(var v=p.next,b=0;b<d&&v!==m.tail;b++)v=v.next;p.next=v,v.prev=p,m.length-=b}function M(m){for(var p=[],d=m.head.next;d!==m.tail;)p.push(d.value),d=d.next;return p}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(m){var p=JSON.parse(m.data),d=p.language,v=p.code,b=p.immediateClose;n.postMessage(o.highlight(v,o.languages[d],d)),b&&n.close()},!1)),o;var T=o.util.currentScript();T&&(o.filename=T.src,T.hasAttribute("data-manual")&&(o.manual=!0));function q(){o.manual||o.highlightAll()}if(!o.manual){var K=document.readyState;K==="loading"||K==="interactive"&&T&&T.defer?document.addEventListener("DOMContentLoaded",q):window.requestAnimationFrame?window.requestAnimationFrame(q):window.setTimeout(q,16)}return o}(t);e.exports&&(e.exports=r),typeof st<"u"&&(st.Prism=r)})(_o);var ia=_o.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const Qf={id:"settings-body"},eh={class:"settings-item"},th={class:"settings-item"},rh=["disabled"],xi=wt(5),wr=wt("time"),Cn=wt({irqRate:300,irqSleep:oo(()=>({time:xi.value,requestIdleCallback:()=>new Promise(e=>requestIdleCallback(e))})[wr.value])}),nh={__name:"Settings",emits:["exit"],setup(e,{emit:t}){const r=wt(null);return(n,i)=>(Ot(),Zt("div",{ref_key:"bg",ref:r,id:"settings-bg",onClick:i[4]||(i[4]=s=>s.target===r.value&&n.$emit("exit"))},[ne("div",Qf,[ne("div",eh,[i[5]||(i[5]=ne("header",null,"IRQ Rate",-1)),tn(ne("input",{type:"number","onUpdate:modelValue":i[0]||(i[0]=s=>Cn.value.irqRate=s)},null,512),[[Ms,Cn.value.irqRate]])]),ne("div",th,[i[8]||(i[8]=ne("header",null,"IRQ Sleep Time",-1)),ne("div",null,[tn(ne("input",{type:"radio",value:"time","onUpdate:modelValue":i[1]||(i[1]=s=>wr.value=s)},null,512),[[Os,wr.value]]),i[6]||(i[6]=tr(" time(milliseconds) ")),tn(ne("input",{type:"number","onUpdate:modelValue":i[2]||(i[2]=s=>xi.value=s),disabled:wr.value!=="time"},null,8,rh),[[Ms,xi.value]])]),ne("div",null,[tn(ne("input",{type:"radio",value:"requestIdleCallback","onUpdate:modelValue":i[3]||(i[3]=s=>wr.value=s)},null,512),[[Os,wr.value]]),i[7]||(i[7]=tr(" requestIdleCallback "))])])])],512))}},ih={id:"root"},sh={id:"grid1"},ah={id:"editor",class:"container"},oh={key:0,class:"syntaxError"},lh={id:"logs",class:"container"},uh={key:0,class:"actions"},ch={key:1,class:"actions"},fh={class:"type"},hh={id:"grid2"},ph={id:"ast",class:"container"},dh={__name:"App",setup(e){const t=wt(window.localStorage.getItem("script")||'<: "Hello, AiScript!"'),r=wt(null),n=wt([]),i=wt(null),s=wt(!1),a=wt(!1);cn(t,()=>{window.localStorage.setItem("script",t.value);try{r.value=br.parse(t.value),i.value=null}catch(h){i.value=h.message,console.error(h.info);return}},{immediate:!0});const o=()=>{t.value=`for (let i, 100) {
  <: if (i % 15 == 0) "FizzBuzz"
    elif (i % 3 == 0) "Fizz"
    elif (i % 5 == 0) "Buzz"
    else i
}`};let l=null;const c=async()=>{n.value=[],l?.abort(),a.value=!1,l=new ae({},{in:h=>new Promise(y=>{const x=window.prompt(h);y(x)}),out:h=>{n.value.push({id:Math.random(),type:h.type,text:h.type==="str"||h.type==="num"?h.value:yi(h),print:!0})},err:h=>{window.alert(h.toString())},log:(h,y)=>{switch(h){case"end":n.value.push({id:Math.random(),text:yi(y.val,!0),print:!1});break}},irqRate:Cn.value.irqRate,irqSleep:Cn.value.irqSleep});try{await l.exec(r.value)}catch(h){console.error(h),window.alert("Internal Error: "+h)}},f=h=>ia.highlight(h,ia.languages.js,"javascript");return(h,y)=>(Ot(),Zt("div",ih,[s.value?(Ot(),no(nh,{key:0,onExit:y[0]||(y[0]=x=>s.value=!1)})):ps("",!0),ne("h1",null,[tr("AiScript (v"+yr(kr(uo))+") Playground",1),ne("button",{id:"show-settings-button",onClick:y[1]||(y[1]=x=>s.value=!0)},"Settings")]),ne("div",sh,[ne("div",ah,[ne("header",null,[y[5]||(y[5]=tr("Input")),ne("div",{class:"actions"},[ne("button",{onClick:o},"FizzBuzz")])]),ne("div",null,[Ge(kr(Zf),{class:"code",modelValue:t.value,"onUpdate:modelValue":y[2]||(y[2]=x=>t.value=x),highlight:f,"line-numbers":!1},null,8,["modelValue"])]),ne("footer",null,[i.value?(Ot(),Zt("span",oh,yr(i.value),1)):ps("",!0),ne("div",{class:"actions"},[ne("button",{onClick:c},"RUN")])])]),ne("div",lh,[ne("header",null,[y[6]||(y[6]=tr(" Output ")),a.value?(Ot(),Zt("div",uh,[ne("button",{onClick:y[3]||(y[3]=x=>(kr(l).unpause(),a.value=!1))},"Unpause")])):(Ot(),Zt("div",ch,[ne("button",{onClick:y[4]||(y[4]=x=>(kr(l).pause(),a.value=!0))},"Pause")]))]),ne("div",null,[(Ot(!0),Zt(bt,null,kl(n.value,x=>(Ot(),Zt("div",{class:An(["log",[{print:x.print},x.type]]),key:x.id},[ne("span",fh,yr(x.type),1),tr(" "+yr(x.text),1)],2))),128))])])]),ne("div",hh,[ne("div",ph,[y[7]||(y[7]=ne("header",null,"AST",-1)),ne("div",null,[ne("pre",null,yr(JSON.stringify(r.value,(x,M)=>M instanceof Map?Object.fromEntries(M):M,"	")),1)])]),y[8]||(y[8]=ne("div",{id:"bin",class:"container"},[ne("header",null,"Bytecode"),ne("div")],-1)),y[9]||(y[9]=ne("div",{id:"debugger",class:"container"},[ne("header",null,"Debugger"),ne("div")],-1))])]))}};Ku(dh).mount("#app");
